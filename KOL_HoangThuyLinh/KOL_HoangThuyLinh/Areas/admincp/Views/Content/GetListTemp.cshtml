@using MvcPaging;
@using KOL_HoangThuyLinh.Models;
@using System.Web.Configuration;

@model IPagedList<tblNews>
<div class="table-responsive">
    <table class="table table-striped jambo_table bulk_action">
        <thead class="headings">
            <tr style="padding: 5px">
                <th class="column-title" style="width: 5%;">Id</th>
                <th class="column-title">Tiêu đề</th>
                <th class="column-title" style="width: 20%;">Thumb</th>
                <th class="column-title" style="width: 15%;"></th>
            </tr>
        </thead>
        @foreach (var item in Model)
        {
            string url = WebConfigurationManager.AppSettings["UrlHost"] + item.UrlLink + "-" + item.Id + ".html";
            string IdTypeName = "";
            switch (item.IdType)
            {
                case 1:
                    IdTypeName = "Bài Viết";
                    break;
                case 3:
                    IdTypeName = "Video";
                    break;
            }
            <tr>
                <td class="text-center" id="@item.Id">@item.Id</td>
                <td>
                    <span class="badge  bg-info">Tiêu đề</span>: @item.Title<br />
                    <span class="badge bg-success">Link</span>: <a href="@url" target="_blank">@url</a> <br />
                    <span class="badge bg-success">Loại: </span>: @IdTypeName 
                    @if (item.SEONoFollow)
                    {
                        <br />
                        <span class="badge bg-success">No Follow</span>
                    }
                    <br />Ngày xuất bản: @item.PublishDate.ToString("dd/MM/yyyy HH:mm")
                    <br /> <span>Tags</span>:
                    @{
                        if (item.Tags.Count > 0)
                        {
                            foreach (var tag in item.Tags)
                            {
                                <span class="badge badge-primary">@tag.TagName</span>
                            }
                        }
                    }
                    <br />Lượt view: @item.ViewCount
                </td>
                <td>
                    @if (!string.IsNullOrEmpty(item.Avatar2x1))
                    {
                        <img src="@item.Avatar2x1" width="200" onerror="this.onerror=null; this.src='/content/images/no-image.jpg'" />
                    }
                </td>

                <td class="text-right dvAction">
                    <div class="row m-0">
                        <div class="col-6">
                            <a href="#" title="Hiệu chỉnh bài" onclick="editcontent(@item.Id)"><i class="fa fa-edit"></i></a>
                        </div>
                        <div class="col-6">
                            <a href="#" title="Xóa bài" onclick="deletecontent(@item.Id)"><i class="fa fa-remove"></i></a>
                        </div>
                    </div>
                </td>
            </tr>
        }
    </table>
</div>

@if (Model.PageCount > 1)
{
    <div class="paging">
        @Html.Pager(Model.PageSize, Model.PageIndex + 1, Model.TotalItemCount, new AjaxOptions() { UpdateTargetId = "dvList" }).Options(o => o
           .RouteValues(new { clickPaging = true, ViewBag.key, ViewBag.fromdate, ViewBag.todate, ViewBag.idtype, ViewBag.chk })
          .DisplayTemplate("Bootstrap4Pagination")
         .MaxNrOfPages(5)
        )
    </div>
}
