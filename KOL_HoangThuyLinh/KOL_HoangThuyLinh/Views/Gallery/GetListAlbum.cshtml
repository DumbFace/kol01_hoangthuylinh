@using KOL_HoangThuyLinh.Models
@using MvcPaging
@model IPagedList<KOL_HoangThuyLinh.Models.tblGalleryDT>
@{
    //Phân trang vẫn mở đúng đúng hình ảnh trong modal
    int index = Model.PageSize * Model.PageIndex;
}

@if (Request.Browser.IsMobileDevice != true)
{
    <div class="album-images">
        @if (Model.Count() > 0)
        {
            int j = 0 + index;
            <div class="row">
                @foreach (tblGalleryDT tbl in Model.Skip(0).Take(4))
                {
                    if ((j % 2) == 0)
                    {
                        <div class="col-sm-2">
                            <figure class="figure">
                                <a href="#" onclick="initValue(@j,event)">
                                    <img src="@Url.Content("~/uploads/" + tbl.Avatar)" class="figure-img img-fluid">
                                </a>
                            </figure>
                        </div>
                    }
                    else
                    {
                        <div class="col-sm-4">
                            <figure class="figure">
                                <a href="#" onclick="initValue(@j,event)">
                                    <img src="@Url.Content("~/uploads/" + tbl.Avatar)" class="figure-img img-fluid">
                                </a>
                            </figure>
                        </div>
                    }
                    j++;
                }
            </div>

        }

        @if (Model.Count() > 4)
        {
            int k = 4 + index;
            int p = k + 1;
            <div class="row">
                @foreach (tblGalleryDT tbl in Model.Skip(4).Take(4))
                {
                    if (k > p)
                    {
                        <div class="col-sm-2">
                            <figure class="figure">
                                <a href="#" onclick="initValue(@k,event)">
                                    <img src="@Url.Content("~/uploads/" + tbl.Avatar)" class="figure-img img-fluid"
                                         alt="">
                                </a>
                            </figure>
                        </div>
                    }
                    else
                    {
                        <div class="col-sm-4">
                            <figure class="figure">
                                <a href="#" onclick="initValue(@k,event)">
                                    <img src="@Url.Content("~/uploads/" + tbl.Avatar)" class="figure-img img-fluid"
                                         alt="">
                                </a>
                            </figure>
                        </div>
                    }
                    k++;
                }
            </div>

        }

        @if (Model.Count() > 8)
        {
            int l = 8 + index;
            int splitColumn = l;
            int count = 0;
            <div class="row">
                @foreach (tblGalleryDT tbl in Model.Skip(8).Take(4))
                {
                    if ((splitColumn % 2) == 0)
                    {
                        <div class="col-sm-2">
                            <figure class="figure">
                                <a href="#" onclick="initValue(@l,event)">
                                    <img src="@Url.Content("~/uploads/" + tbl.Avatar)" class="figure-img img-fluid"
                                         alt="">
                                </a>
                            </figure>
                        </div>
                    }
                    else
                    {
                        <div class="col-sm-4">
                            <figure class="figure">
                                <a href="#" onclick="initValue(@l,event)">
                                    <img src="@Url.Content("~/uploads/" + tbl.Avatar)" class="figure-img img-fluid"
                                         alt="">
                                </a>
                            </figure>
                        </div>
                    }
                    l++;
                    splitColumn++;
                    count++;
                    if (count == 2)
                    {
                        splitColumn--;
                    }

                }

            </div>

        }
    </div>

}


@if (Request.Browser.IsMobileDevice)
{
    <div class="album-images">
        @if (Model.Count() > 0)
        {
            int j = 0 + index;
            <div class="row">
                @foreach (tblGalleryDT tbl in Model.Skip(0).Take(3))
                {
                    if ((j % 2) == 0)
                    {
                        <div class="col-3">
                            <figure class="figure">
                                <a href="#" onclick="initValue(@j,event)">
                                    <img src="@Url.Content("~/uploads/" + tbl.Avatar)" class="figure-img img-fluid">
                                </a>
                            </figure>
                        </div>
                    }
                    else
                    {
                        <div class="col-6">
                            <figure class="figure">
                                <a href="#" onclick="initValue(@j,event)">
                                    <img src="@Url.Content("~/uploads/" + tbl.Avatar)" class="figure-img img-fluid">
                                </a>
                            </figure>
                        </div>
                    }
                    j++;
                }
            </div>

        }

        @if (Model.Count() > 3)
        {
            int k = 3 + index;
            int count = 0;
            <div class="row">
                @foreach (tblGalleryDT tbl in Model.Skip(3).Take(3))
                {
                    if (count == 0)
                    {
                        <div class="col-6">
                            <figure class="figure">
                                <a href="#" onclick="initValue(@k,event)">
                                    <img src="@Url.Content("~/uploads/" + tbl.Avatar)" class="figure-img img-fluid"
                                         alt="">
                                </a>
                            </figure>
                        </div>
                    }
                    else
                    {
                        <div class="col-3">
                            <figure class="figure">
                                <a href="#" onclick="initValue(@k,event)">
                                    <img src="@Url.Content("~/uploads/" + tbl.Avatar)" class="figure-img img-fluid"
                                         alt="">
                                </a>
                            </figure>
                        </div>
                    }
                    k++;
                    count++;
                }
            </div>

        }

        @if (Model.Count() > 6)
        {
            int l = 6 + index;
            <div class="row third-row">
                @foreach (tblGalleryDT tbl in Model.Skip(6).Take(6))
                {
                    <div class="col-6">
                        <figure class="figure">
                            <a href="#" onclick="initValue(@l,event)">
                                <img src="@Url.Content("~/uploads/" + tbl.Avatar)" class="figure-img img-fluid"
                                     alt="">
                            </a>
                        </figure>
                    </div>

                }
            </div>

        }
    </div>

}



@if (Model.PageCount > 1)
{
    <div class="paging">
        @Html.Pager(Model.PageSize, Model.PageIndex + 1, Model.TotalItemCount, new AjaxOptions() { UpdateTargetId = "dvList" }).Options(o => o
                .Action("GetListAlbum")
   .RouteValues(new { ViewBag.idGallery })
          .DisplayTemplate("Bootstrap4Pagination")
         .MaxNrOfPages(5)
        )
    </div>
}
