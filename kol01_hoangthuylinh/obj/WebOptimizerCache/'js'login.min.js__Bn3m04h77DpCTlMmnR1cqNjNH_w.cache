{"Headers":{"Last-Modified":"Mon, 09 Jan 2023 03:37:49 GMT","X-Content-Type-Options":"nosniff"},"Body":"LyohIGpRdWVyeSB2My40LjEgfCAoYykgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovDQohZnVuY3Rpb24oZSx0KXsidXNlIHN0cmljdCI7Im9iamVjdCI9PXR5cGVvZiBtb2R1bGUmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9ZS5kb2N1bWVudD90KGUsITApOmZ1bmN0aW9uKGUpe2lmKCFlLmRvY3VtZW50KXRocm93IG5ldyBFcnJvcigialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudCIpO3JldHVybiB0KGUpfTp0KGUpfSgidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihDLGUpeyJ1c2Ugc3RyaWN0Ijt2YXIgdD1bXSxFPUMuZG9jdW1lbnQscj1PYmplY3QuZ2V0UHJvdG90eXBlT2Yscz10LnNsaWNlLGc9dC5jb25jYXQsdT10LnB1c2gsaT10LmluZGV4T2Ysbj17fSxvPW4udG9TdHJpbmcsdj1uLmhhc093blByb3BlcnR5LGE9di50b1N0cmluZyxsPWEuY2FsbChPYmplY3QpLHk9e30sbT1mdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZSYmIm51bWJlciIhPXR5cGVvZiBlLm5vZGVUeXBlfSx4PWZ1bmN0aW9uKGUpe3JldHVybiBudWxsIT1lJiZlPT09ZS53aW5kb3d9LGM9e3R5cGU6ITAsc3JjOiEwLG5vbmNlOiEwLG5vTW9kdWxlOiEwfTtmdW5jdGlvbiBiKGUsdCxuKXt2YXIgcixpLG89KG49bnx8RSkuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7aWYoby50ZXh0PWUsdClmb3IociBpbiBjKShpPXRbcl18fHQuZ2V0QXR0cmlidXRlJiZ0LmdldEF0dHJpYnV0ZShyKSkmJm8uc2V0QXR0cmlidXRlKHIsaSk7bi5oZWFkLmFwcGVuZENoaWxkKG8pLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobyl9ZnVuY3Rpb24gdyhlKXtyZXR1cm4gbnVsbD09ZT9lKyIiOiJvYmplY3QiPT10eXBlb2YgZXx8ImZ1bmN0aW9uIj09dHlwZW9mIGU/bltvLmNhbGwoZSldfHwib2JqZWN0Ijp0eXBlb2YgZX12YXIgZj0iMy40LjEiLGs9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IGsuZm4uaW5pdChlLHQpfSxwPS9eW1xzXHVGRUZGXHhBMF0rfFtcc1x1RkVGRlx4QTBdKyQvZztmdW5jdGlvbiBkKGUpe3ZhciB0PSEhZSYmImxlbmd0aCJpbiBlJiZlLmxlbmd0aCxuPXcoZSk7cmV0dXJuIW0oZSkmJiF4KGUpJiYoImFycmF5Ij09PW58fDA9PT10fHwibnVtYmVyIj09dHlwZW9mIHQmJjA8dCYmdC0xIGluIGUpfWsuZm49ay5wcm90b3R5cGU9e2pxdWVyeTpmLGNvbnN0cnVjdG9yOmssbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBzLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT9zLmNhbGwodGhpcyk6ZTwwP3RoaXNbZSt0aGlzLmxlbmd0aF06dGhpc1tlXX0scHVzaFN0YWNrOmZ1bmN0aW9uKGUpe3ZhciB0PWsubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGUpO3JldHVybiB0LnByZXZPYmplY3Q9dGhpcyx0fSxlYWNoOmZ1bmN0aW9uKGUpe3JldHVybiBrLmVhY2godGhpcyxlKX0sbWFwOmZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnB1c2hTdGFjayhrLm1hcCh0aGlzLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIG4uY2FsbChlLHQsZSl9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHMuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5sZW5ndGgsbj0rZSsoZTwwP3Q6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKDA8PW4mJm48dD9bdGhpc1tuXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKCl9LHB1c2g6dSxzb3J0OnQuc29ydCxzcGxpY2U6dC5zcGxpY2V9LGsuZXh0ZW5kPWsuZm4uZXh0ZW5kPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHIsaSxvLGE9YXJndW1lbnRzWzBdfHx7fSxzPTEsdT1hcmd1bWVudHMubGVuZ3RoLGw9ITE7Zm9yKCJib29sZWFuIj09dHlwZW9mIGEmJihsPWEsYT1hcmd1bWVudHNbc118fHt9LHMrKyksIm9iamVjdCI9PXR5cGVvZiBhfHxtKGEpfHwoYT17fSkscz09PXUmJihhPXRoaXMscy0tKTtzPHU7cysrKWlmKG51bGwhPShlPWFyZ3VtZW50c1tzXSkpZm9yKHQgaW4gZSlyPWVbdF0sIl9fcHJvdG9fXyIhPT10JiZhIT09ciYmKGwmJnImJihrLmlzUGxhaW5PYmplY3Qocil8fChpPUFycmF5LmlzQXJyYXkocikpKT8obj1hW3RdLG89aSYmIUFycmF5LmlzQXJyYXkobik/W106aXx8ay5pc1BsYWluT2JqZWN0KG4pP246e30saT0hMSxhW3RdPWsuZXh0ZW5kKGwsbyxyKSk6dm9pZCAwIT09ciYmKGFbdF09cikpO3JldHVybiBhfSxrLmV4dGVuZCh7ZXhwYW5kbzoialF1ZXJ5IisoZitNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cRC9nLCIiKSxpc1JlYWR5OiEwLGVycm9yOmZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcihlKX0sbm9vcDpmdW5jdGlvbigpe30saXNQbGFpbk9iamVjdDpmdW5jdGlvbihlKXt2YXIgdCxuO3JldHVybiEoIWV8fCJbb2JqZWN0IE9iamVjdF0iIT09by5jYWxsKGUpKSYmKCEodD1yKGUpKXx8ImZ1bmN0aW9uIj09dHlwZW9mKG49di5jYWxsKHQsImNvbnN0cnVjdG9yIikmJnQuY29uc3RydWN0b3IpJiZhLmNhbGwobik9PT1sKX0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihlKXt2YXIgdDtmb3IodCBpbiBlKXJldHVybiExO3JldHVybiEwfSxnbG9iYWxFdmFsOmZ1bmN0aW9uKGUsdCl7YihlLHtub25jZTp0JiZ0Lm5vbmNlfSl9LGVhY2g6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTA7aWYoZChlKSl7Zm9yKG49ZS5sZW5ndGg7cjxuO3IrKylpZighMT09PXQuY2FsbChlW3JdLHIsZVtyXSkpYnJlYWt9ZWxzZSBmb3IociBpbiBlKWlmKCExPT09dC5jYWxsKGVbcl0scixlW3JdKSlicmVhaztyZXR1cm4gZX0sdHJpbTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZT8iIjooZSsiIikucmVwbGFjZShwLCIiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGUsdCl7dmFyIG49dHx8W107cmV0dXJuIG51bGwhPWUmJihkKE9iamVjdChlKSk/ay5tZXJnZShuLCJzdHJpbmciPT10eXBlb2YgZT9bZV06ZSk6dS5jYWxsKG4sZSkpLG59LGluQXJyYXk6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBudWxsPT10Py0xOmkuY2FsbCh0LGUsbil9LG1lcmdlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPSt0Lmxlbmd0aCxyPTAsaT1lLmxlbmd0aDtyPG47cisrKWVbaSsrXT10W3JdO3JldHVybiBlLmxlbmd0aD1pLGV9LGdyZXA6ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1bXSxpPTAsbz1lLmxlbmd0aCxhPSFuO2k8bztpKyspIXQoZVtpXSxpKSE9PWEmJnIucHVzaChlW2ldKTtyZXR1cm4gcn0sbWFwOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89MCxhPVtdO2lmKGQoZSkpZm9yKHI9ZS5sZW5ndGg7bzxyO28rKyludWxsIT0oaT10KGVbb10sbyxuKSkmJmEucHVzaChpKTtlbHNlIGZvcihvIGluIGUpbnVsbCE9KGk9dChlW29dLG8sbikpJiZhLnB1c2goaSk7cmV0dXJuIGcuYXBwbHkoW10sYSl9LGd1aWQ6MSxzdXBwb3J0Onl9KSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoay5mbltTeW1ib2wuaXRlcmF0b3JdPXRbU3ltYm9sLml0ZXJhdG9yXSksay5lYWNoKCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yIFN5bWJvbCIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLHQpe25bIltvYmplY3QgIit0KyJdIl09dC50b0xvd2VyQ2FzZSgpfSk7dmFyIGg9ZnVuY3Rpb24obil7dmFyIGUsZCxiLG8saSxoLGYsZyx3LHUsbCxULEMsYSxFLHYscyxjLHksaz0ic2l6emxlIisxKm5ldyBEYXRlLG09bi5kb2N1bWVudCxTPTAscj0wLHA9dWUoKSx4PXVlKCksTj11ZSgpLEE9dWUoKSxEPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10JiYobD0hMCksMH0saj17fS5oYXNPd25Qcm9wZXJ0eSx0PVtdLHE9dC5wb3AsTD10LnB1c2gsSD10LnB1c2gsTz10LnNsaWNlLFA9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MCxyPWUubGVuZ3RoO248cjtuKyspaWYoZVtuXT09PXQpcmV0dXJuIG47cmV0dXJuLTF9LFI9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIixNPSJbXFx4MjBcXHRcXHJcXG5cXGZdIixJPSIoPzpcXFxcLnxbXFx3LV18W15cMC1cXHhhMF0pKyIsVz0iXFxbIitNKyIqKCIrSSsiKSg/OiIrTSsiKihbKl4kfCF+XT89KSIrTSsiKig/OicoKD86XFxcXC58W15cXFxcJ10pKiknfFwiKCg/OlxcXFwufFteXFxcXFwiXSkqKVwifCgiK0krIikpfCkiK00rIipcXF0iLCQ9IjooIitJKyIpKD86XFwoKCgnKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcIil8KCg/OlxcXFwufFteXFxcXCgpW1xcXV18IitXKyIpKil8LiopXFwpfCkiLEY9bmV3IFJlZ0V4cChNKyIrIiwiZyIpLEI9bmV3IFJlZ0V4cCgiXiIrTSsiK3woKD86XnxbXlxcXFxdKSg/OlxcXFwuKSopIitNKyIrJCIsImciKSxfPW5ldyBSZWdFeHAoIl4iK00rIiosIitNKyIqIiksej1uZXcgUmVnRXhwKCJeIitNKyIqKFs+K35dfCIrTSsiKSIrTSsiKiIpLFU9bmV3IFJlZ0V4cChNKyJ8PiIpLFg9bmV3IFJlZ0V4cCgkKSxWPW5ldyBSZWdFeHAoIl4iK0krIiQiKSxHPXtJRDpuZXcgUmVnRXhwKCJeIygiK0krIikiKSxDTEFTUzpuZXcgUmVnRXhwKCJeXFwuKCIrSSsiKSIpLFRBRzpuZXcgUmVnRXhwKCJeKCIrSSsifFsqXSkiKSxBVFRSOm5ldyBSZWdFeHAoIl4iK1cpLFBTRVVETzpuZXcgUmVnRXhwKCJeIiskKSxDSElMRDpuZXcgUmVnRXhwKCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXCgiK00rIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK00rIiooPzooWystXXwpIitNKyIqKFxcZCspfCkpIitNKyIqXFwpfCkiLCJpIiksYm9vbDpuZXcgUmVnRXhwKCJeKD86IitSKyIpJCIsImkiKSxuZWVkc0NvbnRleHQ6bmV3IFJlZ0V4cCgiXiIrTSsiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIitNKyIqKCg/Oi1cXGQpP1xcZCopIitNKyIqXFwpfCkoPz1bXi1dfCQpIiwiaSIpfSxZPS9IVE1MJC9pLFE9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxKPS9eaFxkJC9pLEs9L15bXntdK1x7XHMqXFtuYXRpdmUgXHcvLFo9L14oPzojKFtcdy1dKyl8KFx3Kyl8XC4oW1x3LV0rKSkkLyxlZT0vWyt+XS8sdGU9bmV3IFJlZ0V4cCgiXFxcXChbXFxkYS1mXXsxLDZ9IitNKyI/fCgiK00rIil8LikiLCJpZyIpLG5lPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcj0iMHgiK3QtNjU1MzY7cmV0dXJuIHIhPXJ8fG4/dDpyPDA/U3RyaW5nLmZyb21DaGFyQ29kZShyKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKHI+PjEwfDU1Mjk2LDEwMjMmcnw1NjMyMCl9LHJlPS8oW1wwLVx4MWZceDdmXXxeLT9cZCl8Xi0kfFteXDAtXHgxZlx4N2YtXHVGRkZGXHctXS9nLGllPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/IlwwIj09PWU/Ilx1ZmZmZCI6ZS5zbGljZSgwLC0xKSsiXFwiK2UuY2hhckNvZGVBdChlLmxlbmd0aC0xKS50b1N0cmluZygxNikrIiAiOiJcXCIrZX0sb2U9ZnVuY3Rpb24oKXtUKCl9LGFlPWJlKGZ1bmN0aW9uKGUpe3JldHVybiEwPT09ZS5kaXNhYmxlZCYmImZpZWxkc2V0Ij09PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKX0se2RpcjoicGFyZW50Tm9kZSIsbmV4dDoibGVnZW5kIn0pO3RyeXtILmFwcGx5KHQ9Ty5jYWxsKG0uY2hpbGROb2RlcyksbS5jaGlsZE5vZGVzKSx0W20uY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlfWNhdGNoKGUpe0g9e2FwcGx5OnQubGVuZ3RoP2Z1bmN0aW9uKGUsdCl7TC5hcHBseShlLE8uY2FsbCh0KSl9OmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5sZW5ndGgscj0wO3doaWxlKGVbbisrXT10W3IrK10pO2UubGVuZ3RoPW4tMX19fWZ1bmN0aW9uIHNlKHQsZSxuLHIpe3ZhciBpLG8sYSxzLHUsbCxjLGY9ZSYmZS5vd25lckRvY3VtZW50LHA9ZT9lLm5vZGVUeXBlOjk7aWYobj1ufHxbXSwic3RyaW5nIiE9dHlwZW9mIHR8fCF0fHwxIT09cCYmOSE9PXAmJjExIT09cClyZXR1cm4gbjtpZighciYmKChlP2Uub3duZXJEb2N1bWVudHx8ZTptKSE9PUMmJlQoZSksZT1lfHxDLEUpKXtpZigxMSE9PXAmJih1PVouZXhlYyh0KSkpaWYoaT11WzFdKXtpZig5PT09cCl7aWYoIShhPWUuZ2V0RWxlbWVudEJ5SWQoaSkpKXJldHVybiBuO2lmKGEuaWQ9PT1pKXJldHVybiBuLnB1c2goYSksbn1lbHNlIGlmKGYmJihhPWYuZ2V0RWxlbWVudEJ5SWQoaSkpJiZ5KGUsYSkmJmEuaWQ9PT1pKXJldHVybiBuLnB1c2goYSksbn1lbHNle2lmKHVbMl0pcmV0dXJuIEguYXBwbHkobixlLmdldEVsZW1lbnRzQnlUYWdOYW1lKHQpKSxuO2lmKChpPXVbM10pJiZkLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gSC5hcHBseShuLGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShpKSksbn1pZihkLnFzYSYmIUFbdCsiICJdJiYoIXZ8fCF2LnRlc3QodCkpJiYoMSE9PXB8fCJvYmplY3QiIT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSl7aWYoYz10LGY9ZSwxPT09cCYmVS50ZXN0KHQpKXsocz1lLmdldEF0dHJpYnV0ZSgiaWQiKSk/cz1zLnJlcGxhY2UocmUsaWUpOmUuc2V0QXR0cmlidXRlKCJpZCIscz1rKSxvPShsPWgodCkpLmxlbmd0aDt3aGlsZShvLS0pbFtvXT0iIyIrcysiICIreGUobFtvXSk7Yz1sLmpvaW4oIiwiKSxmPWVlLnRlc3QodCkmJnllKGUucGFyZW50Tm9kZSl8fGV9dHJ5e3JldHVybiBILmFwcGx5KG4sZi5xdWVyeVNlbGVjdG9yQWxsKGMpKSxufWNhdGNoKGUpe0EodCwhMCl9ZmluYWxseXtzPT09ayYmZS5yZW1vdmVBdHRyaWJ1dGUoImlkIil9fX1yZXR1cm4gZyh0LnJlcGxhY2UoQiwiJDEiKSxlLG4scil9ZnVuY3Rpb24gdWUoKXt2YXIgcj1bXTtyZXR1cm4gZnVuY3Rpb24gZSh0LG4pe3JldHVybiByLnB1c2godCsiICIpPmIuY2FjaGVMZW5ndGgmJmRlbGV0ZSBlW3Iuc2hpZnQoKV0sZVt0KyIgIl09bn19ZnVuY3Rpb24gbGUoZSl7cmV0dXJuIGVba109ITAsZX1mdW5jdGlvbiBjZShlKXt2YXIgdD1DLmNyZWF0ZUVsZW1lbnQoImZpZWxkc2V0Iik7dHJ5e3JldHVybiEhZSh0KX1jYXRjaChlKXtyZXR1cm4hMX1maW5hbGx5e3QucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLHQ9bnVsbH19ZnVuY3Rpb24gZmUoZSx0KXt2YXIgbj1lLnNwbGl0KCJ8Iikscj1uLmxlbmd0aDt3aGlsZShyLS0pYi5hdHRySGFuZGxlW25bcl1dPXR9ZnVuY3Rpb24gcGUoZSx0KXt2YXIgbj10JiZlLHI9biYmMT09PWUubm9kZVR5cGUmJjE9PT10Lm5vZGVUeXBlJiZlLnNvdXJjZUluZGV4LXQuc291cmNlSW5kZXg7aWYocilyZXR1cm4gcjtpZihuKXdoaWxlKG49bi5uZXh0U2libGluZylpZihuPT09dClyZXR1cm4tMTtyZXR1cm4gZT8xOi0xfWZ1bmN0aW9uIGRlKHQpe3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4iaW5wdXQiPT09ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZlLnR5cGU9PT10fX1mdW5jdGlvbiBoZShuKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybigiaW5wdXQiPT09dHx8ImJ1dHRvbiI9PT10KSYmZS50eXBlPT09bn19ZnVuY3Rpb24gZ2UodCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiJmb3JtImluIGU/ZS5wYXJlbnROb2RlJiYhMT09PWUuZGlzYWJsZWQ/ImxhYmVsImluIGU/ImxhYmVsImluIGUucGFyZW50Tm9kZT9lLnBhcmVudE5vZGUuZGlzYWJsZWQ9PT10OmUuZGlzYWJsZWQ9PT10OmUuaXNEaXNhYmxlZD09PXR8fGUuaXNEaXNhYmxlZCE9PSF0JiZhZShlKT09PXQ6ZS5kaXNhYmxlZD09PXQ6ImxhYmVsImluIGUmJmUuZGlzYWJsZWQ9PT10fX1mdW5jdGlvbiB2ZShhKXtyZXR1cm4gbGUoZnVuY3Rpb24obyl7cmV0dXJuIG89K28sbGUoZnVuY3Rpb24oZSx0KXt2YXIgbixyPWEoW10sZS5sZW5ndGgsbyksaT1yLmxlbmd0aDt3aGlsZShpLS0pZVtuPXJbaV1dJiYoZVtuXT0hKHRbbl09ZVtuXSkpfSl9KX1mdW5jdGlvbiB5ZShlKXtyZXR1cm4gZSYmInVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEVsZW1lbnRzQnlUYWdOYW1lJiZlfWZvcihlIGluIGQ9c2Uuc3VwcG9ydD17fSxpPXNlLmlzWE1MPWZ1bmN0aW9uKGUpe3ZhciB0PWUubmFtZXNwYWNlVVJJLG49KGUub3duZXJEb2N1bWVudHx8ZSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiFZLnRlc3QodHx8biYmbi5ub2RlTmFtZXx8IkhUTUwiKX0sVD1zZS5zZXREb2N1bWVudD1mdW5jdGlvbihlKXt2YXIgdCxuLHI9ZT9lLm93bmVyRG9jdW1lbnR8fGU6bTtyZXR1cm4gciE9PUMmJjk9PT1yLm5vZGVUeXBlJiZyLmRvY3VtZW50RWxlbWVudCYmKGE9KEM9cikuZG9jdW1lbnRFbGVtZW50LEU9IWkoQyksbSE9PUMmJihuPUMuZGVmYXVsdFZpZXcpJiZuLnRvcCE9PW4mJihuLmFkZEV2ZW50TGlzdGVuZXI/bi5hZGRFdmVudExpc3RlbmVyKCJ1bmxvYWQiLG9lLCExKTpuLmF0dGFjaEV2ZW50JiZuLmF0dGFjaEV2ZW50KCJvbnVubG9hZCIsb2UpKSxkLmF0dHJpYnV0ZXM9Y2UoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2xhc3NOYW1lPSJpIiwhZS5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpfSksZC5nZXRFbGVtZW50c0J5VGFnTmFtZT1jZShmdW5jdGlvbihlKXtyZXR1cm4gZS5hcHBlbmRDaGlsZChDLmNyZWF0ZUNvbW1lbnQoIiIpKSwhZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgiKiIpLmxlbmd0aH0pLGQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT1LLnRlc3QoQy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKSxkLmdldEJ5SWQ9Y2UoZnVuY3Rpb24oZSl7cmV0dXJuIGEuYXBwZW5kQ2hpbGQoZSkuaWQ9aywhQy5nZXRFbGVtZW50c0J5TmFtZXx8IUMuZ2V0RWxlbWVudHNCeU5hbWUoaykubGVuZ3RofSksZC5nZXRCeUlkPyhiLmZpbHRlci5JRD1mdW5jdGlvbihlKXt2YXIgdD1lLnJlcGxhY2UodGUsbmUpO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXRBdHRyaWJ1dGUoImlkIik9PT10fX0sYi5maW5kLklEPWZ1bmN0aW9uKGUsdCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiB0LmdldEVsZW1lbnRCeUlkJiZFKXt2YXIgbj10LmdldEVsZW1lbnRCeUlkKGUpO3JldHVybiBuP1tuXTpbXX19KTooYi5maWx0ZXIuSUQ9ZnVuY3Rpb24oZSl7dmFyIG49ZS5yZXBsYWNlKHRlLG5lKTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9InVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEF0dHJpYnV0ZU5vZGUmJmUuZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtyZXR1cm4gdCYmdC52YWx1ZT09PW59fSxiLmZpbmQuSUQ9ZnVuY3Rpb24oZSx0KXtpZigidW5kZWZpbmVkIiE9dHlwZW9mIHQuZ2V0RWxlbWVudEJ5SWQmJkUpe3ZhciBuLHIsaSxvPXQuZ2V0RWxlbWVudEJ5SWQoZSk7aWYobyl7aWYoKG49by5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpKSYmbi52YWx1ZT09PWUpcmV0dXJuW29dO2k9dC5nZXRFbGVtZW50c0J5TmFtZShlKSxyPTA7d2hpbGUobz1pW3IrK10paWYoKG49by5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpKSYmbi52YWx1ZT09PWUpcmV0dXJuW29dfXJldHVybltdfX0pLGIuZmluZC5UQUc9ZC5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihlLHQpe3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgdC5nZXRFbGVtZW50c0J5VGFnTmFtZT90LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpOmQucXNhP3QucXVlcnlTZWxlY3RvckFsbChlKTp2b2lkIDB9OmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1bXSxpPTAsbz10LmdldEVsZW1lbnRzQnlUYWdOYW1lKGUpO2lmKCIqIj09PWUpe3doaWxlKG49b1tpKytdKTE9PT1uLm5vZGVUeXBlJiZyLnB1c2gobik7cmV0dXJuIHJ9cmV0dXJuIG99LGIuZmluZC5DTEFTUz1kLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGUsdCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiB0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJkUpcmV0dXJuIHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShlKX0scz1bXSx2PVtdLChkLnFzYT1LLnRlc3QoQy5xdWVyeVNlbGVjdG9yQWxsKSkmJihjZShmdW5jdGlvbihlKXthLmFwcGVuZENoaWxkKGUpLmlubmVySFRNTD0iPGEgaWQ9JyIraysiJz48L2E+PHNlbGVjdCBpZD0nIitrKyItXHJcXCcgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD4iLGUucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGgmJnYucHVzaCgiWypeJF09IitNKyIqKD86Jyd8XCJcIikiKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGh8fHYucHVzaCgiXFxbIitNKyIqKD86dmFsdWV8IitSKyIpIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJbaWR+PSIraysiLV0iKS5sZW5ndGh8fHYucHVzaCgifj0iKSxlLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RofHx2LnB1c2goIjpjaGVja2VkIiksZS5xdWVyeVNlbGVjdG9yQWxsKCJhIyIraysiKyoiKS5sZW5ndGh8fHYucHVzaCgiLiMuK1srfl0iKX0pLGNlKGZ1bmN0aW9uKGUpe2UuaW5uZXJIVE1MPSI8YSBocmVmPScnIGRpc2FibGVkPSdkaXNhYmxlZCc+PC9hPjxzZWxlY3QgZGlzYWJsZWQ9J2Rpc2FibGVkJz48b3B0aW9uLz48L3NlbGVjdD4iO3ZhciB0PUMuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTt0LnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpLGUuYXBwZW5kQ2hpbGQodCkuc2V0QXR0cmlidXRlKCJuYW1lIiwiRCIpLGUucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgmJnYucHVzaCgibmFtZSIrTSsiKlsqXiR8IX5dPz0iKSwyIT09ZS5xdWVyeVNlbGVjdG9yQWxsKCI6ZW5hYmxlZCIpLmxlbmd0aCYmdi5wdXNoKCI6ZW5hYmxlZCIsIjpkaXNhYmxlZCIpLGEuYXBwZW5kQ2hpbGQoZSkuZGlzYWJsZWQ9ITAsMiE9PWUucXVlcnlTZWxlY3RvckFsbCgiOmRpc2FibGVkIikubGVuZ3RoJiZ2LnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIiksZS5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4Iiksdi5wdXNoKCIsLio6Iil9KSksKGQubWF0Y2hlc1NlbGVjdG9yPUsudGVzdChjPWEubWF0Y2hlc3x8YS53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fGEubW96TWF0Y2hlc1NlbGVjdG9yfHxhLm9NYXRjaGVzU2VsZWN0b3J8fGEubXNNYXRjaGVzU2VsZWN0b3IpKSYmY2UoZnVuY3Rpb24oZSl7ZC5kaXNjb25uZWN0ZWRNYXRjaD1jLmNhbGwoZSwiKiIpLGMuY2FsbChlLCJbcyE9JyddOngiKSxzLnB1c2goIiE9IiwkKX0pLHY9di5sZW5ndGgmJm5ldyBSZWdFeHAodi5qb2luKCJ8IikpLHM9cy5sZW5ndGgmJm5ldyBSZWdFeHAocy5qb2luKCJ8IikpLHQ9Sy50ZXN0KGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24pLHk9dHx8Sy50ZXN0KGEuY29udGFpbnMpP2Z1bmN0aW9uKGUsdCl7dmFyIG49OT09PWUubm9kZVR5cGU/ZS5kb2N1bWVudEVsZW1lbnQ6ZSxyPXQmJnQucGFyZW50Tm9kZTtyZXR1cm4gZT09PXJ8fCEoIXJ8fDEhPT1yLm5vZGVUeXBlfHwhKG4uY29udGFpbnM/bi5jb250YWlucyhyKTplLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHIpKSl9OmZ1bmN0aW9uKGUsdCl7aWYodCl3aGlsZSh0PXQucGFyZW50Tm9kZSlpZih0PT09ZSlyZXR1cm4hMDtyZXR1cm4hMX0sRD10P2Z1bmN0aW9uKGUsdCl7aWYoZT09PXQpcmV0dXJuIGw9ITAsMDt2YXIgbj0hZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hdC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gbnx8KDEmKG49KGUub3duZXJEb2N1bWVudHx8ZSk9PT0odC5vd25lckRvY3VtZW50fHx0KT9lLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHQpOjEpfHwhZC5zb3J0RGV0YWNoZWQmJnQuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZSk9PT1uP2U9PT1DfHxlLm93bmVyRG9jdW1lbnQ9PT1tJiZ5KG0sZSk/LTE6dD09PUN8fHQub3duZXJEb2N1bWVudD09PW0mJnkobSx0KT8xOnU/UCh1LGUpLVAodSx0KTowOjQmbj8tMToxKX06ZnVuY3Rpb24oZSx0KXtpZihlPT09dClyZXR1cm4gbD0hMCwwO3ZhciBuLHI9MCxpPWUucGFyZW50Tm9kZSxvPXQucGFyZW50Tm9kZSxhPVtlXSxzPVt0XTtpZighaXx8IW8pcmV0dXJuIGU9PT1DPy0xOnQ9PT1DPzE6aT8tMTpvPzE6dT9QKHUsZSktUCh1LHQpOjA7aWYoaT09PW8pcmV0dXJuIHBlKGUsdCk7bj1lO3doaWxlKG49bi5wYXJlbnROb2RlKWEudW5zaGlmdChuKTtuPXQ7d2hpbGUobj1uLnBhcmVudE5vZGUpcy51bnNoaWZ0KG4pO3doaWxlKGFbcl09PT1zW3JdKXIrKztyZXR1cm4gcj9wZShhW3JdLHNbcl0pOmFbcl09PT1tPy0xOnNbcl09PT1tPzE6MH0pLEN9LHNlLm1hdGNoZXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gc2UoZSxudWxsLG51bGwsdCl9LHNlLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihlLHQpe2lmKChlLm93bmVyRG9jdW1lbnR8fGUpIT09QyYmVChlKSxkLm1hdGNoZXNTZWxlY3RvciYmRSYmIUFbdCsiICJdJiYoIXN8fCFzLnRlc3QodCkpJiYoIXZ8fCF2LnRlc3QodCkpKXRyeXt2YXIgbj1jLmNhbGwoZSx0KTtpZihufHxkLmRpc2Nvbm5lY3RlZE1hdGNofHxlLmRvY3VtZW50JiYxMSE9PWUuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIG59Y2F0Y2goZSl7QSh0LCEwKX1yZXR1cm4gMDxzZSh0LEMsbnVsbCxbZV0pLmxlbmd0aH0sc2UuY29udGFpbnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZS5vd25lckRvY3VtZW50fHxlKSE9PUMmJlQoZSkseShlLHQpfSxzZS5hdHRyPWZ1bmN0aW9uKGUsdCl7KGUub3duZXJEb2N1bWVudHx8ZSkhPT1DJiZUKGUpO3ZhciBuPWIuYXR0ckhhbmRsZVt0LnRvTG93ZXJDYXNlKCldLHI9biYmai5jYWxsKGIuYXR0ckhhbmRsZSx0LnRvTG93ZXJDYXNlKCkpP24oZSx0LCFFKTp2b2lkIDA7cmV0dXJuIHZvaWQgMCE9PXI/cjpkLmF0dHJpYnV0ZXN8fCFFP2UuZ2V0QXR0cmlidXRlKHQpOihyPWUuZ2V0QXR0cmlidXRlTm9kZSh0KSkmJnIuc3BlY2lmaWVkP3IudmFsdWU6bnVsbH0sc2UuZXNjYXBlPWZ1bmN0aW9uKGUpe3JldHVybihlKyIiKS5yZXBsYWNlKHJlLGllKX0sc2UuZXJyb3I9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiAiK2UpfSxzZS51bmlxdWVTb3J0PWZ1bmN0aW9uKGUpe3ZhciB0LG49W10scj0wLGk9MDtpZihsPSFkLmRldGVjdER1cGxpY2F0ZXMsdT0hZC5zb3J0U3RhYmxlJiZlLnNsaWNlKDApLGUuc29ydChEKSxsKXt3aGlsZSh0PWVbaSsrXSl0PT09ZVtpXSYmKHI9bi5wdXNoKGkpKTt3aGlsZShyLS0pZS5zcGxpY2UobltyXSwxKX1yZXR1cm4gdT1udWxsLGV9LG89c2UuZ2V0VGV4dD1mdW5jdGlvbihlKXt2YXIgdCxuPSIiLHI9MCxpPWUubm9kZVR5cGU7aWYoaSl7aWYoMT09PWl8fDk9PT1pfHwxMT09PWkpe2lmKCJzdHJpbmciPT10eXBlb2YgZS50ZXh0Q29udGVudClyZXR1cm4gZS50ZXh0Q29udGVudDtmb3IoZT1lLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpbis9byhlKX1lbHNlIGlmKDM9PT1pfHw0PT09aSlyZXR1cm4gZS5ub2RlVmFsdWV9ZWxzZSB3aGlsZSh0PWVbcisrXSluKz1vKHQpO3JldHVybiBufSwoYj1zZS5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpsZSxtYXRjaDpHLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7Ij4iOntkaXI6InBhcmVudE5vZGUiLGZpcnN0OiEwfSwiICI6e2RpcjoicGFyZW50Tm9kZSJ9LCIrIjp7ZGlyOiJwcmV2aW91c1NpYmxpbmciLGZpcnN0OiEwfSwifiI6e2RpcjoicHJldmlvdXNTaWJsaW5nIn19LHByZUZpbHRlcjp7QVRUUjpmdW5jdGlvbihlKXtyZXR1cm4gZVsxXT1lWzFdLnJlcGxhY2UodGUsbmUpLGVbM109KGVbM118fGVbNF18fGVbNV18fCIiKS5yZXBsYWNlKHRlLG5lKSwifj0iPT09ZVsyXSYmKGVbM109IiAiK2VbM10rIiAiKSxlLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGUpe3JldHVybiBlWzFdPWVbMV0udG9Mb3dlckNhc2UoKSwibnRoIj09PWVbMV0uc2xpY2UoMCwzKT8oZVszXXx8c2UuZXJyb3IoZVswXSksZVs0XT0rKGVbNF0/ZVs1XSsoZVs2XXx8MSk6MiooImV2ZW4iPT09ZVszXXx8Im9kZCI9PT1lWzNdKSksZVs1XT0rKGVbN10rZVs4XXx8Im9kZCI9PT1lWzNdKSk6ZVszXSYmc2UuZXJyb3IoZVswXSksZX0sUFNFVURPOmZ1bmN0aW9uKGUpe3ZhciB0LG49IWVbNl0mJmVbMl07cmV0dXJuIEcuQ0hJTEQudGVzdChlWzBdKT9udWxsOihlWzNdP2VbMl09ZVs0XXx8ZVs1XXx8IiI6biYmWC50ZXN0KG4pJiYodD1oKG4sITApKSYmKHQ9bi5pbmRleE9mKCIpIixuLmxlbmd0aC10KS1uLmxlbmd0aCkmJihlWzBdPWVbMF0uc2xpY2UoMCx0KSxlWzJdPW4uc2xpY2UoMCx0KSksZS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGUpe3ZhciB0PWUucmVwbGFjZSh0ZSxuZSkudG9Mb3dlckNhc2UoKTtyZXR1cm4iKiI9PT1lP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGUpe3JldHVybiBlLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT10fX0sQ0xBU1M6ZnVuY3Rpb24oZSl7dmFyIHQ9cFtlKyIgIl07cmV0dXJuIHR8fCh0PW5ldyBSZWdFeHAoIihefCIrTSsiKSIrZSsiKCIrTSsifCQpIikpJiZwKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQudGVzdCgic3RyaW5nIj09dHlwZW9mIGUuY2xhc3NOYW1lJiZlLmNsYXNzTmFtZXx8InVuZGVmaW5lZCIhPXR5cGVvZiBlLmdldEF0dHJpYnV0ZSYmZS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKX0pfSxBVFRSOmZ1bmN0aW9uKG4scixpKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9c2UuYXR0cihlLG4pO3JldHVybiBudWxsPT10PyIhPSI9PT1yOiFyfHwodCs9IiIsIj0iPT09cj90PT09aToiIT0iPT09cj90IT09aToiXj0iPT09cj9pJiYwPT09dC5pbmRleE9mKGkpOiIqPSI9PT1yP2kmJi0xPHQuaW5kZXhPZihpKToiJD0iPT09cj9pJiZ0LnNsaWNlKC1pLmxlbmd0aCk9PT1pOiJ+PSI9PT1yPy0xPCgiICIrdC5yZXBsYWNlKEYsIiAiKSsiICIpLmluZGV4T2YoaSk6Inw9Ij09PXImJih0PT09aXx8dC5zbGljZSgwLGkubGVuZ3RoKzEpPT09aSsiLSIpKX19LENISUxEOmZ1bmN0aW9uKGgsZSx0LGcsdil7dmFyIHk9Im50aCIhPT1oLnNsaWNlKDAsMyksbT0ibGFzdCIhPT1oLnNsaWNlKC00KSx4PSJvZi10eXBlIj09PWU7cmV0dXJuIDE9PT1nJiYwPT09dj9mdW5jdGlvbihlKXtyZXR1cm4hIWUucGFyZW50Tm9kZX06ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsPXkhPT1tPyJuZXh0U2libGluZyI6InByZXZpb3VzU2libGluZyIsYz1lLnBhcmVudE5vZGUsZj14JiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkscD0hbiYmIXgsZD0hMTtpZihjKXtpZih5KXt3aGlsZShsKXthPWU7d2hpbGUoYT1hW2xdKWlmKHg/YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09ZjoxPT09YS5ub2RlVHlwZSlyZXR1cm4hMTt1PWw9Im9ubHkiPT09aCYmIXUmJiJuZXh0U2libGluZyJ9cmV0dXJuITB9aWYodT1bbT9jLmZpcnN0Q2hpbGQ6Yy5sYXN0Q2hpbGRdLG0mJnApe2Q9KHM9KHI9KGk9KG89KGE9Yylba118fChhW2tdPXt9KSlbYS51bmlxdWVJRF18fChvW2EudW5pcXVlSURdPXt9KSlbaF18fFtdKVswXT09PVMmJnJbMV0pJiZyWzJdLGE9cyYmYy5jaGlsZE5vZGVzW3NdO3doaWxlKGE9KytzJiZhJiZhW2xdfHwoZD1zPTApfHx1LnBvcCgpKWlmKDE9PT1hLm5vZGVUeXBlJiYrK2QmJmE9PT1lKXtpW2hdPVtTLHMsZF07YnJlYWt9fWVsc2UgaWYocCYmKGQ9cz0ocj0oaT0obz0oYT1lKVtrXXx8KGFba109e30pKVthLnVuaXF1ZUlEXXx8KG9bYS51bmlxdWVJRF09e30pKVtoXXx8W10pWzBdPT09UyYmclsxXSksITE9PT1kKXdoaWxlKGE9KytzJiZhJiZhW2xdfHwoZD1zPTApfHx1LnBvcCgpKWlmKCh4P2Eubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWY6MT09PWEubm9kZVR5cGUpJiYrK2QmJihwJiYoKGk9KG89YVtrXXx8KGFba109e30pKVthLnVuaXF1ZUlEXXx8KG9bYS51bmlxdWVJRF09e30pKVtoXT1bUyxkXSksYT09PWUpKWJyZWFrO3JldHVybihkLT12KT09PWd8fGQlZz09MCYmMDw9ZC9nfX19LFBTRVVETzpmdW5jdGlvbihlLG8pe3ZhciB0LGE9Yi5wc2V1ZG9zW2VdfHxiLnNldEZpbHRlcnNbZS50b0xvd2VyQ2FzZSgpXXx8c2UuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIitlKTtyZXR1cm4gYVtrXT9hKG8pOjE8YS5sZW5ndGg/KHQ9W2UsZSwiIixvXSxiLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoZS50b0xvd2VyQ2FzZSgpKT9sZShmdW5jdGlvbihlLHQpe3ZhciBuLHI9YShlLG8pLGk9ci5sZW5ndGg7d2hpbGUoaS0tKWVbbj1QKGUscltpXSldPSEodFtuXT1yW2ldKX0pOmZ1bmN0aW9uKGUpe3JldHVybiBhKGUsMCx0KX0pOmF9fSxwc2V1ZG9zOntub3Q6bGUoZnVuY3Rpb24oZSl7dmFyIHI9W10saT1bXSxzPWYoZS5yZXBsYWNlKEIsIiQxIikpO3JldHVybiBzW2tdP2xlKGZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG89cyhlLG51bGwscixbXSksYT1lLmxlbmd0aDt3aGlsZShhLS0pKGk9b1thXSkmJihlW2FdPSEodFthXT1pKSl9KTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHJbMF09ZSxzKHIsbnVsbCxuLGkpLHJbMF09bnVsbCwhaS5wb3AoKX19KSxoYXM6bGUoZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiAwPHNlKHQsZSkubGVuZ3RofX0pLGNvbnRhaW5zOmxlKGZ1bmN0aW9uKHQpe3JldHVybiB0PXQucmVwbGFjZSh0ZSxuZSksZnVuY3Rpb24oZSl7cmV0dXJuLTE8KGUudGV4dENvbnRlbnR8fG8oZSkpLmluZGV4T2YodCl9fSksbGFuZzpsZShmdW5jdGlvbihuKXtyZXR1cm4gVi50ZXN0KG58fCIiKXx8c2UuZXJyb3IoInVuc3VwcG9ydGVkIGxhbmc6ICIrbiksbj1uLnJlcGxhY2UodGUsbmUpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24oZSl7dmFyIHQ7ZG97aWYodD1FP2UubGFuZzplLmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8ZS5nZXRBdHRyaWJ1dGUoImxhbmciKSlyZXR1cm4odD10LnRvTG93ZXJDYXNlKCkpPT09bnx8MD09PXQuaW5kZXhPZihuKyItIil9d2hpbGUoKGU9ZS5wYXJlbnROb2RlKSYmMT09PWUubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihlKXt2YXIgdD1uLmxvY2F0aW9uJiZuLmxvY2F0aW9uLmhhc2g7cmV0dXJuIHQmJnQuc2xpY2UoMSk9PT1lLmlkfSxyb290OmZ1bmN0aW9uKGUpe3JldHVybiBlPT09YX0sZm9jdXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1DLmFjdGl2ZUVsZW1lbnQmJighQy5oYXNGb2N1c3x8Qy5oYXNGb2N1cygpKSYmISEoZS50eXBlfHxlLmhyZWZ8fH5lLnRhYkluZGV4KX0sZW5hYmxlZDpnZSghMSksZGlzYWJsZWQ6Z2UoITApLGNoZWNrZWQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT10JiYhIWUuY2hlY2tlZHx8Im9wdGlvbiI9PT10JiYhIWUuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGUpe3JldHVybiBlLnBhcmVudE5vZGUmJmUucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LCEwPT09ZS5zZWxlY3RlZH0sZW1wdHk6ZnVuY3Rpb24oZSl7Zm9yKGU9ZS5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWlmKGUubm9kZVR5cGU8NilyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGUpe3JldHVybiFiLnBzZXVkb3MuZW1wdHkoZSl9LGhlYWRlcjpmdW5jdGlvbihlKXtyZXR1cm4gSi50ZXN0KGUubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihlKXtyZXR1cm4gUS50ZXN0KGUubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybiJpbnB1dCI9PT10JiYiYnV0dG9uIj09PWUudHlwZXx8ImJ1dHRvbiI9PT10fSx0ZXh0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiJpbnB1dCI9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJiJ0ZXh0Ij09PWUudHlwZSYmKG51bGw9PSh0PWUuZ2V0QXR0cmlidXRlKCJ0eXBlIikpfHwidGV4dCI9PT10LnRvTG93ZXJDYXNlKCkpfSxmaXJzdDp2ZShmdW5jdGlvbigpe3JldHVyblswXX0pLGxhc3Q6dmUoZnVuY3Rpb24oZSx0KXtyZXR1cm5bdC0xXX0pLGVxOnZlKGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm5bbjwwP24rdDpuXX0pLGV2ZW46dmUoZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MDtuPHQ7bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxvZGQ6dmUoZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49MTtuPHQ7bis9MillLnB1c2gobik7cmV0dXJuIGV9KSxsdDp2ZShmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPW48MD9uK3Q6dDxuP3Q6bjswPD0tLXI7KWUucHVzaChyKTtyZXR1cm4gZX0pLGd0OnZlKGZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9bjwwP24rdDpuOysrcjx0OyllLnB1c2gocik7cmV0dXJuIGV9KX19KS5wc2V1ZG9zLm50aD1iLnBzZXVkb3MuZXEse3JhZGlvOiEwLGNoZWNrYm94OiEwLGZpbGU6ITAscGFzc3dvcmQ6ITAsaW1hZ2U6ITB9KWIucHNldWRvc1tlXT1kZShlKTtmb3IoZSBpbntzdWJtaXQ6ITAscmVzZXQ6ITB9KWIucHNldWRvc1tlXT1oZShlKTtmdW5jdGlvbiBtZSgpe31mdW5jdGlvbiB4ZShlKXtmb3IodmFyIHQ9MCxuPWUubGVuZ3RoLHI9IiI7dDxuO3QrKylyKz1lW3RdLnZhbHVlO3JldHVybiByfWZ1bmN0aW9uIGJlKHMsZSx0KXt2YXIgdT1lLmRpcixsPWUubmV4dCxjPWx8fHUsZj10JiYicGFyZW50Tm9kZSI9PT1jLHA9cisrO3JldHVybiBlLmZpcnN0P2Z1bmN0aW9uKGUsdCxuKXt3aGlsZShlPWVbdV0paWYoMT09PWUubm9kZVR5cGV8fGYpcmV0dXJuIHMoZSx0LG4pO3JldHVybiExfTpmdW5jdGlvbihlLHQsbil7dmFyIHIsaSxvLGE9W1MscF07aWYobil7d2hpbGUoZT1lW3VdKWlmKCgxPT09ZS5ub2RlVHlwZXx8ZikmJnMoZSx0LG4pKXJldHVybiEwfWVsc2Ugd2hpbGUoZT1lW3VdKWlmKDE9PT1lLm5vZGVUeXBlfHxmKWlmKGk9KG89ZVtrXXx8KGVba109e30pKVtlLnVuaXF1ZUlEXXx8KG9bZS51bmlxdWVJRF09e30pLGwmJmw9PT1lLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpZT1lW3VdfHxlO2Vsc2V7aWYoKHI9aVtjXSkmJnJbMF09PT1TJiZyWzFdPT09cClyZXR1cm4gYVsyXT1yWzJdO2lmKChpW2NdPWEpWzJdPXMoZSx0LG4pKXJldHVybiEwfXJldHVybiExfX1mdW5jdGlvbiB3ZShpKXtyZXR1cm4gMTxpLmxlbmd0aD9mdW5jdGlvbihlLHQsbil7dmFyIHI9aS5sZW5ndGg7d2hpbGUoci0tKWlmKCFpW3JdKGUsdCxuKSlyZXR1cm4hMTtyZXR1cm4hMH06aVswXX1mdW5jdGlvbiBUZShlLHQsbixyLGkpe2Zvcih2YXIgbyxhPVtdLHM9MCx1PWUubGVuZ3RoLGw9bnVsbCE9dDtzPHU7cysrKShvPWVbc10pJiYobiYmIW4obyxyLGkpfHwoYS5wdXNoKG8pLGwmJnQucHVzaChzKSkpO3JldHVybiBhfWZ1bmN0aW9uIENlKGQsaCxnLHYseSxlKXtyZXR1cm4gdiYmIXZba10mJih2PUNlKHYpKSx5JiYheVtrXSYmKHk9Q2UoeSxlKSksbGUoZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHM9W10sdT1bXSxsPXQubGVuZ3RoLGM9ZXx8ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj0wLGk9dC5sZW5ndGg7cjxpO3IrKylzZShlLHRbcl0sbik7cmV0dXJuIG59KGh8fCIqIixuLm5vZGVUeXBlP1tuXTpuLFtdKSxmPSFkfHwhZSYmaD9jOlRlKGMscyxkLG4scikscD1nP3l8fChlP2Q6bHx8dik/W106dDpmO2lmKGcmJmcoZixwLG4sciksdil7aT1UZShwLHUpLHYoaSxbXSxuLHIpLG89aS5sZW5ndGg7d2hpbGUoby0tKShhPWlbb10pJiYocFt1W29dXT0hKGZbdVtvXV09YSkpfWlmKGUpe2lmKHl8fGQpe2lmKHkpe2k9W10sbz1wLmxlbmd0aDt3aGlsZShvLS0pKGE9cFtvXSkmJmkucHVzaChmW29dPWEpO3kobnVsbCxwPVtdLGkscil9bz1wLmxlbmd0aDt3aGlsZShvLS0pKGE9cFtvXSkmJi0xPChpPXk/UChlLGEpOnNbb10pJiYoZVtpXT0hKHRbaV09YSkpfX1lbHNlIHA9VGUocD09PXQ/cC5zcGxpY2UobCxwLmxlbmd0aCk6cCkseT95KG51bGwsdCxwLHIpOkguYXBwbHkodCxwKX0pfWZ1bmN0aW9uIEVlKGUpe2Zvcih2YXIgaSx0LG4scj1lLmxlbmd0aCxvPWIucmVsYXRpdmVbZVswXS50eXBlXSxhPW98fGIucmVsYXRpdmVbIiAiXSxzPW8/MTowLHU9YmUoZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT1pfSxhLCEwKSxsPWJlKGZ1bmN0aW9uKGUpe3JldHVybi0xPFAoaSxlKX0sYSwhMCksYz1bZnVuY3Rpb24oZSx0LG4pe3ZhciByPSFvJiYobnx8dCE9PXcpfHwoKGk9dCkubm9kZVR5cGU/dShlLHQsbik6bChlLHQsbikpO3JldHVybiBpPW51bGwscn1dO3M8cjtzKyspaWYodD1iLnJlbGF0aXZlW2Vbc10udHlwZV0pYz1bYmUod2UoYyksdCldO2Vsc2V7aWYoKHQ9Yi5maWx0ZXJbZVtzXS50eXBlXS5hcHBseShudWxsLGVbc10ubWF0Y2hlcykpW2tdKXtmb3Iobj0rK3M7bjxyO24rKylpZihiLnJlbGF0aXZlW2Vbbl0udHlwZV0pYnJlYWs7cmV0dXJuIENlKDE8cyYmd2UoYyksMTxzJiZ4ZShlLnNsaWNlKDAscy0xKS5jb25jYXQoe3ZhbHVlOiIgIj09PWVbcy0yXS50eXBlPyIqIjoiIn0pKS5yZXBsYWNlKEIsIiQxIiksdCxzPG4mJkVlKGUuc2xpY2UocyxuKSksbjxyJiZFZShlPWUuc2xpY2UobikpLG48ciYmeGUoZSkpfWMucHVzaCh0KX1yZXR1cm4gd2UoYyl9cmV0dXJuIG1lLnByb3RvdHlwZT1iLmZpbHRlcnM9Yi5wc2V1ZG9zLGIuc2V0RmlsdGVycz1uZXcgbWUsaD1zZS50b2tlbml6ZT1mdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxvLGEscyx1LGw9eFtlKyIgIl07aWYobClyZXR1cm4gdD8wOmwuc2xpY2UoMCk7YT1lLHM9W10sdT1iLnByZUZpbHRlcjt3aGlsZShhKXtmb3IobyBpbiBuJiYhKHI9Xy5leGVjKGEpKXx8KHImJihhPWEuc2xpY2UoclswXS5sZW5ndGgpfHxhKSxzLnB1c2goaT1bXSkpLG49ITEsKHI9ei5leGVjKGEpKSYmKG49ci5zaGlmdCgpLGkucHVzaCh7dmFsdWU6bix0eXBlOnJbMF0ucmVwbGFjZShCLCIgIil9KSxhPWEuc2xpY2Uobi5sZW5ndGgpKSxiLmZpbHRlcikhKHI9R1tvXS5leGVjKGEpKXx8dVtvXSYmIShyPXVbb10ocikpfHwobj1yLnNoaWZ0KCksaS5wdXNoKHt2YWx1ZTpuLHR5cGU6byxtYXRjaGVzOnJ9KSxhPWEuc2xpY2Uobi5sZW5ndGgpKTtpZighbilicmVha31yZXR1cm4gdD9hLmxlbmd0aDphP3NlLmVycm9yKGUpOngoZSxzKS5zbGljZSgwKX0sZj1zZS5jb21waWxlPWZ1bmN0aW9uKGUsdCl7dmFyIG4sdix5LG0seCxyLGk9W10sbz1bXSxhPU5bZSsiICJdO2lmKCFhKXt0fHwodD1oKGUpKSxuPXQubGVuZ3RoO3doaWxlKG4tLSkoYT1FZSh0W25dKSlba10/aS5wdXNoKGEpOm8ucHVzaChhKTsoYT1OKGUsKHY9byxtPTA8KHk9aSkubGVuZ3RoLHg9MDx2Lmxlbmd0aCxyPWZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG8sYSxzLHU9MCxsPSIwIixjPWUmJltdLGY9W10scD13LGQ9ZXx8eCYmYi5maW5kLlRBRygiKiIsaSksaD1TKz1udWxsPT1wPzE6TWF0aC5yYW5kb20oKXx8LjEsZz1kLmxlbmd0aDtmb3IoaSYmKHc9dD09PUN8fHR8fGkpO2whPT1nJiZudWxsIT0obz1kW2xdKTtsKyspe2lmKHgmJm8pe2E9MCx0fHxvLm93bmVyRG9jdW1lbnQ9PT1DfHwoVChvKSxuPSFFKTt3aGlsZShzPXZbYSsrXSlpZihzKG8sdHx8QyxuKSl7ci5wdXNoKG8pO2JyZWFrfWkmJihTPWgpfW0mJigobz0hcyYmbykmJnUtLSxlJiZjLnB1c2gobykpfWlmKHUrPWwsbSYmbCE9PXUpe2E9MDt3aGlsZShzPXlbYSsrXSlzKGMsZix0LG4pO2lmKGUpe2lmKDA8dSl3aGlsZShsLS0pY1tsXXx8ZltsXXx8KGZbbF09cS5jYWxsKHIpKTtmPVRlKGYpfUguYXBwbHkocixmKSxpJiYhZSYmMDxmLmxlbmd0aCYmMTx1K3kubGVuZ3RoJiZzZS51bmlxdWVTb3J0KHIpfXJldHVybiBpJiYoUz1oLHc9cCksY30sbT9sZShyKTpyKSkpLnNlbGVjdG9yPWV9cmV0dXJuIGF9LGc9c2Uuc2VsZWN0PWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzLHUsbD0iZnVuY3Rpb24iPT10eXBlb2YgZSYmZSxjPSFyJiZoKGU9bC5zZWxlY3Rvcnx8ZSk7aWYobj1ufHxbXSwxPT09Yy5sZW5ndGgpe2lmKDI8KG89Y1swXT1jWzBdLnNsaWNlKDApKS5sZW5ndGgmJiJJRCI9PT0oYT1vWzBdKS50eXBlJiY5PT09dC5ub2RlVHlwZSYmRSYmYi5yZWxhdGl2ZVtvWzFdLnR5cGVdKXtpZighKHQ9KGIuZmluZC5JRChhLm1hdGNoZXNbMF0ucmVwbGFjZSh0ZSxuZSksdCl8fFtdKVswXSkpcmV0dXJuIG47bCYmKHQ9dC5wYXJlbnROb2RlKSxlPWUuc2xpY2Uoby5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1HLm5lZWRzQ29udGV4dC50ZXN0KGUpPzA6by5sZW5ndGg7d2hpbGUoaS0tKXtpZihhPW9baV0sYi5yZWxhdGl2ZVtzPWEudHlwZV0pYnJlYWs7aWYoKHU9Yi5maW5kW3NdKSYmKHI9dShhLm1hdGNoZXNbMF0ucmVwbGFjZSh0ZSxuZSksZWUudGVzdChvWzBdLnR5cGUpJiZ5ZSh0LnBhcmVudE5vZGUpfHx0KSkpe2lmKG8uc3BsaWNlKGksMSksIShlPXIubGVuZ3RoJiZ4ZShvKSkpcmV0dXJuIEguYXBwbHkobixyKSxuO2JyZWFrfX19cmV0dXJuKGx8fGYoZSxjKSkocix0LCFFLG4sIXR8fGVlLnRlc3QoZSkmJnllKHQucGFyZW50Tm9kZSl8fHQpLG59LGQuc29ydFN0YWJsZT1rLnNwbGl0KCIiKS5zb3J0KEQpLmpvaW4oIiIpPT09ayxkLmRldGVjdER1cGxpY2F0ZXM9ISFsLFQoKSxkLnNvcnREZXRhY2hlZD1jZShmdW5jdGlvbihlKXtyZXR1cm4gMSZlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKEMuY3JlYXRlRWxlbWVudCgiZmllbGRzZXQiKSl9KSxjZShmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9IjxhIGhyZWY9JyMnPjwvYT4iLCIjIj09PWUuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoImhyZWYiKX0pfHxmZSgidHlwZXxocmVmfGhlaWdodHx3aWR0aCIsZnVuY3Rpb24oZSx0LG4pe2lmKCFuKXJldHVybiBlLmdldEF0dHJpYnV0ZSh0LCJ0eXBlIj09PXQudG9Mb3dlckNhc2UoKT8xOjIpfSksZC5hdHRyaWJ1dGVzJiZjZShmdW5jdGlvbihlKXtyZXR1cm4gZS5pbm5lckhUTUw9IjxpbnB1dC8+IixlLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCJ2YWx1ZSIsIiIpLCIiPT09ZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgidmFsdWUiKX0pfHxmZSgidmFsdWUiLGZ1bmN0aW9uKGUsdCxuKXtpZighbiYmImlucHV0Ij09PWUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSlyZXR1cm4gZS5kZWZhdWx0VmFsdWV9KSxjZShmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZS5nZXRBdHRyaWJ1dGUoImRpc2FibGVkIil9KXx8ZmUoUixmdW5jdGlvbihlLHQsbil7dmFyIHI7aWYoIW4pcmV0dXJuITA9PT1lW3RdP3QudG9Mb3dlckNhc2UoKToocj1lLmdldEF0dHJpYnV0ZU5vZGUodCkpJiZyLnNwZWNpZmllZD9yLnZhbHVlOm51bGx9KSxzZX0oQyk7ay5maW5kPWgsay5leHByPWguc2VsZWN0b3JzLGsuZXhwclsiOiJdPWsuZXhwci5wc2V1ZG9zLGsudW5pcXVlU29ydD1rLnVuaXF1ZT1oLnVuaXF1ZVNvcnQsay50ZXh0PWguZ2V0VGV4dCxrLmlzWE1MRG9jPWguaXNYTUwsay5jb250YWlucz1oLmNvbnRhaW5zLGsuZXNjYXBlU2VsZWN0b3I9aC5lc2NhcGU7dmFyIFQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPVtdLGk9dm9pZCAwIT09bjt3aGlsZSgoZT1lW3RdKSYmOSE9PWUubm9kZVR5cGUpaWYoMT09PWUubm9kZVR5cGUpe2lmKGkmJmsoZSkuaXMobikpYnJlYWs7ci5wdXNoKGUpfXJldHVybiByfSxTPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPVtdO2U7ZT1lLm5leHRTaWJsaW5nKTE9PT1lLm5vZGVUeXBlJiZlIT09dCYmbi5wdXNoKGUpO3JldHVybiBufSxOPWsuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQ7ZnVuY3Rpb24gQShlLHQpe3JldHVybiBlLm5vZGVOYW1lJiZlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT10LnRvTG93ZXJDYXNlKCl9dmFyIEQ9L148KFthLXpdW15cL1wwPjpceDIwXHRcclxuXGZdKilbXHgyMFx0XHJcblxmXSpcLz8+KD86PFwvXDE+fCkkL2k7ZnVuY3Rpb24gaihlLG4scil7cmV0dXJuIG0obik/ay5ncmVwKGUsZnVuY3Rpb24oZSx0KXtyZXR1cm4hIW4uY2FsbChlLHQsZSkhPT1yfSk6bi5ub2RlVHlwZT9rLmdyZXAoZSxmdW5jdGlvbihlKXtyZXR1cm4gZT09PW4hPT1yfSk6InN0cmluZyIhPXR5cGVvZiBuP2suZ3JlcChlLGZ1bmN0aW9uKGUpe3JldHVybi0xPGkuY2FsbChuLGUpIT09cn0pOmsuZmlsdGVyKG4sZSxyKX1rLmZpbHRlcj1mdW5jdGlvbihlLHQsbil7dmFyIHI9dFswXTtyZXR1cm4gbiYmKGU9Ijpub3QoIitlKyIpIiksMT09PXQubGVuZ3RoJiYxPT09ci5ub2RlVHlwZT9rLmZpbmQubWF0Y2hlc1NlbGVjdG9yKHIsZSk/W3JdOltdOmsuZmluZC5tYXRjaGVzKGUsay5ncmVwKHQsZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLm5vZGVUeXBlfSkpfSxrLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihlKXt2YXIgdCxuLHI9dGhpcy5sZW5ndGgsaT10aGlzO2lmKCJzdHJpbmciIT10eXBlb2YgZSlyZXR1cm4gdGhpcy5wdXNoU3RhY2soayhlKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodD0wO3Q8cjt0KyspaWYoay5jb250YWlucyhpW3RdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihuPXRoaXMucHVzaFN0YWNrKFtdKSx0PTA7dDxyO3QrKylrLmZpbmQoZSxpW3RdLG4pO3JldHVybiAxPHI/ay51bmlxdWVTb3J0KG4pOm59LGZpbHRlcjpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soaih0aGlzLGV8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soaih0aGlzLGV8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGUpe3JldHVybiEhaih0aGlzLCJzdHJpbmciPT10eXBlb2YgZSYmTi50ZXN0KGUpP2soZSk6ZXx8W10sITEpLmxlbmd0aH19KTt2YXIgcSxMPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKykpJC87KGsuZm4uaW5pdD1mdW5jdGlvbihlLHQsbil7dmFyIHIsaTtpZighZSlyZXR1cm4gdGhpcztpZihuPW58fHEsInN0cmluZyI9PXR5cGVvZiBlKXtpZighKHI9IjwiPT09ZVswXSYmIj4iPT09ZVtlLmxlbmd0aC0xXSYmMzw9ZS5sZW5ndGg/W251bGwsZSxudWxsXTpMLmV4ZWMoZSkpfHwhclsxXSYmdClyZXR1cm4hdHx8dC5qcXVlcnk/KHR8fG4pLmZpbmQoZSk6dGhpcy5jb25zdHJ1Y3Rvcih0KS5maW5kKGUpO2lmKHJbMV0pe2lmKHQ9dCBpbnN0YW5jZW9mIGs/dFswXTp0LGsubWVyZ2UodGhpcyxrLnBhcnNlSFRNTChyWzFdLHQmJnQubm9kZVR5cGU/dC5vd25lckRvY3VtZW50fHx0OkUsITApKSxELnRlc3QoclsxXSkmJmsuaXNQbGFpbk9iamVjdCh0KSlmb3IociBpbiB0KW0odGhpc1tyXSk/dGhpc1tyXSh0W3JdKTp0aGlzLmF0dHIocix0W3JdKTtyZXR1cm4gdGhpc31yZXR1cm4oaT1FLmdldEVsZW1lbnRCeUlkKHJbMl0pKSYmKHRoaXNbMF09aSx0aGlzLmxlbmd0aD0xKSx0aGlzfXJldHVybiBlLm5vZGVUeXBlPyh0aGlzWzBdPWUsdGhpcy5sZW5ndGg9MSx0aGlzKTptKGUpP3ZvaWQgMCE9PW4ucmVhZHk/bi5yZWFkeShlKTplKGspOmsubWFrZUFycmF5KGUsdGhpcyl9KS5wcm90b3R5cGU9ay5mbixxPWsoRSk7dmFyIEg9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sTz17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTtmdW5jdGlvbiBQKGUsdCl7d2hpbGUoKGU9ZVt0XSkmJjEhPT1lLm5vZGVUeXBlKTtyZXR1cm4gZX1rLmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKGUpe3ZhciB0PWsoZSx0aGlzKSxuPXQubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih2YXIgZT0wO2U8bjtlKyspaWYoay5jb250YWlucyh0aGlzLHRbZV0pKXJldHVybiEwfSl9LGNsb3Nlc3Q6ZnVuY3Rpb24oZSx0KXt2YXIgbixyPTAsaT10aGlzLmxlbmd0aCxvPVtdLGE9InN0cmluZyIhPXR5cGVvZiBlJiZrKGUpO2lmKCFOLnRlc3QoZSkpZm9yKDtyPGk7cisrKWZvcihuPXRoaXNbcl07biYmbiE9PXQ7bj1uLnBhcmVudE5vZGUpaWYobi5ub2RlVHlwZTwxMSYmKGE/LTE8YS5pbmRleChuKToxPT09bi5ub2RlVHlwZSYmay5maW5kLm1hdGNoZXNTZWxlY3RvcihuLGUpKSl7by5wdXNoKG4pO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjaygxPG8ubGVuZ3RoP2sudW5pcXVlU29ydChvKTpvKX0saW5kZXg6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/InN0cmluZyI9PXR5cGVvZiBlP2kuY2FsbChrKGUpLHRoaXNbMF0pOmkuY2FsbCh0aGlzLGUuanF1ZXJ5P2VbMF06ZSk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soay51bmlxdWVTb3J0KGsubWVyZ2UodGhpcy5nZXQoKSxrKGUsdCkpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWU/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoZSkpfX0pLGsuZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTtyZXR1cm4gdCYmMTEhPT10Lm5vZGVUeXBlP3Q6bnVsbH0scGFyZW50czpmdW5jdGlvbihlKXtyZXR1cm4gVChlLCJwYXJlbnROb2RlIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFQoZSwicGFyZW50Tm9kZSIsbil9LG5leHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIFAoZSwibmV4dFNpYmxpbmciKX0scHJldjpmdW5jdGlvbihlKXtyZXR1cm4gUChlLCJwcmV2aW91c1NpYmxpbmciKX0sbmV4dEFsbDpmdW5jdGlvbihlKXtyZXR1cm4gVChlLCJuZXh0U2libGluZyIpfSxwcmV2QWxsOmZ1bmN0aW9uKGUpe3JldHVybiBUKGUsInByZXZpb3VzU2libGluZyIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBUKGUsIm5leHRTaWJsaW5nIixuKX0scHJldlVudGlsOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gVChlLCJwcmV2aW91c1NpYmxpbmciLG4pfSxzaWJsaW5nczpmdW5jdGlvbihlKXtyZXR1cm4gUygoZS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxlKX0sY2hpbGRyZW46ZnVuY3Rpb24oZSl7cmV0dXJuIFMoZS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oZSl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBlLmNvbnRlbnREb2N1bWVudD9lLmNvbnRlbnREb2N1bWVudDooQShlLCJ0ZW1wbGF0ZSIpJiYoZT1lLmNvbnRlbnR8fGUpLGsubWVyZ2UoW10sZS5jaGlsZE5vZGVzKSl9fSxmdW5jdGlvbihyLGkpe2suZm5bcl09ZnVuY3Rpb24oZSx0KXt2YXIgbj1rLm1hcCh0aGlzLGksZSk7cmV0dXJuIlVudGlsIiE9PXIuc2xpY2UoLTUpJiYodD1lKSx0JiYic3RyaW5nIj09dHlwZW9mIHQmJihuPWsuZmlsdGVyKHQsbikpLDE8dGhpcy5sZW5ndGgmJihPW3JdfHxrLnVuaXF1ZVNvcnQobiksSC50ZXN0KHIpJiZuLnJldmVyc2UoKSksdGhpcy5wdXNoU3RhY2sobil9fSk7dmFyIFI9L1teXHgyMFx0XHJcblxmXSsvZztmdW5jdGlvbiBNKGUpe3JldHVybiBlfWZ1bmN0aW9uIEkoZSl7dGhyb3cgZX1mdW5jdGlvbiBXKGUsdCxuLHIpe3ZhciBpO3RyeXtlJiZtKGk9ZS5wcm9taXNlKT9pLmNhbGwoZSkuZG9uZSh0KS5mYWlsKG4pOmUmJm0oaT1lLnRoZW4pP2kuY2FsbChlLHQsbik6dC5hcHBseSh2b2lkIDAsW2VdLnNsaWNlKHIpKX1jYXRjaChlKXtuLmFwcGx5KHZvaWQgMCxbZV0pfX1rLkNhbGxiYWNrcz1mdW5jdGlvbihyKXt2YXIgZSxuO3I9InN0cmluZyI9PXR5cGVvZiByPyhlPXIsbj17fSxrLmVhY2goZS5tYXRjaChSKXx8W10sZnVuY3Rpb24oZSx0KXtuW3RdPSEwfSksbik6ay5leHRlbmQoe30scik7dmFyIGksdCxvLGEscz1bXSx1PVtdLGw9LTEsYz1mdW5jdGlvbigpe2ZvcihhPWF8fHIub25jZSxvPWk9ITA7dS5sZW5ndGg7bD0tMSl7dD11LnNoaWZ0KCk7d2hpbGUoKytsPHMubGVuZ3RoKSExPT09c1tsXS5hcHBseSh0WzBdLHRbMV0pJiZyLnN0b3BPbkZhbHNlJiYobD1zLmxlbmd0aCx0PSExKX1yLm1lbW9yeXx8KHQ9ITEpLGk9ITEsYSYmKHM9dD9bXToiIil9LGY9e2FkZDpmdW5jdGlvbigpe3JldHVybiBzJiYodCYmIWkmJihsPXMubGVuZ3RoLTEsdS5wdXNoKHQpKSxmdW5jdGlvbiBuKGUpe2suZWFjaChlLGZ1bmN0aW9uKGUsdCl7bSh0KT9yLnVuaXF1ZSYmZi5oYXModCl8fHMucHVzaCh0KTp0JiZ0Lmxlbmd0aCYmInN0cmluZyIhPT13KHQpJiZuKHQpfSl9KGFyZ3VtZW50cyksdCYmIWkmJmMoKSksdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGsuZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oZSx0KXt2YXIgbjt3aGlsZSgtMTwobj1rLmluQXJyYXkodCxzLG4pKSlzLnNwbGljZShuLDEpLG48PWwmJmwtLX0pLHRoaXN9LGhhczpmdW5jdGlvbihlKXtyZXR1cm4gZT8tMTxrLmluQXJyYXkoZSxzKTowPHMubGVuZ3RofSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBzJiYocz1bXSksdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBhPXU9W10scz10PSIiLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIXN9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gYT11PVtdLHR8fGl8fChzPXQ9IiIpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiEhYX0sZmlyZVdpdGg6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYXx8KHQ9W2UsKHQ9dHx8W10pLnNsaWNlP3Quc2xpY2UoKTp0XSx1LnB1c2godCksaXx8YygpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGYuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFvfX07cmV0dXJuIGZ9LGsuZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihlKXt2YXIgbz1bWyJub3RpZnkiLCJwcm9ncmVzcyIsay5DYWxsYmFja3MoIm1lbW9yeSIpLGsuQ2FsbGJhY2tzKCJtZW1vcnkiKSwyXSxbInJlc29sdmUiLCJkb25lIixrLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxrLkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwwLCJyZXNvbHZlZCJdLFsicmVqZWN0IiwiZmFpbCIsay5DYWxsYmFja3MoIm9uY2UgbWVtb3J5Iiksay5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksMSwicmVqZWN0ZWQiXV0saT0icGVuZGluZyIsYT17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gaX0sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIHMuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSwiY2F0Y2giOmZ1bmN0aW9uKGUpe3JldHVybiBhLnRoZW4obnVsbCxlKX0scGlwZTpmdW5jdGlvbigpe3ZhciBpPWFyZ3VtZW50cztyZXR1cm4gay5EZWZlcnJlZChmdW5jdGlvbihyKXtrLmVhY2gobyxmdW5jdGlvbihlLHQpe3ZhciBuPW0oaVt0WzRdXSkmJmlbdFs0XV07c1t0WzFdXShmdW5jdGlvbigpe3ZhciBlPW4mJm4uYXBwbHkodGhpcyxhcmd1bWVudHMpO2UmJm0oZS5wcm9taXNlKT9lLnByb21pc2UoKS5wcm9ncmVzcyhyLm5vdGlmeSkuZG9uZShyLnJlc29sdmUpLmZhaWwoci5yZWplY3QpOnJbdFswXSsiV2l0aCJdKHRoaXMsbj9bZV06YXJndW1lbnRzKX0pfSksaT1udWxsfSkucHJvbWlzZSgpfSx0aGVuOmZ1bmN0aW9uKHQsbixyKXt2YXIgdT0wO2Z1bmN0aW9uIGwoaSxvLGEscyl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49dGhpcyxyPWFyZ3VtZW50cyxlPWZ1bmN0aW9uKCl7dmFyIGUsdDtpZighKGk8dSkpe2lmKChlPWEuYXBwbHkobixyKSk9PT1vLnByb21pc2UoKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGVuYWJsZSBzZWxmLXJlc29sdXRpb24iKTt0PWUmJigib2JqZWN0Ij09dHlwZW9mIGV8fCJmdW5jdGlvbiI9PXR5cGVvZiBlKSYmZS50aGVuLG0odCk/cz90LmNhbGwoZSxsKHUsbyxNLHMpLGwodSxvLEkscykpOih1KyssdC5jYWxsKGUsbCh1LG8sTSxzKSxsKHUsbyxJLHMpLGwodSxvLE0sby5ub3RpZnlXaXRoKSkpOihhIT09TSYmKG49dm9pZCAwLHI9W2VdKSwoc3x8by5yZXNvbHZlV2l0aCkobixyKSl9fSx0PXM/ZTpmdW5jdGlvbigpe3RyeXtlKCl9Y2F0Y2goZSl7ay5EZWZlcnJlZC5leGNlcHRpb25Ib29rJiZrLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2soZSx0LnN0YWNrVHJhY2UpLHU8PWkrMSYmKGEhPT1JJiYobj12b2lkIDAscj1bZV0pLG8ucmVqZWN0V2l0aChuLHIpKX19O2k/dCgpOihrLkRlZmVycmVkLmdldFN0YWNrSG9vayYmKHQuc3RhY2tUcmFjZT1rLkRlZmVycmVkLmdldFN0YWNrSG9vaygpKSxDLnNldFRpbWVvdXQodCkpfX1yZXR1cm4gay5EZWZlcnJlZChmdW5jdGlvbihlKXtvWzBdWzNdLmFkZChsKDAsZSxtKHIpP3I6TSxlLm5vdGlmeVdpdGgpKSxvWzFdWzNdLmFkZChsKDAsZSxtKHQpP3Q6TSkpLG9bMl1bM10uYWRkKGwoMCxlLG0obik/bjpJKSl9KS5wcm9taXNlKCl9LHByb21pc2U6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGwhPWU/ay5leHRlbmQoZSxhKTphfX0scz17fTtyZXR1cm4gay5lYWNoKG8sZnVuY3Rpb24oZSx0KXt2YXIgbj10WzJdLHI9dFs1XTthW3RbMV1dPW4uYWRkLHImJm4uYWRkKGZ1bmN0aW9uKCl7aT1yfSxvWzMtZV1bMl0uZGlzYWJsZSxvWzMtZV1bM10uZGlzYWJsZSxvWzBdWzJdLmxvY2ssb1swXVszXS5sb2NrKSxuLmFkZCh0WzNdLmZpcmUpLHNbdFswXV09ZnVuY3Rpb24oKXtyZXR1cm4gc1t0WzBdKyJXaXRoIl0odGhpcz09PXM/dm9pZCAwOnRoaXMsYXJndW1lbnRzKSx0aGlzfSxzW3RbMF0rIldpdGgiXT1uLmZpcmVXaXRofSksYS5wcm9taXNlKHMpLGUmJmUuY2FsbChzLHMpLHN9LHdoZW46ZnVuY3Rpb24oZSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aCx0PW4scj1BcnJheSh0KSxpPXMuY2FsbChhcmd1bWVudHMpLG89ay5EZWZlcnJlZCgpLGE9ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3JbdF09dGhpcyxpW3RdPTE8YXJndW1lbnRzLmxlbmd0aD9zLmNhbGwoYXJndW1lbnRzKTplLC0tbnx8by5yZXNvbHZlV2l0aChyLGkpfX07aWYobjw9MSYmKFcoZSxvLmRvbmUoYSh0KSkucmVzb2x2ZSxvLnJlamVjdCwhbiksInBlbmRpbmciPT09by5zdGF0ZSgpfHxtKGlbdF0mJmlbdF0udGhlbikpKXJldHVybiBvLnRoZW4oKTt3aGlsZSh0LS0pVyhpW3RdLGEodCksby5yZWplY3QpO3JldHVybiBvLnByb21pc2UoKX19KTt2YXIgJD0vXihFdmFsfEludGVybmFsfFJhbmdlfFJlZmVyZW5jZXxTeW50YXh8VHlwZXxVUkkpRXJyb3IkLztrLkRlZmVycmVkLmV4Y2VwdGlvbkhvb2s9ZnVuY3Rpb24oZSx0KXtDLmNvbnNvbGUmJkMuY29uc29sZS53YXJuJiZlJiYkLnRlc3QoZS5uYW1lKSYmQy5jb25zb2xlLndhcm4oImpRdWVyeS5EZWZlcnJlZCBleGNlcHRpb246ICIrZS5tZXNzYWdlLGUuc3RhY2ssdCl9LGsucmVhZHlFeGNlcHRpb249ZnVuY3Rpb24oZSl7Qy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhyb3cgZX0pfTt2YXIgRj1rLkRlZmVycmVkKCk7ZnVuY3Rpb24gQigpe0UucmVtb3ZlRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsQiksQy5yZW1vdmVFdmVudExpc3RlbmVyKCJsb2FkIixCKSxrLnJlYWR5KCl9ay5mbi5yZWFkeT1mdW5jdGlvbihlKXtyZXR1cm4gRi50aGVuKGUpWyJjYXRjaCJdKGZ1bmN0aW9uKGUpe2sucmVhZHlFeGNlcHRpb24oZSl9KSx0aGlzfSxrLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxyZWFkeTpmdW5jdGlvbihlKXsoITA9PT1lPy0tay5yZWFkeVdhaXQ6ay5pc1JlYWR5KXx8KGsuaXNSZWFkeT0hMCkhPT1lJiYwPC0tay5yZWFkeVdhaXR8fEYucmVzb2x2ZVdpdGgoRSxba10pfX0pLGsucmVhZHkudGhlbj1GLnRoZW4sImNvbXBsZXRlIj09PUUucmVhZHlTdGF0ZXx8ImxvYWRpbmciIT09RS5yZWFkeVN0YXRlJiYhRS5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGw/Qy5zZXRUaW1lb3V0KGsucmVhZHkpOihFLmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLEIpLEMuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsQikpO3ZhciBfPWZ1bmN0aW9uKGUsdCxuLHIsaSxvLGEpe3ZhciBzPTAsdT1lLmxlbmd0aCxsPW51bGw9PW47aWYoIm9iamVjdCI9PT13KG4pKWZvcihzIGluIGk9ITAsbilfKGUsdCxzLG5bc10sITAsbyxhKTtlbHNlIGlmKHZvaWQgMCE9PXImJihpPSEwLG0ocil8fChhPSEwKSxsJiYoYT8odC5jYWxsKGUsciksdD1udWxsKToobD10LHQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBsLmNhbGwoayhlKSxuKX0pKSx0KSlmb3IoO3M8dTtzKyspdChlW3NdLG4sYT9yOnIuY2FsbChlW3NdLHMsdChlW3NdLG4pKSk7cmV0dXJuIGk/ZTpsP3QuY2FsbChlKTp1P3QoZVswXSxuKTpvfSx6PS9eLW1zLS8sVT0vLShbYS16XSkvZztmdW5jdGlvbiBYKGUsdCl7cmV0dXJuIHQudG9VcHBlckNhc2UoKX1mdW5jdGlvbiBWKGUpe3JldHVybiBlLnJlcGxhY2UoeiwibXMtIikucmVwbGFjZShVLFgpfXZhciBHPWZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5ub2RlVHlwZXx8OT09PWUubm9kZVR5cGV8fCErZS5ub2RlVHlwZX07ZnVuY3Rpb24gWSgpe3RoaXMuZXhwYW5kbz1rLmV4cGFuZG8rWS51aWQrK31ZLnVpZD0xLFkucHJvdG90eXBlPXtjYWNoZTpmdW5jdGlvbihlKXt2YXIgdD1lW3RoaXMuZXhwYW5kb107cmV0dXJuIHR8fCh0PXt9LEcoZSkmJihlLm5vZGVUeXBlP2VbdGhpcy5leHBhbmRvXT10Ok9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHRoaXMuZXhwYW5kbyx7dmFsdWU6dCxjb25maWd1cmFibGU6ITB9KSkpLHR9LHNldDpmdW5jdGlvbihlLHQsbil7dmFyIHIsaT10aGlzLmNhY2hlKGUpO2lmKCJzdHJpbmciPT10eXBlb2YgdClpW1YodCldPW47ZWxzZSBmb3IociBpbiB0KWlbVihyKV09dFtyXTtyZXR1cm4gaX0sZ2V0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHZvaWQgMD09PXQ/dGhpcy5jYWNoZShlKTplW3RoaXMuZXhwYW5kb10mJmVbdGhpcy5leHBhbmRvXVtWKHQpXX0sYWNjZXNzOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdm9pZCAwPT09dHx8dCYmInN0cmluZyI9PXR5cGVvZiB0JiZ2b2lkIDA9PT1uP3RoaXMuZ2V0KGUsdCk6KHRoaXMuc2V0KGUsdCxuKSx2b2lkIDAhPT1uP246dCl9LHJlbW92ZTpmdW5jdGlvbihlLHQpe3ZhciBuLHI9ZVt0aGlzLmV4cGFuZG9dO2lmKHZvaWQgMCE9PXIpe2lmKHZvaWQgMCE9PXQpe249KHQ9QXJyYXkuaXNBcnJheSh0KT90Lm1hcChWKToodD1WKHQpKWluIHI/W3RdOnQubWF0Y2goUil8fFtdKS5sZW5ndGg7d2hpbGUobi0tKWRlbGV0ZSByW3Rbbl1dfSh2b2lkIDA9PT10fHxrLmlzRW1wdHlPYmplY3QocikpJiYoZS5ub2RlVHlwZT9lW3RoaXMuZXhwYW5kb109dm9pZCAwOmRlbGV0ZSBlW3RoaXMuZXhwYW5kb10pfX0saGFzRGF0YTpmdW5jdGlvbihlKXt2YXIgdD1lW3RoaXMuZXhwYW5kb107cmV0dXJuIHZvaWQgMCE9PXQmJiFrLmlzRW1wdHlPYmplY3QodCl9fTt2YXIgUT1uZXcgWSxKPW5ldyBZLEs9L14oPzpce1tcd1xXXSpcfXxcW1tcd1xXXSpcXSkkLyxaPS9bQS1aXS9nO2Z1bmN0aW9uIGVlKGUsdCxuKXt2YXIgcixpO2lmKHZvaWQgMD09PW4mJjE9PT1lLm5vZGVUeXBlKWlmKHI9ImRhdGEtIit0LnJlcGxhY2UoWiwiLSQmIikudG9Mb3dlckNhc2UoKSwic3RyaW5nIj09dHlwZW9mKG49ZS5nZXRBdHRyaWJ1dGUocikpKXt0cnl7bj0idHJ1ZSI9PT0oaT1uKXx8ImZhbHNlIiE9PWkmJigibnVsbCI9PT1pP251bGw6aT09PStpKyIiPytpOksudGVzdChpKT9KU09OLnBhcnNlKGkpOmkpfWNhdGNoKGUpe31KLnNldChlLHQsbil9ZWxzZSBuPXZvaWQgMDtyZXR1cm4gbn1rLmV4dGVuZCh7aGFzRGF0YTpmdW5jdGlvbihlKXtyZXR1cm4gSi5oYXNEYXRhKGUpfHxRLmhhc0RhdGEoZSl9LGRhdGE6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBKLmFjY2VzcyhlLHQsbil9LHJlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtKLnJlbW92ZShlLHQpfSxfZGF0YTpmdW5jdGlvbihlLHQsbil7cmV0dXJuIFEuYWNjZXNzKGUsdCxuKX0sX3JlbW92ZURhdGE6ZnVuY3Rpb24oZSx0KXtRLnJlbW92ZShlLHQpfX0pLGsuZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKG4sZSl7dmFyIHQscixpLG89dGhpc1swXSxhPW8mJm8uYXR0cmlidXRlcztpZih2b2lkIDA9PT1uKXtpZih0aGlzLmxlbmd0aCYmKGk9Si5nZXQobyksMT09PW8ubm9kZVR5cGUmJiFRLmdldChvLCJoYXNEYXRhQXR0cnMiKSkpe3Q9YS5sZW5ndGg7d2hpbGUodC0tKWFbdF0mJjA9PT0ocj1hW3RdLm5hbWUpLmluZGV4T2YoImRhdGEtIikmJihyPVYoci5zbGljZSg1KSksZWUobyxyLGlbcl0pKTtRLnNldChvLCJoYXNEYXRhQXR0cnMiLCEwKX1yZXR1cm4gaX1yZXR1cm4ib2JqZWN0Ij09dHlwZW9mIG4/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Si5zZXQodGhpcyxuKX0pOl8odGhpcyxmdW5jdGlvbihlKXt2YXIgdDtpZihvJiZ2b2lkIDA9PT1lKXJldHVybiB2b2lkIDAhPT0odD1KLmdldChvLG4pKT90OnZvaWQgMCE9PSh0PWVlKG8sbikpP3Q6dm9pZCAwO3RoaXMuZWFjaChmdW5jdGlvbigpe0ouc2V0KHRoaXMsbixlKX0pfSxudWxsLGUsMTxhcmd1bWVudHMubGVuZ3RoLG51bGwsITApfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtKLnJlbW92ZSh0aGlzLGUpfSl9fSksay5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcjtpZihlKXJldHVybiB0PSh0fHwiZngiKSsicXVldWUiLHI9US5nZXQoZSx0KSxuJiYoIXJ8fEFycmF5LmlzQXJyYXkobik/cj1RLmFjY2VzcyhlLHQsay5tYWtlQXJyYXkobikpOnIucHVzaChuKSkscnx8W119LGRlcXVldWU6ZnVuY3Rpb24oZSx0KXt0PXR8fCJmeCI7dmFyIG49ay5xdWV1ZShlLHQpLHI9bi5sZW5ndGgsaT1uLnNoaWZ0KCksbz1rLl9xdWV1ZUhvb2tzKGUsdCk7ImlucHJvZ3Jlc3MiPT09aSYmKGk9bi5zaGlmdCgpLHItLSksaSYmKCJmeCI9PT10JiZuLnVuc2hpZnQoImlucHJvZ3Jlc3MiKSxkZWxldGUgby5zdG9wLGkuY2FsbChlLGZ1bmN0aW9uKCl7ay5kZXF1ZXVlKGUsdCl9LG8pKSwhciYmbyYmby5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGUsdCl7dmFyIG49dCsicXVldWVIb29rcyI7cmV0dXJuIFEuZ2V0KGUsbil8fFEuYWNjZXNzKGUsbix7ZW1wdHk6ay5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IikuYWRkKGZ1bmN0aW9uKCl7US5yZW1vdmUoZSxbdCsicXVldWUiLG5dKX0pfSl9fSksay5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKHQsbil7dmFyIGU9MjtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIHQmJihuPXQsdD0iZngiLGUtLSksYXJndW1lbnRzLmxlbmd0aDxlP2sucXVldWUodGhpc1swXSx0KTp2b2lkIDA9PT1uP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9ay5xdWV1ZSh0aGlzLHQsbik7ay5fcXVldWVIb29rcyh0aGlzLHQpLCJmeCI9PT10JiYiaW5wcm9ncmVzcyIhPT1lWzBdJiZrLmRlcXVldWUodGhpcyx0KX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtrLmRlcXVldWUodGhpcyxlKX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnF1ZXVlKGV8fCJmeCIsW10pfSxwcm9taXNlOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0xLGk9ay5EZWZlcnJlZCgpLG89dGhpcyxhPXRoaXMubGVuZ3RoLHM9ZnVuY3Rpb24oKXstLXJ8fGkucmVzb2x2ZVdpdGgobyxbb10pfTsic3RyaW5nIiE9dHlwZW9mIGUmJih0PWUsZT12b2lkIDApLGU9ZXx8ImZ4Ijt3aGlsZShhLS0pKG49US5nZXQob1thXSxlKyJxdWV1ZUhvb2tzIikpJiZuLmVtcHR5JiYocisrLG4uZW1wdHkuYWRkKHMpKTtyZXR1cm4gcygpLGkucHJvbWlzZSh0KX19KTt2YXIgdGU9L1srLV0/KD86XGQqXC58KVxkKyg/OltlRV1bKy1dP1xkK3wpLy5zb3VyY2UsbmU9bmV3IFJlZ0V4cCgiXig/OihbKy1dKT18KSgiK3RlKyIpKFthLXolXSopJCIsImkiKSxyZT1bIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdLGllPUUuZG9jdW1lbnRFbGVtZW50LG9lPWZ1bmN0aW9uKGUpe3JldHVybiBrLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKX0sYWU9e2NvbXBvc2VkOiEwfTtpZS5nZXRSb290Tm9kZSYmKG9lPWZ1bmN0aW9uKGUpe3JldHVybiBrLmNvbnRhaW5zKGUub3duZXJEb2N1bWVudCxlKXx8ZS5nZXRSb290Tm9kZShhZSk9PT1lLm93bmVyRG9jdW1lbnR9KTt2YXIgc2U9ZnVuY3Rpb24oZSx0KXtyZXR1cm4ibm9uZSI9PT0oZT10fHxlKS5zdHlsZS5kaXNwbGF5fHwiIj09PWUuc3R5bGUuZGlzcGxheSYmb2UoZSkmJiJub25lIj09PWsuY3NzKGUsImRpc3BsYXkiKX0sdWU9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhPXt9O2ZvcihvIGluIHQpYVtvXT1lLnN0eWxlW29dLGUuc3R5bGVbb109dFtvXTtmb3IobyBpbiBpPW4uYXBwbHkoZSxyfHxbXSksdCllLnN0eWxlW29dPWFbb107cmV0dXJuIGl9O2Z1bmN0aW9uIGxlKGUsdCxuLHIpe3ZhciBpLG8sYT0yMCxzPXI/ZnVuY3Rpb24oKXtyZXR1cm4gci5jdXIoKX06ZnVuY3Rpb24oKXtyZXR1cm4gay5jc3MoZSx0LCIiKX0sdT1zKCksbD1uJiZuWzNdfHwoay5jc3NOdW1iZXJbdF0/IiI6InB4IiksYz1lLm5vZGVUeXBlJiYoay5jc3NOdW1iZXJbdF18fCJweCIhPT1sJiYrdSkmJm5lLmV4ZWMoay5jc3MoZSx0KSk7aWYoYyYmY1szXSE9PWwpe3UvPTIsbD1sfHxjWzNdLGM9K3V8fDE7d2hpbGUoYS0tKWsuc3R5bGUoZSx0LGMrbCksKDEtbykqKDEtKG89cygpL3V8fC41KSk8PTAmJihhPTApLGMvPW87Yyo9MixrLnN0eWxlKGUsdCxjK2wpLG49bnx8W119cmV0dXJuIG4mJihjPStjfHwrdXx8MCxpPW5bMV0/YysoblsxXSsxKSpuWzJdOituWzJdLHImJihyLnVuaXQ9bCxyLnN0YXJ0PWMsci5lbmQ9aSkpLGl9dmFyIGNlPXt9O2Z1bmN0aW9uIGZlKGUsdCl7Zm9yKHZhciBuLHIsaSxvLGEscyx1LGw9W10sYz0wLGY9ZS5sZW5ndGg7YzxmO2MrKykocj1lW2NdKS5zdHlsZSYmKG49ci5zdHlsZS5kaXNwbGF5LHQ/KCJub25lIj09PW4mJihsW2NdPVEuZ2V0KHIsImRpc3BsYXkiKXx8bnVsbCxsW2NdfHwoci5zdHlsZS5kaXNwbGF5PSIiKSksIiI9PT1yLnN0eWxlLmRpc3BsYXkmJnNlKHIpJiYobFtjXT0odT1hPW89dm9pZCAwLGE9KGk9cikub3duZXJEb2N1bWVudCxzPWkubm9kZU5hbWUsKHU9Y2Vbc10pfHwobz1hLmJvZHkuYXBwZW5kQ2hpbGQoYS5jcmVhdGVFbGVtZW50KHMpKSx1PWsuY3NzKG8sImRpc3BsYXkiKSxvLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobyksIm5vbmUiPT09dSYmKHU9ImJsb2NrIiksY2Vbc109dSkpKSk6Im5vbmUiIT09biYmKGxbY109Im5vbmUiLFEuc2V0KHIsImRpc3BsYXkiLG4pKSk7Zm9yKGM9MDtjPGY7YysrKW51bGwhPWxbY10mJihlW2NdLnN0eWxlLmRpc3BsYXk9bFtjXSk7cmV0dXJuIGV9ay5mbi5leHRlbmQoe3Nob3c6ZnVuY3Rpb24oKXtyZXR1cm4gZmUodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gZmUodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihlKXtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiBlP2U/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7c2UodGhpcyk/ayh0aGlzKS5zaG93KCk6ayh0aGlzKS5oaWRlKCl9KX19KTt2YXIgcGU9L14oPzpjaGVja2JveHxyYWRpbykkL2ksZGU9LzwoW2Etel1bXlwvXDA+XHgyMFx0XHJcblxmXSopL2ksaGU9L14kfF5tb2R1bGUkfFwvKD86amF2YXxlY21hKXNjcmlwdC9pLGdlPXtvcHRpb246WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXSx0aGVhZDpbMSwiPHRhYmxlPiIsIjwvdGFibGU+Il0sY29sOlsyLCI8dGFibGU+PGNvbGdyb3VwPiIsIjwvY29sZ3JvdXA+PC90YWJsZT4iXSx0cjpbMiwiPHRhYmxlPjx0Ym9keT4iLCI8L3Rib2R5PjwvdGFibGU+Il0sdGQ6WzMsIjx0YWJsZT48dGJvZHk+PHRyPiIsIjwvdHI+PC90Ym9keT48L3RhYmxlPiJdLF9kZWZhdWx0OlswLCIiLCIiXX07ZnVuY3Rpb24gdmUoZSx0KXt2YXIgbjtyZXR1cm4gbj0idW5kZWZpbmVkIiE9dHlwZW9mIGUuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0fHwiKiIpOiJ1bmRlZmluZWQiIT10eXBlb2YgZS5xdWVyeVNlbGVjdG9yQWxsP2UucXVlcnlTZWxlY3RvckFsbCh0fHwiKiIpOltdLHZvaWQgMD09PXR8fHQmJkEoZSx0KT9rLm1lcmdlKFtlXSxuKTpufWZ1bmN0aW9uIHllKGUsdCl7Zm9yKHZhciBuPTAscj1lLmxlbmd0aDtuPHI7bisrKVEuc2V0KGVbbl0sImdsb2JhbEV2YWwiLCF0fHxRLmdldCh0W25dLCJnbG9iYWxFdmFsIikpfWdlLm9wdGdyb3VwPWdlLm9wdGlvbixnZS50Ym9keT1nZS50Zm9vdD1nZS5jb2xncm91cD1nZS5jYXB0aW9uPWdlLnRoZWFkLGdlLnRoPWdlLnRkO3ZhciBtZSx4ZSxiZT0vPHwmIz9cdys7LztmdW5jdGlvbiB3ZShlLHQsbixyLGkpe2Zvcih2YXIgbyxhLHMsdSxsLGMsZj10LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxwPVtdLGQ9MCxoPWUubGVuZ3RoO2Q8aDtkKyspaWYoKG89ZVtkXSl8fDA9PT1vKWlmKCJvYmplY3QiPT09dyhvKSlrLm1lcmdlKHAsby5ub2RlVHlwZT9bb106byk7ZWxzZSBpZihiZS50ZXN0KG8pKXthPWF8fGYuYXBwZW5kQ2hpbGQodC5jcmVhdGVFbGVtZW50KCJkaXYiKSkscz0oZGUuZXhlYyhvKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKSx1PWdlW3NdfHxnZS5fZGVmYXVsdCxhLmlubmVySFRNTD11WzFdK2suaHRtbFByZWZpbHRlcihvKSt1WzJdLGM9dVswXTt3aGlsZShjLS0pYT1hLmxhc3RDaGlsZDtrLm1lcmdlKHAsYS5jaGlsZE5vZGVzKSwoYT1mLmZpcnN0Q2hpbGQpLnRleHRDb250ZW50PSIifWVsc2UgcC5wdXNoKHQuY3JlYXRlVGV4dE5vZGUobykpO2YudGV4dENvbnRlbnQ9IiIsZD0wO3doaWxlKG89cFtkKytdKWlmKHImJi0xPGsuaW5BcnJheShvLHIpKWkmJmkucHVzaChvKTtlbHNlIGlmKGw9b2UobyksYT12ZShmLmFwcGVuZENoaWxkKG8pLCJzY3JpcHQiKSxsJiZ5ZShhKSxuKXtjPTA7d2hpbGUobz1hW2MrK10paGUudGVzdChvLnR5cGV8fCIiKSYmbi5wdXNoKG8pfXJldHVybiBmfW1lPUUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLmFwcGVuZENoaWxkKEUuY3JlYXRlRWxlbWVudCgiZGl2IikpLCh4ZT1FLmNyZWF0ZUVsZW1lbnQoImlucHV0IikpLnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIikseGUuc2V0QXR0cmlidXRlKCJjaGVja2VkIiwiY2hlY2tlZCIpLHhlLnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKSxtZS5hcHBlbmRDaGlsZCh4ZSkseS5jaGVja0Nsb25lPW1lLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxtZS5pbm5lckhUTUw9Ijx0ZXh0YXJlYT54PC90ZXh0YXJlYT4iLHkubm9DbG9uZUNoZWNrZWQ9ISFtZS5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWU7dmFyIFRlPS9ea2V5LyxDZT0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnV8ZHJhZ3xkcm9wKXxjbGljay8sRWU9L14oW14uXSopKD86XC4oLispfCkvO2Z1bmN0aW9uIGtlKCl7cmV0dXJuITB9ZnVuY3Rpb24gU2UoKXtyZXR1cm4hMX1mdW5jdGlvbiBOZShlLHQpe3JldHVybiBlPT09ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIEUuYWN0aXZlRWxlbWVudH1jYXRjaChlKXt9fSgpPT0oImZvY3VzIj09PXQpfWZ1bmN0aW9uIEFlKGUsdCxuLHIsaSxvKXt2YXIgYSxzO2lmKCJvYmplY3QiPT10eXBlb2YgdCl7Zm9yKHMgaW4ic3RyaW5nIiE9dHlwZW9mIG4mJihyPXJ8fG4sbj12b2lkIDApLHQpQWUoZSxzLG4scix0W3NdLG8pO3JldHVybiBlfWlmKG51bGw9PXImJm51bGw9PWk/KGk9bixyPW49dm9pZCAwKTpudWxsPT1pJiYoInN0cmluZyI9PXR5cGVvZiBuPyhpPXIscj12b2lkIDApOihpPXIscj1uLG49dm9pZCAwKSksITE9PT1pKWk9U2U7ZWxzZSBpZighaSlyZXR1cm4gZTtyZXR1cm4gMT09PW8mJihhPWksKGk9ZnVuY3Rpb24oZSl7cmV0dXJuIGsoKS5vZmYoZSksYS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KS5ndWlkPWEuZ3VpZHx8KGEuZ3VpZD1rLmd1aWQrKykpLGUuZWFjaChmdW5jdGlvbigpe2suZXZlbnQuYWRkKHRoaXMsdCxpLHIsbil9KX1mdW5jdGlvbiBEZShlLGksbyl7bz8oUS5zZXQoZSxpLCExKSxrLmV2ZW50LmFkZChlLGkse25hbWVzcGFjZTohMSxoYW5kbGVyOmZ1bmN0aW9uKGUpe3ZhciB0LG4scj1RLmdldCh0aGlzLGkpO2lmKDEmZS5pc1RyaWdnZXImJnRoaXNbaV0pe2lmKHIubGVuZ3RoKShrLmV2ZW50LnNwZWNpYWxbaV18fHt9KS5kZWxlZ2F0ZVR5cGUmJmUuc3RvcFByb3BhZ2F0aW9uKCk7ZWxzZSBpZihyPXMuY2FsbChhcmd1bWVudHMpLFEuc2V0KHRoaXMsaSxyKSx0PW8odGhpcyxpKSx0aGlzW2ldKCksciE9PShuPVEuZ2V0KHRoaXMsaSkpfHx0P1Euc2V0KHRoaXMsaSwhMSk6bj17fSxyIT09bilyZXR1cm4gZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxlLnByZXZlbnREZWZhdWx0KCksbi52YWx1ZX1lbHNlIHIubGVuZ3RoJiYoUS5zZXQodGhpcyxpLHt2YWx1ZTprLmV2ZW50LnRyaWdnZXIoay5leHRlbmQoclswXSxrLkV2ZW50LnByb3RvdHlwZSksci5zbGljZSgxKSx0aGlzKX0pLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkpfX0pKTp2b2lkIDA9PT1RLmdldChlLGkpJiZrLmV2ZW50LmFkZChlLGksa2UpfWsuZXZlbnQ9e2dsb2JhbDp7fSxhZGQ6ZnVuY3Rpb24odCxlLG4scixpKXt2YXIgbyxhLHMsdSxsLGMsZixwLGQsaCxnLHY9US5nZXQodCk7aWYodil7bi5oYW5kbGVyJiYobj0obz1uKS5oYW5kbGVyLGk9by5zZWxlY3RvciksaSYmay5maW5kLm1hdGNoZXNTZWxlY3RvcihpZSxpKSxuLmd1aWR8fChuLmd1aWQ9ay5ndWlkKyspLCh1PXYuZXZlbnRzKXx8KHU9di5ldmVudHM9e30pLChhPXYuaGFuZGxlKXx8KGE9di5oYW5kbGU9ZnVuY3Rpb24oZSl7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBrJiZrLmV2ZW50LnRyaWdnZXJlZCE9PWUudHlwZT9rLmV2ZW50LmRpc3BhdGNoLmFwcGx5KHQsYXJndW1lbnRzKTp2b2lkIDB9KSxsPShlPShlfHwiIikubWF0Y2goUil8fFsiIl0pLmxlbmd0aDt3aGlsZShsLS0pZD1nPShzPUVlLmV4ZWMoZVtsXSl8fFtdKVsxXSxoPShzWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksZCYmKGY9ay5ldmVudC5zcGVjaWFsW2RdfHx7fSxkPShpP2YuZGVsZWdhdGVUeXBlOmYuYmluZFR5cGUpfHxkLGY9ay5ldmVudC5zcGVjaWFsW2RdfHx7fSxjPWsuZXh0ZW5kKHt0eXBlOmQsb3JpZ1R5cGU6ZyxkYXRhOnIsaGFuZGxlcjpuLGd1aWQ6bi5ndWlkLHNlbGVjdG9yOmksbmVlZHNDb250ZXh0OmkmJmsuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChpKSxuYW1lc3BhY2U6aC5qb2luKCIuIil9LG8pLChwPXVbZF0pfHwoKHA9dVtkXT1bXSkuZGVsZWdhdGVDb3VudD0wLGYuc2V0dXAmJiExIT09Zi5zZXR1cC5jYWxsKHQscixoLGEpfHx0LmFkZEV2ZW50TGlzdGVuZXImJnQuYWRkRXZlbnRMaXN0ZW5lcihkLGEpKSxmLmFkZCYmKGYuYWRkLmNhbGwodCxjKSxjLmhhbmRsZXIuZ3VpZHx8KGMuaGFuZGxlci5ndWlkPW4uZ3VpZCkpLGk/cC5zcGxpY2UocC5kZWxlZ2F0ZUNvdW50KyssMCxjKTpwLnB1c2goYyksay5ldmVudC5nbG9iYWxbZF09ITApfX0scmVtb3ZlOmZ1bmN0aW9uKGUsdCxuLHIsaSl7dmFyIG8sYSxzLHUsbCxjLGYscCxkLGgsZyx2PVEuaGFzRGF0YShlKSYmUS5nZXQoZSk7aWYodiYmKHU9di5ldmVudHMpKXtsPSh0PSh0fHwiIikubWF0Y2goUil8fFsiIl0pLmxlbmd0aDt3aGlsZShsLS0paWYoZD1nPShzPUVlLmV4ZWModFtsXSl8fFtdKVsxXSxoPShzWzJdfHwiIikuc3BsaXQoIi4iKS5zb3J0KCksZCl7Zj1rLmV2ZW50LnNwZWNpYWxbZF18fHt9LHA9dVtkPShyP2YuZGVsZWdhdGVUeXBlOmYuYmluZFR5cGUpfHxkXXx8W10scz1zWzJdJiZuZXcgUmVnRXhwKCIoXnxcXC4pIitoLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpLGE9bz1wLmxlbmd0aDt3aGlsZShvLS0pYz1wW29dLCFpJiZnIT09Yy5vcmlnVHlwZXx8biYmbi5ndWlkIT09Yy5ndWlkfHxzJiYhcy50ZXN0KGMubmFtZXNwYWNlKXx8ciYmciE9PWMuc2VsZWN0b3ImJigiKioiIT09cnx8IWMuc2VsZWN0b3IpfHwocC5zcGxpY2UobywxKSxjLnNlbGVjdG9yJiZwLmRlbGVnYXRlQ291bnQtLSxmLnJlbW92ZSYmZi5yZW1vdmUuY2FsbChlLGMpKTthJiYhcC5sZW5ndGgmJihmLnRlYXJkb3duJiYhMSE9PWYudGVhcmRvd24uY2FsbChlLGgsdi5oYW5kbGUpfHxrLnJlbW92ZUV2ZW50KGUsZCx2LmhhbmRsZSksZGVsZXRlIHVbZF0pfWVsc2UgZm9yKGQgaW4gdSlrLmV2ZW50LnJlbW92ZShlLGQrdFtsXSxuLHIsITApO2suaXNFbXB0eU9iamVjdCh1KSYmUS5yZW1vdmUoZSwiaGFuZGxlIGV2ZW50cyIpfX0sZGlzcGF0Y2g6ZnVuY3Rpb24oZSl7dmFyIHQsbixyLGksbyxhLHM9ay5ldmVudC5maXgoZSksdT1uZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCksbD0oUS5nZXQodGhpcywiZXZlbnRzIil8fHt9KVtzLnR5cGVdfHxbXSxjPWsuZXZlbnQuc3BlY2lhbFtzLnR5cGVdfHx7fTtmb3IodVswXT1zLHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXVbdF09YXJndW1lbnRzW3RdO2lmKHMuZGVsZWdhdGVUYXJnZXQ9dGhpcywhYy5wcmVEaXNwYXRjaHx8ITEhPT1jLnByZURpc3BhdGNoLmNhbGwodGhpcyxzKSl7YT1rLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxzLGwpLHQ9MDt3aGlsZSgoaT1hW3QrK10pJiYhcy5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXtzLmN1cnJlbnRUYXJnZXQ9aS5lbGVtLG49MDt3aGlsZSgobz1pLmhhbmRsZXJzW24rK10pJiYhcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKXMucm5hbWVzcGFjZSYmITEhPT1vLm5hbWVzcGFjZSYmIXMucm5hbWVzcGFjZS50ZXN0KG8ubmFtZXNwYWNlKXx8KHMuaGFuZGxlT2JqPW8scy5kYXRhPW8uZGF0YSx2b2lkIDAhPT0ocj0oKGsuZXZlbnQuc3BlY2lhbFtvLm9yaWdUeXBlXXx8e30pLmhhbmRsZXx8by5oYW5kbGVyKS5hcHBseShpLmVsZW0sdSkpJiYhMT09PShzLnJlc3VsdD1yKSYmKHMucHJldmVudERlZmF1bHQoKSxzLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGMucG9zdERpc3BhdGNoJiZjLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMscykscy5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihlLHQpe3ZhciBuLHIsaSxvLGEscz1bXSx1PXQuZGVsZWdhdGVDb3VudCxsPWUudGFyZ2V0O2lmKHUmJmwubm9kZVR5cGUmJiEoImNsaWNrIj09PWUudHlwZSYmMTw9ZS5idXR0b24pKWZvcig7bCE9PXRoaXM7bD1sLnBhcmVudE5vZGV8fHRoaXMpaWYoMT09PWwubm9kZVR5cGUmJigiY2xpY2siIT09ZS50eXBlfHwhMCE9PWwuZGlzYWJsZWQpKXtmb3Iobz1bXSxhPXt9LG49MDtuPHU7bisrKXZvaWQgMD09PWFbaT0ocj10W25dKS5zZWxlY3RvcisiICJdJiYoYVtpXT1yLm5lZWRzQ29udGV4dD8tMTxrKGksdGhpcykuaW5kZXgobCk6ay5maW5kKGksdGhpcyxudWxsLFtsXSkubGVuZ3RoKSxhW2ldJiZvLnB1c2gocik7by5sZW5ndGgmJnMucHVzaCh7ZWxlbTpsLGhhbmRsZXJzOm99KX1yZXR1cm4gbD10aGlzLHU8dC5sZW5ndGgmJnMucHVzaCh7ZWxlbTpsLGhhbmRsZXJzOnQuc2xpY2UodSl9KSxzfSxhZGRQcm9wOmZ1bmN0aW9uKHQsZSl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGsuRXZlbnQucHJvdG90eXBlLHQse2VudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLGdldDptKGUpP2Z1bmN0aW9uKCl7aWYodGhpcy5vcmlnaW5hbEV2ZW50KXJldHVybiBlKHRoaXMub3JpZ2luYWxFdmVudCl9OmZ1bmN0aW9uKCl7aWYodGhpcy5vcmlnaW5hbEV2ZW50KXJldHVybiB0aGlzLm9yaWdpbmFsRXZlbnRbdF19LHNldDpmdW5jdGlvbihlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyx0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTplfSl9fSl9LGZpeDpmdW5jdGlvbihlKXtyZXR1cm4gZVtrLmV4cGFuZG9dP2U6bmV3IGsuRXZlbnQoZSl9LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOiEwfSxjbGljazp7c2V0dXA6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpc3x8ZTtyZXR1cm4gcGUudGVzdCh0LnR5cGUpJiZ0LmNsaWNrJiZBKHQsImlucHV0IikmJkRlKHQsImNsaWNrIixrZSksITF9LHRyaWdnZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpc3x8ZTtyZXR1cm4gcGUudGVzdCh0LnR5cGUpJiZ0LmNsaWNrJiZBKHQsImlucHV0IikmJkRlKHQsImNsaWNrIiksITB9LF9kZWZhdWx0OmZ1bmN0aW9uKGUpe3ZhciB0PWUudGFyZ2V0O3JldHVybiBwZS50ZXN0KHQudHlwZSkmJnQuY2xpY2smJkEodCwiaW5wdXQiKSYmUS5nZXQodCwiY2xpY2siKXx8QSh0LCJhIil9fSxiZWZvcmV1bmxvYWQ6e3Bvc3REaXNwYXRjaDpmdW5jdGlvbihlKXt2b2lkIDAhPT1lLnJlc3VsdCYmZS5vcmlnaW5hbEV2ZW50JiYoZS5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlPWUucmVzdWx0KX19fX0say5yZW1vdmVFdmVudD1mdW5jdGlvbihlLHQsbil7ZS5yZW1vdmVFdmVudExpc3RlbmVyJiZlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxuKX0say5FdmVudD1mdW5jdGlvbihlLHQpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGsuRXZlbnQpKXJldHVybiBuZXcgay5FdmVudChlLHQpO2UmJmUudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWUsdGhpcy50eXBlPWUudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1lLmRlZmF1bHRQcmV2ZW50ZWR8fHZvaWQgMD09PWUuZGVmYXVsdFByZXZlbnRlZCYmITE9PT1lLnJldHVyblZhbHVlP2tlOlNlLHRoaXMudGFyZ2V0PWUudGFyZ2V0JiYzPT09ZS50YXJnZXQubm9kZVR5cGU/ZS50YXJnZXQucGFyZW50Tm9kZTplLnRhcmdldCx0aGlzLmN1cnJlbnRUYXJnZXQ9ZS5jdXJyZW50VGFyZ2V0LHRoaXMucmVsYXRlZFRhcmdldD1lLnJlbGF0ZWRUYXJnZXQpOnRoaXMudHlwZT1lLHQmJmsuZXh0ZW5kKHRoaXMsdCksdGhpcy50aW1lU3RhbXA9ZSYmZS50aW1lU3RhbXB8fERhdGUubm93KCksdGhpc1trLmV4cGFuZG9dPSEwfSxrLkV2ZW50LnByb3RvdHlwZT17Y29uc3RydWN0b3I6ay5FdmVudCxpc0RlZmF1bHRQcmV2ZW50ZWQ6U2UsaXNQcm9wYWdhdGlvblN0b3BwZWQ6U2UsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6U2UsaXNTaW11bGF0ZWQ6ITEscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9a2UsZSYmIXRoaXMuaXNTaW11bGF0ZWQmJmUucHJldmVudERlZmF1bHQoKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9a2UsZSYmIXRoaXMuaXNTaW11bGF0ZWQmJmUuc3RvcFByb3BhZ2F0aW9uKCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPWtlLGUmJiF0aGlzLmlzU2ltdWxhdGVkJiZlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuc3RvcFByb3BhZ2F0aW9uKCl9fSxrLmVhY2goe2FsdEtleTohMCxidWJibGVzOiEwLGNhbmNlbGFibGU6ITAsY2hhbmdlZFRvdWNoZXM6ITAsY3RybEtleTohMCxkZXRhaWw6ITAsZXZlbnRQaGFzZTohMCxtZXRhS2V5OiEwLHBhZ2VYOiEwLHBhZ2VZOiEwLHNoaWZ0S2V5OiEwLHZpZXc6ITAsImNoYXIiOiEwLGNvZGU6ITAsY2hhckNvZGU6ITAsa2V5OiEwLGtleUNvZGU6ITAsYnV0dG9uOiEwLGJ1dHRvbnM6ITAsY2xpZW50WDohMCxjbGllbnRZOiEwLG9mZnNldFg6ITAsb2Zmc2V0WTohMCxwb2ludGVySWQ6ITAscG9pbnRlclR5cGU6ITAsc2NyZWVuWDohMCxzY3JlZW5ZOiEwLHRhcmdldFRvdWNoZXM6ITAsdG9FbGVtZW50OiEwLHRvdWNoZXM6ITAsd2hpY2g6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5idXR0b247cmV0dXJuIG51bGw9PWUud2hpY2gmJlRlLnRlc3QoZS50eXBlKT9udWxsIT1lLmNoYXJDb2RlP2UuY2hhckNvZGU6ZS5rZXlDb2RlOiFlLndoaWNoJiZ2b2lkIDAhPT10JiZDZS50ZXN0KGUudHlwZSk/MSZ0PzE6MiZ0PzM6NCZ0PzI6MDplLndoaWNofX0say5ldmVudC5hZGRQcm9wKSxrLmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKGUsdCl7ay5ldmVudC5zcGVjaWFsW2VdPXtzZXR1cDpmdW5jdGlvbigpe3JldHVybiBEZSh0aGlzLGUsTmUpLCExfSx0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIERlKHRoaXMsZSksITB9LGRlbGVnYXRlVHlwZTp0fX0pLGsuZWFjaCh7bW91c2VlbnRlcjoibW91c2VvdmVyIixtb3VzZWxlYXZlOiJtb3VzZW91dCIscG9pbnRlcmVudGVyOiJwb2ludGVyb3ZlciIscG9pbnRlcmxlYXZlOiJwb2ludGVyb3V0In0sZnVuY3Rpb24oZSxpKXtrLmV2ZW50LnNwZWNpYWxbZV09e2RlbGVnYXRlVHlwZTppLGJpbmRUeXBlOmksaGFuZGxlOmZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5yZWxhdGVkVGFyZ2V0LHI9ZS5oYW5kbGVPYmo7cmV0dXJuIG4mJihuPT09dGhpc3x8ay5jb250YWlucyh0aGlzLG4pKXx8KGUudHlwZT1yLm9yaWdUeXBlLHQ9ci5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxlLnR5cGU9aSksdH19fSksay5mbi5leHRlbmQoe29uOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiBBZSh0aGlzLGUsdCxuLHIpfSxvbmU6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIEFlKHRoaXMsZSx0LG4sciwxKX0sb2ZmOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpO2lmKGUmJmUucHJldmVudERlZmF1bHQmJmUuaGFuZGxlT2JqKXJldHVybiByPWUuaGFuZGxlT2JqLGsoZS5kZWxlZ2F0ZVRhcmdldCkub2ZmKHIubmFtZXNwYWNlP3Iub3JpZ1R5cGUrIi4iK3IubmFtZXNwYWNlOnIub3JpZ1R5cGUsci5zZWxlY3RvcixyLmhhbmRsZXIpLHRoaXM7aWYoIm9iamVjdCI9PXR5cGVvZiBlKXtmb3IoaSBpbiBlKXRoaXMub2ZmKGksdCxlW2ldKTtyZXR1cm4gdGhpc31yZXR1cm4hMSE9PXQmJiJmdW5jdGlvbiIhPXR5cGVvZiB0fHwobj10LHQ9dm9pZCAwKSwhMT09PW4mJihuPVNlKSx0aGlzLmVhY2goZnVuY3Rpb24oKXtrLmV2ZW50LnJlbW92ZSh0aGlzLGUsbix0KX0pfX0pO3ZhciBqZT0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbYS16XVteXC9cMD5ceDIwXHRcclxuXGZdKilbXj5dKilcLz4vZ2kscWU9LzxzY3JpcHR8PHN0eWxlfDxsaW5rL2ksTGU9L2NoZWNrZWRccyooPzpbXj1dfD1ccyouY2hlY2tlZC4pL2ksSGU9L15ccyo8ISg/OlxbQ0RBVEFcW3wtLSl8KD86XF1cXXwtLSk+XHMqJC9nO2Z1bmN0aW9uIE9lKGUsdCl7cmV0dXJuIEEoZSwidGFibGUiKSYmQSgxMSE9PXQubm9kZVR5cGU/dDp0LmZpcnN0Q2hpbGQsInRyIikmJmsoZSkuY2hpbGRyZW4oInRib2R5IilbMF18fGV9ZnVuY3Rpb24gUGUoZSl7cmV0dXJuIGUudHlwZT0obnVsbCE9PWUuZ2V0QXR0cmlidXRlKCJ0eXBlIikpKyIvIitlLnR5cGUsZX1mdW5jdGlvbiBSZShlKXtyZXR1cm4idHJ1ZS8iPT09KGUudHlwZXx8IiIpLnNsaWNlKDAsNSk/ZS50eXBlPWUudHlwZS5zbGljZSg1KTplLnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpLGV9ZnVuY3Rpb24gTWUoZSx0KXt2YXIgbixyLGksbyxhLHMsdSxsO2lmKDE9PT10Lm5vZGVUeXBlKXtpZihRLmhhc0RhdGEoZSkmJihvPVEuYWNjZXNzKGUpLGE9US5zZXQodCxvKSxsPW8uZXZlbnRzKSlmb3IoaSBpbiBkZWxldGUgYS5oYW5kbGUsYS5ldmVudHM9e30sbClmb3Iobj0wLHI9bFtpXS5sZW5ndGg7bjxyO24rKylrLmV2ZW50LmFkZCh0LGksbFtpXVtuXSk7Si5oYXNEYXRhKGUpJiYocz1KLmFjY2VzcyhlKSx1PWsuZXh0ZW5kKHt9LHMpLEouc2V0KHQsdSkpfX1mdW5jdGlvbiBJZShuLHIsaSxvKXtyPWcuYXBwbHkoW10scik7dmFyIGUsdCxhLHMsdSxsLGM9MCxmPW4ubGVuZ3RoLHA9Zi0xLGQ9clswXSxoPW0oZCk7aWYoaHx8MTxmJiYic3RyaW5nIj09dHlwZW9mIGQmJiF5LmNoZWNrQ2xvbmUmJkxlLnRlc3QoZCkpcmV0dXJuIG4uZWFjaChmdW5jdGlvbihlKXt2YXIgdD1uLmVxKGUpO2gmJihyWzBdPWQuY2FsbCh0aGlzLGUsdC5odG1sKCkpKSxJZSh0LHIsaSxvKX0pO2lmKGYmJih0PShlPXdlKHIsblswXS5vd25lckRvY3VtZW50LCExLG4sbykpLmZpcnN0Q2hpbGQsMT09PWUuY2hpbGROb2Rlcy5sZW5ndGgmJihlPXQpLHR8fG8pKXtmb3Iocz0oYT1rLm1hcCh2ZShlLCJzY3JpcHQiKSxQZSkpLmxlbmd0aDtjPGY7YysrKXU9ZSxjIT09cCYmKHU9ay5jbG9uZSh1LCEwLCEwKSxzJiZrLm1lcmdlKGEsdmUodSwic2NyaXB0IikpKSxpLmNhbGwobltjXSx1LGMpO2lmKHMpZm9yKGw9YVthLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LGsubWFwKGEsUmUpLGM9MDtjPHM7YysrKXU9YVtjXSxoZS50ZXN0KHUudHlwZXx8IiIpJiYhUS5hY2Nlc3ModSwiZ2xvYmFsRXZhbCIpJiZrLmNvbnRhaW5zKGwsdSkmJih1LnNyYyYmIm1vZHVsZSIhPT0odS50eXBlfHwiIikudG9Mb3dlckNhc2UoKT9rLl9ldmFsVXJsJiYhdS5ub01vZHVsZSYmay5fZXZhbFVybCh1LnNyYyx7bm9uY2U6dS5ub25jZXx8dS5nZXRBdHRyaWJ1dGUoIm5vbmNlIil9KTpiKHUudGV4dENvbnRlbnQucmVwbGFjZShIZSwiIiksdSxsKSl9cmV0dXJuIG59ZnVuY3Rpb24gV2UoZSx0LG4pe2Zvcih2YXIgcixpPXQ/ay5maWx0ZXIodCxlKTplLG89MDtudWxsIT0ocj1pW29dKTtvKyspbnx8MSE9PXIubm9kZVR5cGV8fGsuY2xlYW5EYXRhKHZlKHIpKSxyLnBhcmVudE5vZGUmJihuJiZvZShyKSYmeWUodmUociwic2NyaXB0IikpLHIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChyKSk7cmV0dXJuIGV9ay5leHRlbmQoe2h0bWxQcmVmaWx0ZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShqZSwiPCQxPjwvJDI+Iil9LGNsb25lOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzLHUsbCxjPWUuY2xvbmVOb2RlKCEwKSxmPW9lKGUpO2lmKCEoeS5ub0Nsb25lQ2hlY2tlZHx8MSE9PWUubm9kZVR5cGUmJjExIT09ZS5ub2RlVHlwZXx8ay5pc1hNTERvYyhlKSkpZm9yKGE9dmUoYykscj0wLGk9KG89dmUoZSkpLmxlbmd0aDtyPGk7cisrKXM9b1tyXSx1PWFbcl0sdm9pZCAwLCJpbnB1dCI9PT0obD11Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpJiZwZS50ZXN0KHMudHlwZSk/dS5jaGVja2VkPXMuY2hlY2tlZDoiaW5wdXQiIT09bCYmInRleHRhcmVhIiE9PWx8fCh1LmRlZmF1bHRWYWx1ZT1zLmRlZmF1bHRWYWx1ZSk7aWYodClpZihuKWZvcihvPW98fHZlKGUpLGE9YXx8dmUoYykscj0wLGk9by5sZW5ndGg7cjxpO3IrKylNZShvW3JdLGFbcl0pO2Vsc2UgTWUoZSxjKTtyZXR1cm4gMDwoYT12ZShjLCJzY3JpcHQiKSkubGVuZ3RoJiZ5ZShhLCFmJiZ2ZShlLCJzY3JpcHQiKSksY30sY2xlYW5EYXRhOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuLHIsaT1rLmV2ZW50LnNwZWNpYWwsbz0wO3ZvaWQgMCE9PShuPWVbb10pO28rKylpZihHKG4pKXtpZih0PW5bUS5leHBhbmRvXSl7aWYodC5ldmVudHMpZm9yKHIgaW4gdC5ldmVudHMpaVtyXT9rLmV2ZW50LnJlbW92ZShuLHIpOmsucmVtb3ZlRXZlbnQobixyLHQuaGFuZGxlKTtuW1EuZXhwYW5kb109dm9pZCAwfW5bSi5leHBhbmRvXSYmKG5bSi5leHBhbmRvXT12b2lkIDApfX19KSxrLmZuLmV4dGVuZCh7ZGV0YWNoOmZ1bmN0aW9uKGUpe3JldHVybiBXZSh0aGlzLGUsITApfSxyZW1vdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIFdlKHRoaXMsZSl9LHRleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIF8odGhpcyxmdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZT9rLnRleHQodGhpcyk6dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKXsxIT09dGhpcy5ub2RlVHlwZSYmMTEhPT10aGlzLm5vZGVUeXBlJiY5IT09dGhpcy5ub2RlVHlwZXx8KHRoaXMudGV4dENvbnRlbnQ9ZSl9KX0sbnVsbCxlLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gSWUodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZSl7MSE9PXRoaXMubm9kZVR5cGUmJjExIT09dGhpcy5ub2RlVHlwZSYmOSE9PXRoaXMubm9kZVR5cGV8fE9lKHRoaXMsZSkuYXBwZW5kQ2hpbGQoZSl9KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiBJZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIHQ9T2UodGhpcyxlKTt0Lmluc2VydEJlZm9yZShlLHQuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiBJZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiBJZSh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZSx0aGlzLm5leHRTaWJsaW5nKX0pfSxlbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgZSx0PTA7bnVsbCE9KGU9dGhpc1t0XSk7dCsrKTE9PT1lLm5vZGVUeXBlJiYoay5jbGVhbkRhdGEodmUoZSwhMSkpLGUudGV4dENvbnRlbnQ9IiIpO3JldHVybiB0aGlzfSxjbG9uZTpmdW5jdGlvbihlLHQpe3JldHVybiBlPW51bGwhPWUmJmUsdD1udWxsPT10P2U6dCx0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBrLmNsb25lKHRoaXMsZSx0KX0pfSxodG1sOmZ1bmN0aW9uKGUpe3JldHVybiBfKHRoaXMsZnVuY3Rpb24oZSl7dmFyIHQ9dGhpc1swXXx8e30sbj0wLHI9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09ZSYmMT09PXQubm9kZVR5cGUpcmV0dXJuIHQuaW5uZXJIVE1MO2lmKCJzdHJpbmciPT10eXBlb2YgZSYmIXFlLnRlc3QoZSkmJiFnZVsoZGUuZXhlYyhlKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2U9ay5odG1sUHJlZmlsdGVyKGUpO3RyeXtmb3IoO248cjtuKyspMT09PSh0PXRoaXNbbl18fHt9KS5ub2RlVHlwZSYmKGsuY2xlYW5EYXRhKHZlKHQsITEpKSx0LmlubmVySFRNTD1lKTt0PTB9Y2F0Y2goZSl7fX10JiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGUpfSxudWxsLGUsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIG49W107cmV0dXJuIEllKHRoaXMsYXJndW1lbnRzLGZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucGFyZW50Tm9kZTtrLmluQXJyYXkodGhpcyxuKTwwJiYoay5jbGVhbkRhdGEodmUodGhpcykpLHQmJnQucmVwbGFjZUNoaWxkKGUsdGhpcykpfSxuKX19KSxrLmVhY2goe2FwcGVuZFRvOiJhcHBlbmQiLHByZXBlbmRUbzoicHJlcGVuZCIsaW5zZXJ0QmVmb3JlOiJiZWZvcmUiLGluc2VydEFmdGVyOiJhZnRlciIscmVwbGFjZUFsbDoicmVwbGFjZVdpdGgifSxmdW5jdGlvbihlLGEpe2suZm5bZV09ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49W10scj1rKGUpLGk9ci5sZW5ndGgtMSxvPTA7bzw9aTtvKyspdD1vPT09aT90aGlzOnRoaXMuY2xvbmUoITApLGsocltvXSlbYV0odCksdS5hcHBseShuLHQuZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhuKX19KTt2YXIgJGU9bmV3IFJlZ0V4cCgiXigiK3RlKyIpKD8hcHgpW2EteiVdKyQiLCJpIiksRmU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O3JldHVybiB0JiZ0Lm9wZW5lcnx8KHQ9QyksdC5nZXRDb21wdXRlZFN0eWxlKGUpfSxCZT1uZXcgUmVnRXhwKHJlLmpvaW4oInwiKSwiaSIpO2Z1bmN0aW9uIF9lKGUsdCxuKXt2YXIgcixpLG8sYSxzPWUuc3R5bGU7cmV0dXJuKG49bnx8RmUoZSkpJiYoIiIhPT0oYT1uLmdldFByb3BlcnR5VmFsdWUodCl8fG5bdF0pfHxvZShlKXx8KGE9ay5zdHlsZShlLHQpKSwheS5waXhlbEJveFN0eWxlcygpJiYkZS50ZXN0KGEpJiZCZS50ZXN0KHQpJiYocj1zLndpZHRoLGk9cy5taW5XaWR0aCxvPXMubWF4V2lkdGgscy5taW5XaWR0aD1zLm1heFdpZHRoPXMud2lkdGg9YSxhPW4ud2lkdGgscy53aWR0aD1yLHMubWluV2lkdGg9aSxzLm1heFdpZHRoPW8pKSx2b2lkIDAhPT1hP2ErIiI6YX1mdW5jdGlvbiB6ZShlLHQpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtpZighZSgpKXJldHVybih0aGlzLmdldD10KS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZGVsZXRlIHRoaXMuZ2V0fX19IWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2lmKHUpe3Muc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTExMTFweDt3aWR0aDo2MHB4O21hcmdpbi10b3A6MXB4O3BhZGRpbmc6MDtib3JkZXI6MCIsdS5zdHlsZS5jc3NUZXh0PSJwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO2JveC1zaXppbmc6Ym9yZGVyLWJveDtvdmVyZmxvdzpzY3JvbGw7bWFyZ2luOmF1dG87Ym9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo2MCU7dG9wOjElIixpZS5hcHBlbmRDaGlsZChzKS5hcHBlbmRDaGlsZCh1KTt2YXIgZT1DLmdldENvbXB1dGVkU3R5bGUodSk7bj0iMSUiIT09ZS50b3AsYT0xMj09PXQoZS5tYXJnaW5MZWZ0KSx1LnN0eWxlLnJpZ2h0PSI2MCUiLG89MzY9PT10KGUucmlnaHQpLHI9MzY9PT10KGUud2lkdGgpLHUuc3R5bGUucG9zaXRpb249ImFic29sdXRlIixpPTEyPT09dCh1Lm9mZnNldFdpZHRoLzMpLGllLnJlbW92ZUNoaWxkKHMpLHU9bnVsbH19ZnVuY3Rpb24gdChlKXtyZXR1cm4gTWF0aC5yb3VuZChwYXJzZUZsb2F0KGUpKX12YXIgbixyLGksbyxhLHM9RS5jcmVhdGVFbGVtZW50KCJkaXYiKSx1PUUuY3JlYXRlRWxlbWVudCgiZGl2Iik7dS5zdHlsZSYmKHUuc3R5bGUuYmFja2dyb3VuZENsaXA9ImNvbnRlbnQtYm94Iix1LmNsb25lTm9kZSghMCkuc3R5bGUuYmFja2dyb3VuZENsaXA9IiIseS5jbGVhckNsb25lU3R5bGU9ImNvbnRlbnQtYm94Ij09PXUuc3R5bGUuYmFja2dyb3VuZENsaXAsay5leHRlbmQoeSx7Ym94U2l6aW5nUmVsaWFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLHJ9LHBpeGVsQm94U3R5bGVzOmZ1bmN0aW9uKCl7cmV0dXJuIGUoKSxvfSxwaXhlbFBvc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGUoKSxufSxyZWxpYWJsZU1hcmdpbkxlZnQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLGF9LHNjcm9sbGJveFNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gZSgpLGl9fSkpfSgpO3ZhciBVZT1bIldlYmtpdCIsIk1veiIsIm1zIl0sWGU9RS5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZSxWZT17fTtmdW5jdGlvbiBHZShlKXt2YXIgdD1rLmNzc1Byb3BzW2VdfHxWZVtlXTtyZXR1cm4gdHx8KGUgaW4gWGU/ZTpWZVtlXT1mdW5jdGlvbihlKXt2YXIgdD1lWzBdLnRvVXBwZXJDYXNlKCkrZS5zbGljZSgxKSxuPVVlLmxlbmd0aDt3aGlsZShuLS0paWYoKGU9VWVbbl0rdClpbiBYZSlyZXR1cm4gZX0oZSl8fGUpfXZhciBZZT0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sUWU9L14tLS8sSmU9e3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdmlzaWJpbGl0eToiaGlkZGVuIixkaXNwbGF5OiJibG9jayJ9LEtlPXtsZXR0ZXJTcGFjaW5nOiIwIixmb250V2VpZ2h0OiI0MDAifTtmdW5jdGlvbiBaZShlLHQsbil7dmFyIHI9bmUuZXhlYyh0KTtyZXR1cm4gcj9NYXRoLm1heCgwLHJbMl0tKG58fDApKSsoclszXXx8InB4Iik6dH1mdW5jdGlvbiBldChlLHQsbixyLGksbyl7dmFyIGE9IndpZHRoIj09PXQ/MTowLHM9MCx1PTA7aWYobj09PShyPyJib3JkZXIiOiJjb250ZW50IikpcmV0dXJuIDA7Zm9yKDthPDQ7YSs9MikibWFyZ2luIj09PW4mJih1Kz1rLmNzcyhlLG4rcmVbYV0sITAsaSkpLHI/KCJjb250ZW50Ij09PW4mJih1LT1rLmNzcyhlLCJwYWRkaW5nIityZVthXSwhMCxpKSksIm1hcmdpbiIhPT1uJiYodS09ay5jc3MoZSwiYm9yZGVyIityZVthXSsiV2lkdGgiLCEwLGkpKSk6KHUrPWsuY3NzKGUsInBhZGRpbmciK3JlW2FdLCEwLGkpLCJwYWRkaW5nIiE9PW4/dSs9ay5jc3MoZSwiYm9yZGVyIityZVthXSsiV2lkdGgiLCEwLGkpOnMrPWsuY3NzKGUsImJvcmRlciIrcmVbYV0rIldpZHRoIiwhMCxpKSk7cmV0dXJuIXImJjA8PW8mJih1Kz1NYXRoLm1heCgwLE1hdGguY2VpbChlWyJvZmZzZXQiK3RbMF0udG9VcHBlckNhc2UoKSt0LnNsaWNlKDEpXS1vLXUtcy0uNSkpfHwwKSx1fWZ1bmN0aW9uIHR0KGUsdCxuKXt2YXIgcj1GZShlKSxpPSgheS5ib3hTaXppbmdSZWxpYWJsZSgpfHxuKSYmImJvcmRlci1ib3giPT09ay5jc3MoZSwiYm94U2l6aW5nIiwhMSxyKSxvPWksYT1fZShlLHQscikscz0ib2Zmc2V0Iit0WzBdLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKTtpZigkZS50ZXN0KGEpKXtpZighbilyZXR1cm4gYTthPSJhdXRvIn1yZXR1cm4oIXkuYm94U2l6aW5nUmVsaWFibGUoKSYmaXx8ImF1dG8iPT09YXx8IXBhcnNlRmxvYXQoYSkmJiJpbmxpbmUiPT09ay5jc3MoZSwiZGlzcGxheSIsITEscikpJiZlLmdldENsaWVudFJlY3RzKCkubGVuZ3RoJiYoaT0iYm9yZGVyLWJveCI9PT1rLmNzcyhlLCJib3hTaXppbmciLCExLHIpLChvPXMgaW4gZSkmJihhPWVbc10pKSwoYT1wYXJzZUZsb2F0KGEpfHwwKStldChlLHQsbnx8KGk/ImJvcmRlciI6ImNvbnRlbnQiKSxvLHIsYSkrInB4In1mdW5jdGlvbiBudChlLHQsbixyLGkpe3JldHVybiBuZXcgbnQucHJvdG90eXBlLmluaXQoZSx0LG4scixpKX1rLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihlLHQpe2lmKHQpe3ZhciBuPV9lKGUsIm9wYWNpdHkiKTtyZXR1cm4iIj09PW4/IjEiOm59fX19LGNzc051bWJlcjp7YW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6ITAsY29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGdyaWRBcmVhOiEwLGdyaWRDb2x1bW46ITAsZ3JpZENvbHVtbkVuZDohMCxncmlkQ29sdW1uU3RhcnQ6ITAsZ3JpZFJvdzohMCxncmlkUm93RW5kOiEwLGdyaWRSb3dTdGFydDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOnt9LHN0eWxlOmZ1bmN0aW9uKGUsdCxuLHIpe2lmKGUmJjMhPT1lLm5vZGVUeXBlJiY4IT09ZS5ub2RlVHlwZSYmZS5zdHlsZSl7dmFyIGksbyxhLHM9Vih0KSx1PVFlLnRlc3QodCksbD1lLnN0eWxlO2lmKHV8fCh0PUdlKHMpKSxhPWsuY3NzSG9va3NbdF18fGsuY3NzSG9va3Nbc10sdm9pZCAwPT09bilyZXR1cm4gYSYmImdldCJpbiBhJiZ2b2lkIDAhPT0oaT1hLmdldChlLCExLHIpKT9pOmxbdF07InN0cmluZyI9PT0obz10eXBlb2YgbikmJihpPW5lLmV4ZWMobikpJiZpWzFdJiYobj1sZShlLHQsaSksbz0ibnVtYmVyIiksbnVsbCE9biYmbj09biYmKCJudW1iZXIiIT09b3x8dXx8KG4rPWkmJmlbM118fChrLmNzc051bWJlcltzXT8iIjoicHgiKSkseS5jbGVhckNsb25lU3R5bGV8fCIiIT09bnx8MCE9PXQuaW5kZXhPZigiYmFja2dyb3VuZCIpfHwobFt0XT0iaW5oZXJpdCIpLGEmJiJzZXQiaW4gYSYmdm9pZCAwPT09KG49YS5zZXQoZSxuLHIpKXx8KHU/bC5zZXRQcm9wZXJ0eSh0LG4pOmxbdF09bikpfX0sY3NzOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzPVYodCk7cmV0dXJuIFFlLnRlc3QodCl8fCh0PUdlKHMpKSwoYT1rLmNzc0hvb2tzW3RdfHxrLmNzc0hvb2tzW3NdKSYmImdldCJpbiBhJiYoaT1hLmdldChlLCEwLG4pKSx2b2lkIDA9PT1pJiYoaT1fZShlLHQscikpLCJub3JtYWwiPT09aSYmdCBpbiBLZSYmKGk9S2VbdF0pLCIiPT09bnx8bj8obz1wYXJzZUZsb2F0KGkpLCEwPT09bnx8aXNGaW5pdGUobyk/b3x8MDppKTppfX0pLGsuZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oZSx1KXtrLmNzc0hvb2tzW3VdPXtnZXQ6ZnVuY3Rpb24oZSx0LG4pe2lmKHQpcmV0dXJuIVllLnRlc3Qoay5jc3MoZSwiZGlzcGxheSIpKXx8ZS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCYmZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aD90dChlLHUsbik6dWUoZSxKZSxmdW5jdGlvbigpe3JldHVybiB0dChlLHUsbil9KX0sc2V0OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpPUZlKGUpLG89IXkuc2Nyb2xsYm94U2l6ZSgpJiYiYWJzb2x1dGUiPT09aS5wb3NpdGlvbixhPShvfHxuKSYmImJvcmRlci1ib3giPT09ay5jc3MoZSwiYm94U2l6aW5nIiwhMSxpKSxzPW4/ZXQoZSx1LG4sYSxpKTowO3JldHVybiBhJiZvJiYocy09TWF0aC5jZWlsKGVbIm9mZnNldCIrdVswXS50b1VwcGVyQ2FzZSgpK3Uuc2xpY2UoMSldLXBhcnNlRmxvYXQoaVt1XSktZXQoZSx1LCJib3JkZXIiLCExLGkpLS41KSkscyYmKHI9bmUuZXhlYyh0KSkmJiJweCIhPT0oclszXXx8InB4IikmJihlLnN0eWxlW3VdPXQsdD1rLmNzcyhlLHUpKSxaZSgwLHQscyl9fX0pLGsuY3NzSG9va3MubWFyZ2luTGVmdD16ZSh5LnJlbGlhYmxlTWFyZ2luTGVmdCxmdW5jdGlvbihlLHQpe2lmKHQpcmV0dXJuKHBhcnNlRmxvYXQoX2UoZSwibWFyZ2luTGVmdCIpKXx8ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LXVlKGUse21hcmdpbkxlZnQ6MH0sZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0fSkpKyJweCJ9KSxrLmVhY2goe21hcmdpbjoiIixwYWRkaW5nOiIiLGJvcmRlcjoiV2lkdGgifSxmdW5jdGlvbihpLG8pe2suY3NzSG9va3NbaStvXT17ZXhwYW5kOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLG49e30scj0ic3RyaW5nIj09dHlwZW9mIGU/ZS5zcGxpdCgiICIpOltlXTt0PDQ7dCsrKW5baStyZVt0XStvXT1yW3RdfHxyW3QtMl18fHJbMF07cmV0dXJuIG59fSwibWFyZ2luIiE9PWkmJihrLmNzc0hvb2tzW2krb10uc2V0PVplKX0pLGsuZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gXyh0aGlzLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89e30sYT0wO2lmKEFycmF5LmlzQXJyYXkodCkpe2ZvcihyPUZlKGUpLGk9dC5sZW5ndGg7YTxpO2ErKylvW3RbYV1dPWsuY3NzKGUsdFthXSwhMSxyKTtyZXR1cm4gb31yZXR1cm4gdm9pZCAwIT09bj9rLnN0eWxlKGUsdCxuKTprLmNzcyhlLHQpfSxlLHQsMTxhcmd1bWVudHMubGVuZ3RoKX19KSwoKGsuVHdlZW49bnQpLnByb3RvdHlwZT17Y29uc3RydWN0b3I6bnQsaW5pdDpmdW5jdGlvbihlLHQsbixyLGksbyl7dGhpcy5lbGVtPWUsdGhpcy5wcm9wPW4sdGhpcy5lYXNpbmc9aXx8ay5lYXNpbmcuX2RlZmF1bHQsdGhpcy5vcHRpb25zPXQsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPXIsdGhpcy51bml0PW98fChrLmNzc051bWJlcltuXT8iIjoicHgiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGU9bnQucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGUmJmUuZ2V0P2UuZ2V0KHRoaXMpOm50LnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihlKXt2YXIgdCxuPW50LnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLm9wdGlvbnMuZHVyYXRpb24/dGhpcy5wb3M9dD1rLmVhc2luZ1t0aGlzLmVhc2luZ10oZSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qZSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTp0aGlzLnBvcz10PWUsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKnQrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksbiYmbi5zZXQ/bi5zZXQodGhpcyk6bnQucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0pLmluaXQucHJvdG90eXBlPW50LnByb3RvdHlwZSwobnQucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiAxIT09ZS5lbGVtLm5vZGVUeXBlfHxudWxsIT1lLmVsZW1bZS5wcm9wXSYmbnVsbD09ZS5lbGVtLnN0eWxlW2UucHJvcF0/ZS5lbGVtW2UucHJvcF06KHQ9ay5jc3MoZS5lbGVtLGUucHJvcCwiIikpJiYiYXV0byIhPT10P3Q6MH0sc2V0OmZ1bmN0aW9uKGUpe2suZnguc3RlcFtlLnByb3BdP2suZnguc3RlcFtlLnByb3BdKGUpOjEhPT1lLmVsZW0ubm9kZVR5cGV8fCFrLmNzc0hvb2tzW2UucHJvcF0mJm51bGw9PWUuZWxlbS5zdHlsZVtHZShlLnByb3ApXT9lLmVsZW1bZS5wcm9wXT1lLm5vdzprLnN0eWxlKGUuZWxlbSxlLnByb3AsZS5ub3crZS51bml0KX19fSkuc2Nyb2xsVG9wPW50LnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24oZSl7ZS5lbGVtLm5vZGVUeXBlJiZlLmVsZW0ucGFyZW50Tm9kZSYmKGUuZWxlbVtlLnByb3BdPWUubm93KX19LGsuZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHN3aW5nOmZ1bmN0aW9uKGUpe3JldHVybi41LU1hdGguY29zKGUqTWF0aC5QSSkvMn0sX2RlZmF1bHQ6InN3aW5nIn0say5meD1udC5wcm90b3R5cGUuaW5pdCxrLmZ4LnN0ZXA9e307dmFyIHJ0LGl0LG90LGF0LHN0PS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyx1dD0vcXVldWVIb29rcyQvO2Z1bmN0aW9uIGx0KCl7aXQmJighMT09PUUuaGlkZGVuJiZDLnJlcXVlc3RBbmltYXRpb25GcmFtZT9DLnJlcXVlc3RBbmltYXRpb25GcmFtZShsdCk6Qy5zZXRUaW1lb3V0KGx0LGsuZnguaW50ZXJ2YWwpLGsuZngudGljaygpKX1mdW5jdGlvbiBjdCgpe3JldHVybiBDLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtydD12b2lkIDB9KSxydD1EYXRlLm5vdygpfWZ1bmN0aW9uIGZ0KGUsdCl7dmFyIG4scj0wLGk9e2hlaWdodDplfTtmb3IodD10PzE6MDtyPDQ7cis9Mi10KWlbIm1hcmdpbiIrKG49cmVbcl0pXT1pWyJwYWRkaW5nIituXT1lO3JldHVybiB0JiYoaS5vcGFjaXR5PWkud2lkdGg9ZSksaX1mdW5jdGlvbiBwdChlLHQsbil7Zm9yKHZhciByLGk9KGR0LnR3ZWVuZXJzW3RdfHxbXSkuY29uY2F0KGR0LnR3ZWVuZXJzWyIqIl0pLG89MCxhPWkubGVuZ3RoO288YTtvKyspaWYocj1pW29dLmNhbGwobix0LGUpKXJldHVybiByfWZ1bmN0aW9uIGR0KG8sZSx0KXt2YXIgbixhLHI9MCxpPWR0LnByZWZpbHRlcnMubGVuZ3RoLHM9ay5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSB1LmVsZW19KSx1PWZ1bmN0aW9uKCl7aWYoYSlyZXR1cm4hMTtmb3IodmFyIGU9cnR8fGN0KCksdD1NYXRoLm1heCgwLGwuc3RhcnRUaW1lK2wuZHVyYXRpb24tZSksbj0xLSh0L2wuZHVyYXRpb258fDApLHI9MCxpPWwudHdlZW5zLmxlbmd0aDtyPGk7cisrKWwudHdlZW5zW3JdLnJ1bihuKTtyZXR1cm4gcy5ub3RpZnlXaXRoKG8sW2wsbix0XSksbjwxJiZpP3Q6KGl8fHMubm90aWZ5V2l0aChvLFtsLDEsMF0pLHMucmVzb2x2ZVdpdGgobyxbbF0pLCExKX0sbD1zLnByb21pc2Uoe2VsZW06byxwcm9wczprLmV4dGVuZCh7fSxlKSxvcHRzOmsuZXh0ZW5kKCEwLHtzcGVjaWFsRWFzaW5nOnt9LGVhc2luZzprLmVhc2luZy5fZGVmYXVsdH0sdCksb3JpZ2luYWxQcm9wZXJ0aWVzOmUsb3JpZ2luYWxPcHRpb25zOnQsc3RhcnRUaW1lOnJ0fHxjdCgpLGR1cmF0aW9uOnQuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGUsdCl7dmFyIG49ay5Ud2VlbihvLGwub3B0cyxlLHQsbC5vcHRzLnNwZWNpYWxFYXNpbmdbZV18fGwub3B0cy5lYXNpbmcpO3JldHVybiBsLnR3ZWVucy5wdXNoKG4pLG59LHN0b3A6ZnVuY3Rpb24oZSl7dmFyIHQ9MCxuPWU/bC50d2VlbnMubGVuZ3RoOjA7aWYoYSlyZXR1cm4gdGhpcztmb3IoYT0hMDt0PG47dCsrKWwudHdlZW5zW3RdLnJ1bigxKTtyZXR1cm4gZT8ocy5ub3RpZnlXaXRoKG8sW2wsMSwwXSkscy5yZXNvbHZlV2l0aChvLFtsLGVdKSk6cy5yZWplY3RXaXRoKG8sW2wsZV0pLHRoaXN9fSksYz1sLnByb3BzO2ZvcighZnVuY3Rpb24oZSx0KXt2YXIgbixyLGksbyxhO2ZvcihuIGluIGUpaWYoaT10W3I9VihuKV0sbz1lW25dLEFycmF5LmlzQXJyYXkobykmJihpPW9bMV0sbz1lW25dPW9bMF0pLG4hPT1yJiYoZVtyXT1vLGRlbGV0ZSBlW25dKSwoYT1rLmNzc0hvb2tzW3JdKSYmImV4cGFuZCJpbiBhKWZvcihuIGluIG89YS5leHBhbmQobyksZGVsZXRlIGVbcl0sbyluIGluIGV8fChlW25dPW9bbl0sdFtuXT1pKTtlbHNlIHRbcl09aX0oYyxsLm9wdHMuc3BlY2lhbEVhc2luZyk7cjxpO3IrKylpZihuPWR0LnByZWZpbHRlcnNbcl0uY2FsbChsLG8sYyxsLm9wdHMpKXJldHVybiBtKG4uc3RvcCkmJihrLl9xdWV1ZUhvb2tzKGwuZWxlbSxsLm9wdHMucXVldWUpLnN0b3A9bi5zdG9wLmJpbmQobikpLG47cmV0dXJuIGsubWFwKGMscHQsbCksbShsLm9wdHMuc3RhcnQpJiZsLm9wdHMuc3RhcnQuY2FsbChvLGwpLGwucHJvZ3Jlc3MobC5vcHRzLnByb2dyZXNzKS5kb25lKGwub3B0cy5kb25lLGwub3B0cy5jb21wbGV0ZSkuZmFpbChsLm9wdHMuZmFpbCkuYWx3YXlzKGwub3B0cy5hbHdheXMpLGsuZngudGltZXIoay5leHRlbmQodSx7ZWxlbTpvLGFuaW06bCxxdWV1ZTpsLm9wdHMucXVldWV9KSksbH1rLkFuaW1hdGlvbj1rLmV4dGVuZChkdCx7dHdlZW5lcnM6eyIqIjpbZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLmNyZWF0ZVR3ZWVuKGUsdCk7cmV0dXJuIGxlKG4uZWxlbSxlLG5lLmV4ZWModCksbiksbn1dfSx0d2VlbmVyOmZ1bmN0aW9uKGUsdCl7bShlKT8odD1lLGU9WyIqIl0pOmU9ZS5tYXRjaChSKTtmb3IodmFyIG4scj0wLGk9ZS5sZW5ndGg7cjxpO3IrKyluPWVbcl0sZHQudHdlZW5lcnNbbl09ZHQudHdlZW5lcnNbbl18fFtdLGR0LnR3ZWVuZXJzW25dLnVuc2hpZnQodCl9LHByZWZpbHRlcnM6W2Z1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzLHUsbCxjLGY9IndpZHRoImluIHR8fCJoZWlnaHQiaW4gdCxwPXRoaXMsZD17fSxoPWUuc3R5bGUsZz1lLm5vZGVUeXBlJiZzZShlKSx2PVEuZ2V0KGUsImZ4c2hvdyIpO2ZvcihyIGluIG4ucXVldWV8fChudWxsPT0oYT1rLl9xdWV1ZUhvb2tzKGUsImZ4IikpLnVucXVldWVkJiYoYS51bnF1ZXVlZD0wLHM9YS5lbXB0eS5maXJlLGEuZW1wdHkuZmlyZT1mdW5jdGlvbigpe2EudW5xdWV1ZWR8fHMoKX0pLGEudW5xdWV1ZWQrKyxwLmFsd2F5cyhmdW5jdGlvbigpe3AuYWx3YXlzKGZ1bmN0aW9uKCl7YS51bnF1ZXVlZC0tLGsucXVldWUoZSwiZngiKS5sZW5ndGh8fGEuZW1wdHkuZmlyZSgpfSl9KSksdClpZihpPXRbcl0sc3QudGVzdChpKSl7aWYoZGVsZXRlIHRbcl0sbz1vfHwidG9nZ2xlIj09PWksaT09PShnPyJoaWRlIjoic2hvdyIpKXtpZigic2hvdyIhPT1pfHwhdnx8dm9pZCAwPT09dltyXSljb250aW51ZTtnPSEwfWRbcl09diYmdltyXXx8ay5zdHlsZShlLHIpfWlmKCh1PSFrLmlzRW1wdHlPYmplY3QodCkpfHwhay5pc0VtcHR5T2JqZWN0KGQpKWZvcihyIGluIGYmJjE9PT1lLm5vZGVUeXBlJiYobi5vdmVyZmxvdz1baC5vdmVyZmxvdyxoLm92ZXJmbG93WCxoLm92ZXJmbG93WV0sbnVsbD09KGw9diYmdi5kaXNwbGF5KSYmKGw9US5nZXQoZSwiZGlzcGxheSIpKSwibm9uZSI9PT0oYz1rLmNzcyhlLCJkaXNwbGF5IikpJiYobD9jPWw6KGZlKFtlXSwhMCksbD1lLnN0eWxlLmRpc3BsYXl8fGwsYz1rLmNzcyhlLCJkaXNwbGF5IiksZmUoW2VdKSkpLCgiaW5saW5lIj09PWN8fCJpbmxpbmUtYmxvY2siPT09YyYmbnVsbCE9bCkmJiJub25lIj09PWsuY3NzKGUsImZsb2F0IikmJih1fHwocC5kb25lKGZ1bmN0aW9uKCl7aC5kaXNwbGF5PWx9KSxudWxsPT1sJiYoYz1oLmRpc3BsYXksbD0ibm9uZSI9PT1jPyIiOmMpKSxoLmRpc3BsYXk9ImlubGluZS1ibG9jayIpKSxuLm92ZXJmbG93JiYoaC5vdmVyZmxvdz0iaGlkZGVuIixwLmFsd2F5cyhmdW5jdGlvbigpe2gub3ZlcmZsb3c9bi5vdmVyZmxvd1swXSxoLm92ZXJmbG93WD1uLm92ZXJmbG93WzFdLGgub3ZlcmZsb3dZPW4ub3ZlcmZsb3dbMl19KSksdT0hMSxkKXV8fCh2PyJoaWRkZW4iaW4gdiYmKGc9di5oaWRkZW4pOnY9US5hY2Nlc3MoZSwiZnhzaG93Iix7ZGlzcGxheTpsfSksbyYmKHYuaGlkZGVuPSFnKSxnJiZmZShbZV0sITApLHAuZG9uZShmdW5jdGlvbigpe2ZvcihyIGluIGd8fGZlKFtlXSksUS5yZW1vdmUoZSwiZnhzaG93IiksZClrLnN0eWxlKGUscixkW3JdKX0pKSx1PXB0KGc/dltyXTowLHIscCksciBpbiB2fHwodltyXT11LnN0YXJ0LGcmJih1LmVuZD11LnN0YXJ0LHUuc3RhcnQ9MCkpfV0scHJlZmlsdGVyOmZ1bmN0aW9uKGUsdCl7dD9kdC5wcmVmaWx0ZXJzLnVuc2hpZnQoZSk6ZHQucHJlZmlsdGVycy5wdXNoKGUpfX0pLGsuc3BlZWQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPWUmJiJvYmplY3QiPT10eXBlb2YgZT9rLmV4dGVuZCh7fSxlKTp7Y29tcGxldGU6bnx8IW4mJnR8fG0oZSkmJmUsZHVyYXRpb246ZSxlYXNpbmc6biYmdHx8dCYmIW0odCkmJnR9O3JldHVybiBrLmZ4Lm9mZj9yLmR1cmF0aW9uPTA6Im51bWJlciIhPXR5cGVvZiByLmR1cmF0aW9uJiYoci5kdXJhdGlvbiBpbiBrLmZ4LnNwZWVkcz9yLmR1cmF0aW9uPWsuZnguc3BlZWRzW3IuZHVyYXRpb25dOnIuZHVyYXRpb249ay5meC5zcGVlZHMuX2RlZmF1bHQpLG51bGwhPXIucXVldWUmJiEwIT09ci5xdWV1ZXx8KHIucXVldWU9ImZ4Iiksci5vbGQ9ci5jb21wbGV0ZSxyLmNvbXBsZXRlPWZ1bmN0aW9uKCl7bShyLm9sZCkmJnIub2xkLmNhbGwodGhpcyksci5xdWV1ZSYmay5kZXF1ZXVlKHRoaXMsci5xdWV1ZSl9LHJ9LGsuZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIHRoaXMuZmlsdGVyKHNlKS5jc3MoIm9wYWNpdHkiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OnR9LGUsbixyKX0sYW5pbWF0ZTpmdW5jdGlvbih0LGUsbixyKXt2YXIgaT1rLmlzRW1wdHlPYmplY3QodCksbz1rLnNwZWVkKGUsbixyKSxhPWZ1bmN0aW9uKCl7dmFyIGU9ZHQodGhpcyxrLmV4dGVuZCh7fSx0KSxvKTsoaXx8US5nZXQodGhpcywiZmluaXNoIikpJiZlLnN0b3AoITApfTtyZXR1cm4gYS5maW5pc2g9YSxpfHwhMT09PW8ucXVldWU/dGhpcy5lYWNoKGEpOnRoaXMucXVldWUoby5xdWV1ZSxhKX0sc3RvcDpmdW5jdGlvbihpLGUsbyl7dmFyIGE9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdG9wO2RlbGV0ZSBlLnN0b3AsdChvKX07cmV0dXJuInN0cmluZyIhPXR5cGVvZiBpJiYobz1lLGU9aSxpPXZvaWQgMCksZSYmITEhPT1pJiZ0aGlzLnF1ZXVlKGl8fCJmeCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPSEwLHQ9bnVsbCE9aSYmaSsicXVldWVIb29rcyIsbj1rLnRpbWVycyxyPVEuZ2V0KHRoaXMpO2lmKHQpclt0XSYmclt0XS5zdG9wJiZhKHJbdF0pO2Vsc2UgZm9yKHQgaW4gcilyW3RdJiZyW3RdLnN0b3AmJnV0LnRlc3QodCkmJmEoclt0XSk7Zm9yKHQ9bi5sZW5ndGg7dC0tOyluW3RdLmVsZW0hPT10aGlzfHxudWxsIT1pJiZuW3RdLnF1ZXVlIT09aXx8KG5bdF0uYW5pbS5zdG9wKG8pLGU9ITEsbi5zcGxpY2UodCwxKSk7IWUmJm98fGsuZGVxdWV1ZSh0aGlzLGkpfSl9LGZpbmlzaDpmdW5jdGlvbihhKXtyZXR1cm4hMSE9PWEmJihhPWF8fCJmeCIpLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlLHQ9US5nZXQodGhpcyksbj10W2ErInF1ZXVlIl0scj10W2ErInF1ZXVlSG9va3MiXSxpPWsudGltZXJzLG89bj9uLmxlbmd0aDowO2Zvcih0LmZpbmlzaD0hMCxrLnF1ZXVlKHRoaXMsYSxbXSksciYmci5zdG9wJiZyLnN0b3AuY2FsbCh0aGlzLCEwKSxlPWkubGVuZ3RoO2UtLTspaVtlXS5lbGVtPT09dGhpcyYmaVtlXS5xdWV1ZT09PWEmJihpW2VdLmFuaW0uc3RvcCghMCksaS5zcGxpY2UoZSwxKSk7Zm9yKGU9MDtlPG87ZSsrKW5bZV0mJm5bZV0uZmluaXNoJiZuW2VdLmZpbmlzaC5jYWxsKHRoaXMpO2RlbGV0ZSB0LmZpbmlzaH0pfX0pLGsuZWFjaChbInRvZ2dsZSIsInNob3ciLCJoaWRlIl0sZnVuY3Rpb24oZSxyKXt2YXIgaT1rLmZuW3JdO2suZm5bcl09ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBudWxsPT1lfHwiYm9vbGVhbiI9PXR5cGVvZiBlP2kuYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShmdChyLCEwKSxlLHQsbil9fSksay5lYWNoKHtzbGlkZURvd246ZnQoInNob3ciKSxzbGlkZVVwOmZ0KCJoaWRlIiksc2xpZGVUb2dnbGU6ZnQoInRvZ2dsZSIpLGZhZGVJbjp7b3BhY2l0eToic2hvdyJ9LGZhZGVPdXQ6e29wYWNpdHk6ImhpZGUifSxmYWRlVG9nZ2xlOntvcGFjaXR5OiJ0b2dnbGUifX0sZnVuY3Rpb24oZSxyKXtrLmZuW2VdPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdGhpcy5hbmltYXRlKHIsZSx0LG4pfX0pLGsudGltZXJzPVtdLGsuZngudGljaz1mdW5jdGlvbigpe3ZhciBlLHQ9MCxuPWsudGltZXJzO2ZvcihydD1EYXRlLm5vdygpO3Q8bi5sZW5ndGg7dCsrKShlPW5bdF0pKCl8fG5bdF0hPT1lfHxuLnNwbGljZSh0LS0sMSk7bi5sZW5ndGh8fGsuZnguc3RvcCgpLHJ0PXZvaWQgMH0say5meC50aW1lcj1mdW5jdGlvbihlKXtrLnRpbWVycy5wdXNoKGUpLGsuZnguc3RhcnQoKX0say5meC5pbnRlcnZhbD0xMyxrLmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7aXR8fChpdD0hMCxsdCgpKX0say5meC5zdG9wPWZ1bmN0aW9uKCl7aXQ9bnVsbH0say5meC5zcGVlZHM9e3Nsb3c6NjAwLGZhc3Q6MjAwLF9kZWZhdWx0OjQwMH0say5mbi5kZWxheT1mdW5jdGlvbihyLGUpe3JldHVybiByPWsuZngmJmsuZnguc3BlZWRzW3JdfHxyLGU9ZXx8ImZ4Iix0aGlzLnF1ZXVlKGUsZnVuY3Rpb24oZSx0KXt2YXIgbj1DLnNldFRpbWVvdXQoZSxyKTt0LnN0b3A9ZnVuY3Rpb24oKXtDLmNsZWFyVGltZW91dChuKX19KX0sb3Q9RS5jcmVhdGVFbGVtZW50KCJpbnB1dCIpLGF0PUUuY3JlYXRlRWxlbWVudCgic2VsZWN0IikuYXBwZW5kQ2hpbGQoRS5jcmVhdGVFbGVtZW50KCJvcHRpb24iKSksb3QudHlwZT0iY2hlY2tib3giLHkuY2hlY2tPbj0iIiE9PW90LnZhbHVlLHkub3B0U2VsZWN0ZWQ9YXQuc2VsZWN0ZWQsKG90PUUuY3JlYXRlRWxlbWVudCgiaW5wdXQiKSkudmFsdWU9InQiLG90LnR5cGU9InJhZGlvIix5LnJhZGlvVmFsdWU9InQiPT09b3QudmFsdWU7dmFyIGh0LGd0PWsuZXhwci5hdHRySGFuZGxlO2suZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIF8odGhpcyxrLmF0dHIsZSx0LDE8YXJndW1lbnRzLmxlbmd0aCl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2sucmVtb3ZlQXR0cih0aGlzLGUpfSl9fSksay5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz1lLm5vZGVUeXBlO2lmKDMhPT1vJiY4IT09byYmMiE9PW8pcmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiBlLmdldEF0dHJpYnV0ZT9rLnByb3AoZSx0LG4pOigxPT09byYmay5pc1hNTERvYyhlKXx8KGk9ay5hdHRySG9va3NbdC50b0xvd2VyQ2FzZSgpXXx8KGsuZXhwci5tYXRjaC5ib29sLnRlc3QodCk/aHQ6dm9pZCAwKSksdm9pZCAwIT09bj9udWxsPT09bj92b2lkIGsucmVtb3ZlQXR0cihlLHQpOmkmJiJzZXQiaW4gaSYmdm9pZCAwIT09KHI9aS5zZXQoZSxuLHQpKT9yOihlLnNldEF0dHJpYnV0ZSh0LG4rIiIpLG4pOmkmJiJnZXQiaW4gaSYmbnVsbCE9PShyPWkuZ2V0KGUsdCkpP3I6bnVsbD09KHI9ay5maW5kLmF0dHIoZSx0KSk/dm9pZCAwOnIpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihlLHQpe2lmKCF5LnJhZGlvVmFsdWUmJiJyYWRpbyI9PT10JiZBKGUsImlucHV0Iikpe3ZhciBuPWUudmFsdWU7cmV0dXJuIGUuc2V0QXR0cmlidXRlKCJ0eXBlIix0KSxuJiYoZS52YWx1ZT1uKSx0fX19fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj0wLGk9dCYmdC5tYXRjaChSKTtpZihpJiYxPT09ZS5ub2RlVHlwZSl3aGlsZShuPWlbcisrXSllLnJlbW92ZUF0dHJpYnV0ZShuKX19KSxodD17c2V0OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4hMT09PXQ/ay5yZW1vdmVBdHRyKGUsbik6ZS5zZXRBdHRyaWJ1dGUobixuKSxufX0say5lYWNoKGsuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXHcrL2cpLGZ1bmN0aW9uKGUsdCl7dmFyIGE9Z3RbdF18fGsuZmluZC5hdHRyO2d0W3RdPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG89dC50b0xvd2VyQ2FzZSgpO3JldHVybiBufHwoaT1ndFtvXSxndFtvXT1yLHI9bnVsbCE9YShlLHQsbik/bzpudWxsLGd0W29dPWkpLHJ9fSk7dmFyIHZ0PS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2kseXQ9L14oPzphfGFyZWEpJC9pO2Z1bmN0aW9uIG10KGUpe3JldHVybihlLm1hdGNoKFIpfHxbXSkuam9pbigiICIpfWZ1bmN0aW9uIHh0KGUpe3JldHVybiBlLmdldEF0dHJpYnV0ZSYmZS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIifWZ1bmN0aW9uIGJ0KGUpe3JldHVybiBBcnJheS5pc0FycmF5KGUpP2U6InN0cmluZyI9PXR5cGVvZiBlJiZlLm1hdGNoKFIpfHxbXX1rLmZuLmV4dGVuZCh7cHJvcDpmdW5jdGlvbihlLHQpe3JldHVybiBfKHRoaXMsay5wcm9wLGUsdCwxPGFyZ3VtZW50cy5sZW5ndGgpfSxyZW1vdmVQcm9wOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtkZWxldGUgdGhpc1trLnByb3BGaXhbZV18fGVdfSl9fSksay5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbz1lLm5vZGVUeXBlO2lmKDMhPT1vJiY4IT09byYmMiE9PW8pcmV0dXJuIDE9PT1vJiZrLmlzWE1MRG9jKGUpfHwodD1rLnByb3BGaXhbdF18fHQsaT1rLnByb3BIb29rc1t0XSksdm9pZCAwIT09bj9pJiYic2V0ImluIGkmJnZvaWQgMCE9PShyPWkuc2V0KGUsbix0KSk/cjplW3RdPW46aSYmImdldCJpbiBpJiZudWxsIT09KHI9aS5nZXQoZSx0KSk/cjplW3RdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ay5maW5kLmF0dHIoZSwidGFiaW5kZXgiKTtyZXR1cm4gdD9wYXJzZUludCh0LDEwKTp2dC50ZXN0KGUubm9kZU5hbWUpfHx5dC50ZXN0KGUubm9kZU5hbWUpJiZlLmhyZWY/MDotMX19fSxwcm9wRml4OnsiZm9yIjoiaHRtbEZvciIsImNsYXNzIjoiY2xhc3NOYW1lIn19KSx5Lm9wdFNlbGVjdGVkfHwoay5wcm9wSG9va3Muc2VsZWN0ZWQ9e2dldDpmdW5jdGlvbihlKXt2YXIgdD1lLnBhcmVudE5vZGU7cmV0dXJuIHQmJnQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsbnVsbH0sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyZW50Tm9kZTt0JiYodC5zZWxlY3RlZEluZGV4LHQucGFyZW50Tm9kZSYmdC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgpfX0pLGsuZWFjaChbInRhYkluZGV4IiwicmVhZE9ubHkiLCJtYXhMZW5ndGgiLCJjZWxsU3BhY2luZyIsImNlbGxQYWRkaW5nIiwicm93U3BhbiIsImNvbFNwYW4iLCJ1c2VNYXAiLCJmcmFtZUJvcmRlciIsImNvbnRlbnRFZGl0YWJsZSJdLGZ1bmN0aW9uKCl7ay5wcm9wRml4W3RoaXMudG9Mb3dlckNhc2UoKV09dGhpc30pLGsuZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbih0KXt2YXIgZSxuLHIsaSxvLGEscyx1PTA7aWYobSh0KSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGUpe2sodGhpcykuYWRkQ2xhc3ModC5jYWxsKHRoaXMsZSx4dCh0aGlzKSkpfSk7aWYoKGU9YnQodCkpLmxlbmd0aCl3aGlsZShuPXRoaXNbdSsrXSlpZihpPXh0KG4pLHI9MT09PW4ubm9kZVR5cGUmJiIgIittdChpKSsiICIpe2E9MDt3aGlsZShvPWVbYSsrXSlyLmluZGV4T2YoIiAiK28rIiAiKTwwJiYocis9bysiICIpO2khPT0ocz1tdChyKSkmJm4uc2V0QXR0cmlidXRlKCJjbGFzcyIscyl9cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKHQpe3ZhciBlLG4scixpLG8sYSxzLHU9MDtpZihtKHQpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oZSl7ayh0aGlzKS5yZW1vdmVDbGFzcyh0LmNhbGwodGhpcyxlLHh0KHRoaXMpKSl9KTtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGhpcy5hdHRyKCJjbGFzcyIsIiIpO2lmKChlPWJ0KHQpKS5sZW5ndGgpd2hpbGUobj10aGlzW3UrK10paWYoaT14dChuKSxyPTE9PT1uLm5vZGVUeXBlJiYiICIrbXQoaSkrIiAiKXthPTA7d2hpbGUobz1lW2ErK10pd2hpbGUoLTE8ci5pbmRleE9mKCIgIitvKyIgIikpcj1yLnJlcGxhY2UoIiAiK28rIiAiLCIgIik7aSE9PShzPW10KHIpKSYmbi5zZXRBdHRyaWJ1dGUoImNsYXNzIixzKX1yZXR1cm4gdGhpc30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oaSx0KXt2YXIgbz10eXBlb2YgaSxhPSJzdHJpbmciPT09b3x8QXJyYXkuaXNBcnJheShpKTtyZXR1cm4iYm9vbGVhbiI9PXR5cGVvZiB0JiZhP3Q/dGhpcy5hZGRDbGFzcyhpKTp0aGlzLnJlbW92ZUNsYXNzKGkpOm0oaSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGUpe2sodGhpcykudG9nZ2xlQ2xhc3MoaS5jYWxsKHRoaXMsZSx4dCh0aGlzKSx0KSx0KX0pOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlLHQsbixyO2lmKGEpe3Q9MCxuPWsodGhpcykscj1idChpKTt3aGlsZShlPXJbdCsrXSluLmhhc0NsYXNzKGUpP24ucmVtb3ZlQ2xhc3MoZSk6bi5hZGRDbGFzcyhlKX1lbHNlIHZvaWQgMCE9PWkmJiJib29sZWFuIiE9PW98fCgoZT14dCh0aGlzKSkmJlEuc2V0KHRoaXMsIl9fY2xhc3NOYW1lX18iLGUpLHRoaXMuc2V0QXR0cmlidXRlJiZ0aGlzLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGV8fCExPT09aT8iIjpRLmdldCh0aGlzLCJfX2NsYXNzTmFtZV9fIil8fCIiKSl9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbixyPTA7dD0iICIrZSsiICI7d2hpbGUobj10aGlzW3IrK10paWYoMT09PW4ubm9kZVR5cGUmJi0xPCgiICIrbXQoeHQobikpKyIgIikuaW5kZXhPZih0KSlyZXR1cm4hMDtyZXR1cm4hMX19KTt2YXIgd3Q9L1xyL2c7ay5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihuKXt2YXIgcixlLGksdD10aGlzWzBdO3JldHVybiBhcmd1bWVudHMubGVuZ3RoPyhpPW0obiksdGhpcy5lYWNoKGZ1bmN0aW9uKGUpe3ZhciB0OzE9PT10aGlzLm5vZGVUeXBlJiYobnVsbD09KHQ9aT9uLmNhbGwodGhpcyxlLGsodGhpcykudmFsKCkpOm4pP3Q9IiI6Im51bWJlciI9PXR5cGVvZiB0P3QrPSIiOkFycmF5LmlzQXJyYXkodCkmJih0PWsubWFwKHQsZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWU/IiI6ZSsiIn0pKSwocj1rLnZhbEhvb2tzW3RoaXMudHlwZV18fGsudmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkmJiJzZXQiaW4gciYmdm9pZCAwIT09ci5zZXQodGhpcyx0LCJ2YWx1ZSIpfHwodGhpcy52YWx1ZT10KSl9KSk6dD8ocj1rLnZhbEhvb2tzW3QudHlwZV18fGsudmFsSG9va3NbdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSkmJiJnZXQiaW4gciYmdm9pZCAwIT09KGU9ci5nZXQodCwidmFsdWUiKSk/ZToic3RyaW5nIj09dHlwZW9mKGU9dC52YWx1ZSk/ZS5yZXBsYWNlKHd0LCIiKTpudWxsPT1lPyIiOmU6dm9pZCAwfX0pLGsuZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ay5maW5kLmF0dHIoZSwidmFsdWUiKTtyZXR1cm4gbnVsbCE9dD90Om10KGsudGV4dChlKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihlKXt2YXIgdCxuLHIsaT1lLm9wdGlvbnMsbz1lLnNlbGVjdGVkSW5kZXgsYT0ic2VsZWN0LW9uZSI9PT1lLnR5cGUscz1hP251bGw6W10sdT1hP28rMTppLmxlbmd0aDtmb3Iocj1vPDA/dTphP286MDtyPHU7cisrKWlmKCgobj1pW3JdKS5zZWxlY3RlZHx8cj09PW8pJiYhbi5kaXNhYmxlZCYmKCFuLnBhcmVudE5vZGUuZGlzYWJsZWR8fCFBKG4ucGFyZW50Tm9kZSwib3B0Z3JvdXAiKSkpe2lmKHQ9ayhuKS52YWwoKSxhKXJldHVybiB0O3MucHVzaCh0KX1yZXR1cm4gc30sc2V0OmZ1bmN0aW9uKGUsdCl7dmFyIG4scixpPWUub3B0aW9ucyxvPWsubWFrZUFycmF5KHQpLGE9aS5sZW5ndGg7d2hpbGUoYS0tKSgocj1pW2FdKS5zZWxlY3RlZD0tMTxrLmluQXJyYXkoay52YWxIb29rcy5vcHRpb24uZ2V0KHIpLG8pKSYmKG49ITApO3JldHVybiBufHwoZS5zZWxlY3RlZEluZGV4PS0xKSxvfX19fSksay5lYWNoKFsicmFkaW8iLCJjaGVja2JveCJdLGZ1bmN0aW9uKCl7ay52YWxIb29rc1t0aGlzXT17c2V0OmZ1bmN0aW9uKGUsdCl7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4gZS5jaGVja2VkPS0xPGsuaW5BcnJheShrKGUpLnZhbCgpLHQpfX0seS5jaGVja09ufHwoay52YWxIb29rc1t0aGlzXS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PT1lLmdldEF0dHJpYnV0ZSgidmFsdWUiKT8ib24iOmUudmFsdWV9KX0pLHkuZm9jdXNpbj0ib25mb2N1c2luImluIEM7dmFyIFR0PS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxDdD1mdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpfTtrLmV4dGVuZChrLmV2ZW50LHt0cmlnZ2VyOmZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBpLG8sYSxzLHUsbCxjLGYscD1bbnx8RV0sZD12LmNhbGwoZSwidHlwZSIpP2UudHlwZTplLGg9di5jYWxsKGUsIm5hbWVzcGFjZSIpP2UubmFtZXNwYWNlLnNwbGl0KCIuIik6W107aWYobz1mPWE9bj1ufHxFLDMhPT1uLm5vZGVUeXBlJiY4IT09bi5ub2RlVHlwZSYmIVR0LnRlc3QoZCtrLmV2ZW50LnRyaWdnZXJlZCkmJigtMTxkLmluZGV4T2YoIi4iKSYmKGQ9KGg9ZC5zcGxpdCgiLiIpKS5zaGlmdCgpLGguc29ydCgpKSx1PWQuaW5kZXhPZigiOiIpPDAmJiJvbiIrZCwoZT1lW2suZXhwYW5kb10/ZTpuZXcgay5FdmVudChkLCJvYmplY3QiPT10eXBlb2YgZSYmZSkpLmlzVHJpZ2dlcj1yPzI6MyxlLm5hbWVzcGFjZT1oLmpvaW4oIi4iKSxlLnJuYW1lc3BhY2U9ZS5uYW1lc3BhY2U/bmV3IFJlZ0V4cCgiKF58XFwuKSIraC5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTpudWxsLGUucmVzdWx0PXZvaWQgMCxlLnRhcmdldHx8KGUudGFyZ2V0PW4pLHQ9bnVsbD09dD9bZV06ay5tYWtlQXJyYXkodCxbZV0pLGM9ay5ldmVudC5zcGVjaWFsW2RdfHx7fSxyfHwhYy50cmlnZ2VyfHwhMSE9PWMudHJpZ2dlci5hcHBseShuLHQpKSl7aWYoIXImJiFjLm5vQnViYmxlJiYheChuKSl7Zm9yKHM9Yy5kZWxlZ2F0ZVR5cGV8fGQsVHQudGVzdChzK2QpfHwobz1vLnBhcmVudE5vZGUpO287bz1vLnBhcmVudE5vZGUpcC5wdXNoKG8pLGE9bzthPT09KG4ub3duZXJEb2N1bWVudHx8RSkmJnAucHVzaChhLmRlZmF1bHRWaWV3fHxhLnBhcmVudFdpbmRvd3x8Qyl9aT0wO3doaWxlKChvPXBbaSsrXSkmJiFlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpZj1vLGUudHlwZT0xPGk/czpjLmJpbmRUeXBlfHxkLChsPShRLmdldChvLCJldmVudHMiKXx8e30pW2UudHlwZV0mJlEuZ2V0KG8sImhhbmRsZSIpKSYmbC5hcHBseShvLHQpLChsPXUmJm9bdV0pJiZsLmFwcGx5JiZHKG8pJiYoZS5yZXN1bHQ9bC5hcHBseShvLHQpLCExPT09ZS5yZXN1bHQmJmUucHJldmVudERlZmF1bHQoKSk7cmV0dXJuIGUudHlwZT1kLHJ8fGUuaXNEZWZhdWx0UHJldmVudGVkKCl8fGMuX2RlZmF1bHQmJiExIT09Yy5fZGVmYXVsdC5hcHBseShwLnBvcCgpLHQpfHwhRyhuKXx8dSYmbShuW2RdKSYmIXgobikmJigoYT1uW3VdKSYmKG5bdV09bnVsbCksay5ldmVudC50cmlnZ2VyZWQ9ZCxlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkmJmYuYWRkRXZlbnRMaXN0ZW5lcihkLEN0KSxuW2RdKCksZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpJiZmLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCxDdCksay5ldmVudC50cmlnZ2VyZWQ9dm9pZCAwLGEmJihuW3VdPWEpKSxlLnJlc3VsdH19LHNpbXVsYXRlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1rLmV4dGVuZChuZXcgay5FdmVudCxuLHt0eXBlOmUsaXNTaW11bGF0ZWQ6ITB9KTtrLmV2ZW50LnRyaWdnZXIocixudWxsLHQpfX0pLGsuZm4uZXh0ZW5kKHt0cmlnZ2VyOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2suZXZlbnQudHJpZ2dlcihlLHQsdGhpcyl9KX0sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzWzBdO2lmKG4pcmV0dXJuIGsuZXZlbnQudHJpZ2dlcihlLHQsbiwhMCl9fSkseS5mb2N1c2lufHxrLmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKG4scil7dmFyIGk9ZnVuY3Rpb24oZSl7ay5ldmVudC5zaW11bGF0ZShyLGUudGFyZ2V0LGsuZXZlbnQuZml4KGUpKX07ay5ldmVudC5zcGVjaWFsW3JdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyx0PVEuYWNjZXNzKGUscik7dHx8ZS5hZGRFdmVudExpc3RlbmVyKG4saSwhMCksUS5hY2Nlc3MoZSxyLCh0fHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsdD1RLmFjY2VzcyhlLHIpLTE7dD9RLmFjY2VzcyhlLHIsdCk6KGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihuLGksITApLFEucmVtb3ZlKGUscikpfX19KTt2YXIgRXQ9Qy5sb2NhdGlvbixrdD1EYXRlLm5vdygpLFN0PS9cPy87ay5wYXJzZVhNTD1mdW5jdGlvbihlKXt2YXIgdDtpZighZXx8InN0cmluZyIhPXR5cGVvZiBlKXJldHVybiBudWxsO3RyeXt0PShuZXcgQy5ET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhlLCJ0ZXh0L3htbCIpfWNhdGNoKGUpe3Q9dm9pZCAwfXJldHVybiB0JiYhdC5nZXRFbGVtZW50c0J5VGFnTmFtZSgicGFyc2VyZXJyb3IiKS5sZW5ndGh8fGsuZXJyb3IoIkludmFsaWQgWE1MOiAiK2UpLHR9O3ZhciBOdD0vXFtcXSQvLEF0PS9ccj9cbi9nLER0PS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxqdD0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7ZnVuY3Rpb24gcXQobixlLHIsaSl7dmFyIHQ7aWYoQXJyYXkuaXNBcnJheShlKSlrLmVhY2goZSxmdW5jdGlvbihlLHQpe3J8fE50LnRlc3Qobik/aShuLHQpOnF0KG4rIlsiKygib2JqZWN0Ij09dHlwZW9mIHQmJm51bGwhPXQ/ZToiIikrIl0iLHQscixpKX0pO2Vsc2UgaWYocnx8Im9iamVjdCIhPT13KGUpKWkobixlKTtlbHNlIGZvcih0IGluIGUpcXQobisiWyIrdCsiXSIsZVt0XSxyLGkpfWsucGFyYW09ZnVuY3Rpb24oZSx0KXt2YXIgbixyPVtdLGk9ZnVuY3Rpb24oZSx0KXt2YXIgbj1tKHQpP3QoKTp0O3Jbci5sZW5ndGhdPWVuY29kZVVSSUNvbXBvbmVudChlKSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KG51bGw9PW4/IiI6bil9O2lmKG51bGw9PWUpcmV0dXJuIiI7aWYoQXJyYXkuaXNBcnJheShlKXx8ZS5qcXVlcnkmJiFrLmlzUGxhaW5PYmplY3QoZSkpay5lYWNoKGUsZnVuY3Rpb24oKXtpKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKG4gaW4gZSlxdChuLGVbbl0sdCxpKTtyZXR1cm4gci5qb2luKCImIil9LGsuZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gay5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBlPWsucHJvcCh0aGlzLCJlbGVtZW50cyIpO3JldHVybiBlP2subWFrZUFycmF5KGUpOnRoaXN9KS5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgZT10aGlzLnR5cGU7cmV0dXJuIHRoaXMubmFtZSYmIWsodGhpcykuaXMoIjpkaXNhYmxlZCIpJiZqdC50ZXN0KHRoaXMubm9kZU5hbWUpJiYhRHQudGVzdChlKSYmKHRoaXMuY2hlY2tlZHx8IXBlLnRlc3QoZSkpfSkubWFwKGZ1bmN0aW9uKGUsdCl7dmFyIG49ayh0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09bj9udWxsOkFycmF5LmlzQXJyYXkobik/ay5tYXAobixmdW5jdGlvbihlKXtyZXR1cm57bmFtZTp0Lm5hbWUsdmFsdWU6ZS5yZXBsYWNlKEF0LCJcclxuIil9fSk6e25hbWU6dC5uYW1lLHZhbHVlOm4ucmVwbGFjZShBdCwiXHJcbiIpfX0pLmdldCgpfX0pO3ZhciBMdD0vJTIwL2csSHQ9LyMuKiQvLE90PS8oWz8mXSlfPVteJl0qLyxQdD0vXiguKj8pOlsgXHRdKihbXlxyXG5dKikkL2dtLFJ0PS9eKD86R0VUfEhFQUQpJC8sTXQ9L15cL1wvLyxJdD17fSxXdD17fSwkdD0iKi8iLmNvbmNhdCgiKiIpLEZ0PUUuY3JlYXRlRWxlbWVudCgiYSIpO2Z1bmN0aW9uIEJ0KG8pe3JldHVybiBmdW5jdGlvbihlLHQpeyJzdHJpbmciIT10eXBlb2YgZSYmKHQ9ZSxlPSIqIik7dmFyIG4scj0wLGk9ZS50b0xvd2VyQ2FzZSgpLm1hdGNoKFIpfHxbXTtpZihtKHQpKXdoaWxlKG49aVtyKytdKSIrIj09PW5bMF0/KG49bi5zbGljZSgxKXx8IioiLChvW25dPW9bbl18fFtdKS51bnNoaWZ0KHQpKToob1tuXT1vW25dfHxbXSkucHVzaCh0KX19ZnVuY3Rpb24gX3QodCxpLG8sYSl7dmFyIHM9e30sdT10PT09V3Q7ZnVuY3Rpb24gbChlKXt2YXIgcjtyZXR1cm4gc1tlXT0hMCxrLmVhY2godFtlXXx8W10sZnVuY3Rpb24oZSx0KXt2YXIgbj10KGksbyxhKTtyZXR1cm4ic3RyaW5nIiE9dHlwZW9mIG58fHV8fHNbbl0/dT8hKHI9bik6dm9pZCAwOihpLmRhdGFUeXBlcy51bnNoaWZ0KG4pLGwobiksITEpfSkscn1yZXR1cm4gbChpLmRhdGFUeXBlc1swXSl8fCFzWyIqIl0mJmwoIioiKX1mdW5jdGlvbiB6dChlLHQpe3ZhciBuLHIsaT1rLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKG4gaW4gdCl2b2lkIDAhPT10W25dJiYoKGlbbl0/ZTpyfHwocj17fSkpW25dPXRbbl0pO3JldHVybiByJiZrLmV4dGVuZCghMCxlLHIpLGV9RnQuaHJlZj1FdC5ocmVmLGsuZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpFdC5ocmVmLHR5cGU6IkdFVCIsaXNMb2NhbDovXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLy50ZXN0KEV0LnByb3RvY29sKSxnbG9iYWw6ITAscHJvY2Vzc0RhdGE6ITAsYXN5bmM6ITAsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsYWNjZXB0czp7IioiOiR0LHRleHQ6InRleHQvcGxhaW4iLGh0bWw6InRleHQvaHRtbCIseG1sOiJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQifSxjb250ZW50czp7eG1sOi9cYnhtbFxiLyxodG1sOi9cYmh0bWwvLGpzb246L1xianNvblxiL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCIsanNvbjoicmVzcG9uc2VKU09OIn0sY29udmVydGVyczp7IiogdGV4dCI6U3RyaW5nLCJ0ZXh0IGh0bWwiOiEwLCJ0ZXh0IGpzb24iOkpTT04ucGFyc2UsInRleHQgeG1sIjprLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD96dCh6dChlLGsuYWpheFNldHRpbmdzKSx0KTp6dChrLmFqYXhTZXR0aW5ncyxlKX0sYWpheFByZWZpbHRlcjpCdChJdCksYWpheFRyYW5zcG9ydDpCdChXdCksYWpheDpmdW5jdGlvbihlLHQpeyJvYmplY3QiPT10eXBlb2YgZSYmKHQ9ZSxlPXZvaWQgMCksdD10fHx7fTt2YXIgYyxmLHAsbixkLHIsaCxnLGksbyx2PWsuYWpheFNldHVwKHt9LHQpLHk9di5jb250ZXh0fHx2LG09di5jb250ZXh0JiYoeS5ub2RlVHlwZXx8eS5qcXVlcnkpP2soeSk6ay5ldmVudCx4PWsuRGVmZXJyZWQoKSxiPWsuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLHc9di5zdGF0dXNDb2RlfHx7fSxhPXt9LHM9e30sdT0iY2FuY2VsZWQiLFQ9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihlKXt2YXIgdDtpZihoKXtpZighbil7bj17fTt3aGlsZSh0PVB0LmV4ZWMocCkpblt0WzFdLnRvTG93ZXJDYXNlKCkrIiAiXT0oblt0WzFdLnRvTG93ZXJDYXNlKCkrIiAiXXx8W10pLmNvbmNhdCh0WzJdKX10PW5bZS50b0xvd2VyQ2FzZSgpKyIgIl19cmV0dXJuIG51bGw9PXQ/bnVsbDp0LmpvaW4oIiwgIil9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiBoP3A6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihlLHQpe3JldHVybiBudWxsPT1oJiYoZT1zW2UudG9Mb3dlckNhc2UoKV09c1tlLnRvTG93ZXJDYXNlKCldfHxlLGFbZV09dCksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09aCYmKHYubWltZVR5cGU9ZSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihlKXt2YXIgdDtpZihlKWlmKGgpVC5hbHdheXMoZVtULnN0YXR1c10pO2Vsc2UgZm9yKHQgaW4gZSl3W3RdPVt3W3RdLGVbdF1dO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihlKXt2YXIgdD1lfHx1O3JldHVybiBjJiZjLmFib3J0KHQpLGwoMCx0KSx0aGlzfX07aWYoeC5wcm9taXNlKFQpLHYudXJsPSgoZXx8di51cmx8fEV0LmhyZWYpKyIiKS5yZXBsYWNlKE10LEV0LnByb3RvY29sKyIvLyIpLHYudHlwZT10Lm1ldGhvZHx8dC50eXBlfHx2Lm1ldGhvZHx8di50eXBlLHYuZGF0YVR5cGVzPSh2LmRhdGFUeXBlfHwiKiIpLnRvTG93ZXJDYXNlKCkubWF0Y2goUil8fFsiIl0sbnVsbD09di5jcm9zc0RvbWFpbil7cj1FLmNyZWF0ZUVsZW1lbnQoImEiKTt0cnl7ci5ocmVmPXYudXJsLHIuaHJlZj1yLmhyZWYsdi5jcm9zc0RvbWFpbj1GdC5wcm90b2NvbCsiLy8iK0Z0Lmhvc3QhPXIucHJvdG9jb2wrIi8vIityLmhvc3R9Y2F0Y2goZSl7di5jcm9zc0RvbWFpbj0hMH19aWYodi5kYXRhJiZ2LnByb2Nlc3NEYXRhJiYic3RyaW5nIiE9dHlwZW9mIHYuZGF0YSYmKHYuZGF0YT1rLnBhcmFtKHYuZGF0YSx2LnRyYWRpdGlvbmFsKSksX3QoSXQsdix0LFQpLGgpcmV0dXJuIFQ7Zm9yKGkgaW4oZz1rLmV2ZW50JiZ2Lmdsb2JhbCkmJjA9PWsuYWN0aXZlKysmJmsuZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0Iiksdi50eXBlPXYudHlwZS50b1VwcGVyQ2FzZSgpLHYuaGFzQ29udGVudD0hUnQudGVzdCh2LnR5cGUpLGY9di51cmwucmVwbGFjZShIdCwiIiksdi5oYXNDb250ZW50P3YuZGF0YSYmdi5wcm9jZXNzRGF0YSYmMD09PSh2LmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikmJih2LmRhdGE9di5kYXRhLnJlcGxhY2UoTHQsIisiKSk6KG89di51cmwuc2xpY2UoZi5sZW5ndGgpLHYuZGF0YSYmKHYucHJvY2Vzc0RhdGF8fCJzdHJpbmciPT10eXBlb2Ygdi5kYXRhKSYmKGYrPShTdC50ZXN0KGYpPyImIjoiPyIpK3YuZGF0YSxkZWxldGUgdi5kYXRhKSwhMT09PXYuY2FjaGUmJihmPWYucmVwbGFjZShPdCwiJDEiKSxvPShTdC50ZXN0KGYpPyImIjoiPyIpKyJfPSIra3QrKytvKSx2LnVybD1mK28pLHYuaWZNb2RpZmllZCYmKGsubGFzdE1vZGlmaWVkW2ZdJiZULnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIixrLmxhc3RNb2RpZmllZFtmXSksay5ldGFnW2ZdJiZULnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLGsuZXRhZ1tmXSkpLCh2LmRhdGEmJnYuaGFzQ29udGVudCYmITEhPT12LmNvbnRlbnRUeXBlfHx0LmNvbnRlbnRUeXBlKSYmVC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLHYuY29udGVudFR5cGUpLFQuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0Iix2LmRhdGFUeXBlc1swXSYmdi5hY2NlcHRzW3YuZGF0YVR5cGVzWzBdXT92LmFjY2VwdHNbdi5kYXRhVHlwZXNbMF1dKygiKiIhPT12LmRhdGFUeXBlc1swXT8iLCAiKyR0KyI7IHE9MC4wMSI6IiIpOnYuYWNjZXB0c1siKiJdKSx2LmhlYWRlcnMpVC5zZXRSZXF1ZXN0SGVhZGVyKGksdi5oZWFkZXJzW2ldKTtpZih2LmJlZm9yZVNlbmQmJighMT09PXYuYmVmb3JlU2VuZC5jYWxsKHksVCx2KXx8aCkpcmV0dXJuIFQuYWJvcnQoKTtpZih1PSJhYm9ydCIsYi5hZGQodi5jb21wbGV0ZSksVC5kb25lKHYuc3VjY2VzcyksVC5mYWlsKHYuZXJyb3IpLGM9X3QoV3Qsdix0LFQpKXtpZihULnJlYWR5U3RhdGU9MSxnJiZtLnRyaWdnZXIoImFqYXhTZW5kIixbVCx2XSksaClyZXR1cm4gVDt2LmFzeW5jJiYwPHYudGltZW91dCYmKGQ9Qy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7VC5hYm9ydCgidGltZW91dCIpfSx2LnRpbWVvdXQpKTt0cnl7aD0hMSxjLnNlbmQoYSxsKX1jYXRjaChlKXtpZihoKXRocm93IGU7bCgtMSxlKX19ZWxzZSBsKC0xLCJObyBUcmFuc3BvcnQiKTtmdW5jdGlvbiBsKGUsdCxuLHIpe3ZhciBpLG8sYSxzLHUsbD10O2h8fChoPSEwLGQmJkMuY2xlYXJUaW1lb3V0KGQpLGM9dm9pZCAwLHA9cnx8IiIsVC5yZWFkeVN0YXRlPTA8ZT80OjAsaT0yMDA8PWUmJmU8MzAwfHwzMDQ9PT1lLG4mJihzPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYSxzPWUuY29udGVudHMsdT1lLmRhdGFUeXBlczt3aGlsZSgiKiI9PT11WzBdKXUuc2hpZnQoKSx2b2lkIDA9PT1yJiYocj1lLm1pbWVUeXBlfHx0LmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKSk7aWYocilmb3IoaSBpbiBzKWlmKHNbaV0mJnNbaV0udGVzdChyKSl7dS51bnNoaWZ0KGkpO2JyZWFrfWlmKHVbMF1pbiBuKW89dVswXTtlbHNle2ZvcihpIGluIG4pe2lmKCF1WzBdfHxlLmNvbnZlcnRlcnNbaSsiICIrdVswXV0pe289aTticmVha31hfHwoYT1pKX1vPW98fGF9aWYobylyZXR1cm4gbyE9PXVbMF0mJnUudW5zaGlmdChvKSxuW29dfSh2LFQsbikpLHM9ZnVuY3Rpb24oZSx0LG4scil7dmFyIGksbyxhLHMsdSxsPXt9LGM9ZS5kYXRhVHlwZXMuc2xpY2UoKTtpZihjWzFdKWZvcihhIGluIGUuY29udmVydGVycylsW2EudG9Mb3dlckNhc2UoKV09ZS5jb252ZXJ0ZXJzW2FdO289Yy5zaGlmdCgpO3doaWxlKG8paWYoZS5yZXNwb25zZUZpZWxkc1tvXSYmKG5bZS5yZXNwb25zZUZpZWxkc1tvXV09dCksIXUmJnImJmUuZGF0YUZpbHRlciYmKHQ9ZS5kYXRhRmlsdGVyKHQsZS5kYXRhVHlwZSkpLHU9byxvPWMuc2hpZnQoKSlpZigiKiI9PT1vKW89dTtlbHNlIGlmKCIqIiE9PXUmJnUhPT1vKXtpZighKGE9bFt1KyIgIitvXXx8bFsiKiAiK29dKSlmb3IoaSBpbiBsKWlmKChzPWkuc3BsaXQoIiAiKSlbMV09PT1vJiYoYT1sW3UrIiAiK3NbMF1dfHxsWyIqICIrc1swXV0pKXshMD09PWE/YT1sW2ldOiEwIT09bFtpXSYmKG89c1swXSxjLnVuc2hpZnQoc1sxXSkpO2JyZWFrfWlmKCEwIT09YSlpZihhJiZlWyJ0aHJvd3MiXSl0PWEodCk7ZWxzZSB0cnl7dD1hKHQpfWNhdGNoKGUpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmE/ZToiTm8gY29udmVyc2lvbiBmcm9tICIrdSsiIHRvICIrb319fXJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTp0fX0odixzLFQsaSksaT8odi5pZk1vZGlmaWVkJiYoKHU9VC5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpKSYmKGsubGFzdE1vZGlmaWVkW2ZdPXUpLCh1PVQuZ2V0UmVzcG9uc2VIZWFkZXIoImV0YWciKSkmJihrLmV0YWdbZl09dSkpLDIwND09PWV8fCJIRUFEIj09PXYudHlwZT9sPSJub2NvbnRlbnQiOjMwND09PWU/bD0ibm90bW9kaWZpZWQiOihsPXMuc3RhdGUsbz1zLmRhdGEsaT0hKGE9cy5lcnJvcikpKTooYT1sLCFlJiZsfHwobD0iZXJyb3IiLGU8MCYmKGU9MCkpKSxULnN0YXR1cz1lLFQuc3RhdHVzVGV4dD0odHx8bCkrIiIsaT94LnJlc29sdmVXaXRoKHksW28sbCxUXSk6eC5yZWplY3RXaXRoKHksW1QsbCxhXSksVC5zdGF0dXNDb2RlKHcpLHc9dm9pZCAwLGcmJm0udHJpZ2dlcihpPyJhamF4U3VjY2VzcyI6ImFqYXhFcnJvciIsW1QsdixpP286YV0pLGIuZmlyZVdpdGgoeSxbVCxsXSksZyYmKG0udHJpZ2dlcigiYWpheENvbXBsZXRlIixbVCx2XSksLS1rLmFjdGl2ZXx8ay5ldmVudC50cmlnZ2VyKCJhamF4U3RvcCIpKSl9cmV0dXJuIFR9LGdldEpTT046ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBrLmdldChlLHQsbiwianNvbiIpfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gay5nZXQoZSx2b2lkIDAsdCwic2NyaXB0Iil9fSksay5lYWNoKFsiZ2V0IiwicG9zdCJdLGZ1bmN0aW9uKGUsaSl7a1tpXT1mdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gbSh0KSYmKHI9cnx8bixuPXQsdD12b2lkIDApLGsuYWpheChrLmV4dGVuZCh7dXJsOmUsdHlwZTppLGRhdGFUeXBlOnIsZGF0YTp0LHN1Y2Nlc3M6bn0say5pc1BsYWluT2JqZWN0KGUpJiZlKSl9fSksay5fZXZhbFVybD1mdW5jdGlvbihlLHQpe3JldHVybiBrLmFqYXgoe3VybDplLHR5cGU6IkdFVCIsZGF0YVR5cGU6InNjcmlwdCIsY2FjaGU6ITAsYXN5bmM6ITEsZ2xvYmFsOiExLGNvbnZlcnRlcnM6eyJ0ZXh0IHNjcmlwdCI6ZnVuY3Rpb24oKXt9fSxkYXRhRmlsdGVyOmZ1bmN0aW9uKGUpe2suZ2xvYmFsRXZhbChlLHQpfX0pfSxrLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gdGhpc1swXSYmKG0oZSkmJihlPWUuY2FsbCh0aGlzWzBdKSksdD1rKGUsdGhpc1swXS5vd25lckRvY3VtZW50KS5lcSgwKS5jbG9uZSghMCksdGhpc1swXS5wYXJlbnROb2RlJiZ0Lmluc2VydEJlZm9yZSh0aGlzWzBdKSx0Lm1hcChmdW5jdGlvbigpe3ZhciBlPXRoaXM7d2hpbGUoZS5maXJzdEVsZW1lbnRDaGlsZCllPWUuZmlyc3RFbGVtZW50Q2hpbGQ7cmV0dXJuIGV9KS5hcHBlbmQodGhpcykpLHRoaXN9LHdyYXBJbm5lcjpmdW5jdGlvbihuKXtyZXR1cm4gbShuKT90aGlzLmVhY2goZnVuY3Rpb24oZSl7ayh0aGlzKS53cmFwSW5uZXIobi5jYWxsKHRoaXMsZSkpfSk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9ayh0aGlzKSx0PWUuY29udGVudHMoKTt0Lmxlbmd0aD90LndyYXBBbGwobik6ZS5hcHBlbmQobil9KX0sd3JhcDpmdW5jdGlvbih0KXt2YXIgbj1tKHQpO3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oZSl7ayh0aGlzKS53cmFwQWxsKG4/dC5jYWxsKHRoaXMsZSk6dCl9KX0sdW53cmFwOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnBhcmVudChlKS5ub3QoImJvZHkiKS5lYWNoKGZ1bmN0aW9uKCl7ayh0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSksdGhpc319KSxrLmV4cHIucHNldWRvcy5oaWRkZW49ZnVuY3Rpb24oZSl7cmV0dXJuIWsuZXhwci5wc2V1ZG9zLnZpc2libGUoZSl9LGsuZXhwci5wc2V1ZG9zLnZpc2libGU9ZnVuY3Rpb24oZSl7cmV0dXJuISEoZS5vZmZzZXRXaWR0aHx8ZS5vZmZzZXRIZWlnaHR8fGUuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpfSxrLmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBDLlhNTEh0dHBSZXF1ZXN0fWNhdGNoKGUpe319O3ZhciBVdD17MDoyMDAsMTIyMzoyMDR9LFh0PWsuYWpheFNldHRpbmdzLnhocigpO3kuY29ycz0hIVh0JiYid2l0aENyZWRlbnRpYWxzImluIFh0LHkuYWpheD1YdD0hIVh0LGsuYWpheFRyYW5zcG9ydChmdW5jdGlvbihpKXt2YXIgbyxhO2lmKHkuY29yc3x8WHQmJiFpLmNyb3NzRG9tYWluKXJldHVybntzZW5kOmZ1bmN0aW9uKGUsdCl7dmFyIG4scj1pLnhocigpO2lmKHIub3BlbihpLnR5cGUsaS51cmwsaS5hc3luYyxpLnVzZXJuYW1lLGkucGFzc3dvcmQpLGkueGhyRmllbGRzKWZvcihuIGluIGkueGhyRmllbGRzKXJbbl09aS54aHJGaWVsZHNbbl07Zm9yKG4gaW4gaS5taW1lVHlwZSYmci5vdmVycmlkZU1pbWVUeXBlJiZyLm92ZXJyaWRlTWltZVR5cGUoaS5taW1lVHlwZSksaS5jcm9zc0RvbWFpbnx8ZVsiWC1SZXF1ZXN0ZWQtV2l0aCJdfHwoZVsiWC1SZXF1ZXN0ZWQtV2l0aCJdPSJYTUxIdHRwUmVxdWVzdCIpLGUpci5zZXRSZXF1ZXN0SGVhZGVyKG4sZVtuXSk7bz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXtvJiYobz1hPXIub25sb2FkPXIub25lcnJvcj1yLm9uYWJvcnQ9ci5vbnRpbWVvdXQ9ci5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCwiYWJvcnQiPT09ZT9yLmFib3J0KCk6ImVycm9yIj09PWU/Im51bWJlciIhPXR5cGVvZiByLnN0YXR1cz90KDAsImVycm9yIik6dChyLnN0YXR1cyxyLnN0YXR1c1RleHQpOnQoVXRbci5zdGF0dXNdfHxyLnN0YXR1cyxyLnN0YXR1c1RleHQsInRleHQiIT09KHIucmVzcG9uc2VUeXBlfHwidGV4dCIpfHwic3RyaW5nIiE9dHlwZW9mIHIucmVzcG9uc2VUZXh0P3tiaW5hcnk6ci5yZXNwb25zZX06e3RleHQ6ci5yZXNwb25zZVRleHR9LHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKX19LHIub25sb2FkPW8oKSxhPXIub25lcnJvcj1yLm9udGltZW91dD1vKCJlcnJvciIpLHZvaWQgMCE9PXIub25hYm9ydD9yLm9uYWJvcnQ9YTpyLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT1yLnJlYWR5U3RhdGUmJkMuc2V0VGltZW91dChmdW5jdGlvbigpe28mJmEoKX0pfSxvPW8oImFib3J0Iik7dHJ5e3Iuc2VuZChpLmhhc0NvbnRlbnQmJmkuZGF0YXx8bnVsbCl9Y2F0Y2goZSl7aWYobyl0aHJvdyBlfX0sYWJvcnQ6ZnVuY3Rpb24oKXtvJiZvKCl9fX0pLGsuYWpheFByZWZpbHRlcihmdW5jdGlvbihlKXtlLmNyb3NzRG9tYWluJiYoZS5jb250ZW50cy5zY3JpcHQ9ITEpfSksay5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDoidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHQifSxjb250ZW50czp7c2NyaXB0Oi9cYig/OmphdmF8ZWNtYSlzY3JpcHRcYi99LGNvbnZlcnRlcnM6eyJ0ZXh0IHNjcmlwdCI6ZnVuY3Rpb24oZSl7cmV0dXJuIGsuZ2xvYmFsRXZhbChlKSxlfX19KSxrLmFqYXhQcmVmaWx0ZXIoInNjcmlwdCIsZnVuY3Rpb24oZSl7dm9pZCAwPT09ZS5jYWNoZSYmKGUuY2FjaGU9ITEpLGUuY3Jvc3NEb21haW4mJihlLnR5cGU9IkdFVCIpfSksay5hamF4VHJhbnNwb3J0KCJzY3JpcHQiLGZ1bmN0aW9uKG4pe3ZhciByLGk7aWYobi5jcm9zc0RvbWFpbnx8bi5zY3JpcHRBdHRycylyZXR1cm57c2VuZDpmdW5jdGlvbihlLHQpe3I9aygiPHNjcmlwdD4iKS5hdHRyKG4uc2NyaXB0QXR0cnN8fHt9KS5wcm9wKHtjaGFyc2V0Om4uc2NyaXB0Q2hhcnNldCxzcmM6bi51cmx9KS5vbigibG9hZCBlcnJvciIsaT1mdW5jdGlvbihlKXtyLnJlbW92ZSgpLGk9bnVsbCxlJiZ0KCJlcnJvciI9PT1lLnR5cGU/NDA0OjIwMCxlLnR5cGUpfSksRS5oZWFkLmFwcGVuZENoaWxkKHJbMF0pfSxhYm9ydDpmdW5jdGlvbigpe2kmJmkoKX19fSk7dmFyIFZ0LEd0PVtdLFl0PS8oPSlcPyg/PSZ8JCl8XD9cPy87ay5hamF4U2V0dXAoe2pzb25wOiJjYWxsYmFjayIsanNvbnBDYWxsYmFjazpmdW5jdGlvbigpe3ZhciBlPUd0LnBvcCgpfHxrLmV4cGFuZG8rIl8iK2t0Kys7cmV0dXJuIHRoaXNbZV09ITAsZX19KSxrLmFqYXhQcmVmaWx0ZXIoImpzb24ganNvbnAiLGZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYT0hMSE9PWUuanNvbnAmJihZdC50ZXN0KGUudXJsKT8idXJsIjoic3RyaW5nIj09dHlwZW9mIGUuZGF0YSYmMD09PShlLmNvbnRlbnRUeXBlfHwiIikuaW5kZXhPZigiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikmJll0LnRlc3QoZS5kYXRhKSYmImRhdGEiKTtpZihhfHwianNvbnAiPT09ZS5kYXRhVHlwZXNbMF0pcmV0dXJuIHI9ZS5qc29ucENhbGxiYWNrPW0oZS5qc29ucENhbGxiYWNrKT9lLmpzb25wQ2FsbGJhY2soKTplLmpzb25wQ2FsbGJhY2ssYT9lW2FdPWVbYV0ucmVwbGFjZShZdCwiJDEiK3IpOiExIT09ZS5qc29ucCYmKGUudXJsKz0oU3QudGVzdChlLnVybCk/IiYiOiI/IikrZS5qc29ucCsiPSIrciksZS5jb252ZXJ0ZXJzWyJzY3JpcHQganNvbiJdPWZ1bmN0aW9uKCl7cmV0dXJuIG98fGsuZXJyb3IocisiIHdhcyBub3QgY2FsbGVkIiksb1swXX0sZS5kYXRhVHlwZXNbMF09Impzb24iLGk9Q1tyXSxDW3JdPWZ1bmN0aW9uKCl7bz1hcmd1bWVudHN9LG4uYWx3YXlzKGZ1bmN0aW9uKCl7dm9pZCAwPT09aT9rKEMpLnJlbW92ZVByb3Aocik6Q1tyXT1pLGVbcl0mJihlLmpzb25wQ2FsbGJhY2s9dC5qc29ucENhbGxiYWNrLEd0LnB1c2gocikpLG8mJm0oaSkmJmkob1swXSksbz1pPXZvaWQgMH0pLCJzY3JpcHQifSkseS5jcmVhdGVIVE1MRG9jdW1lbnQ9KChWdD1FLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikuYm9keSkuaW5uZXJIVE1MPSI8Zm9ybT48L2Zvcm0+PGZvcm0+PC9mb3JtPiIsMj09PVZ0LmNoaWxkTm9kZXMubGVuZ3RoKSxrLnBhcnNlSFRNTD1mdW5jdGlvbihlLHQsbil7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlP1tdOigiYm9vbGVhbiI9PXR5cGVvZiB0JiYobj10LHQ9ITEpLHR8fCh5LmNyZWF0ZUhUTUxEb2N1bWVudD8oKHI9KHQ9RS5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIiIpKS5jcmVhdGVFbGVtZW50KCJiYXNlIikpLmhyZWY9RS5sb2NhdGlvbi5ocmVmLHQuaGVhZC5hcHBlbmRDaGlsZChyKSk6dD1FKSxvPSFuJiZbXSwoaT1ELmV4ZWMoZSkpP1t0LmNyZWF0ZUVsZW1lbnQoaVsxXSldOihpPXdlKFtlXSx0LG8pLG8mJm8ubGVuZ3RoJiZrKG8pLnJlbW92ZSgpLGsubWVyZ2UoW10saS5jaGlsZE5vZGVzKSkpO3ZhciByLGksb30say5mbi5sb2FkPWZ1bmN0aW9uKGUsdCxuKXt2YXIgcixpLG8sYT10aGlzLHM9ZS5pbmRleE9mKCIgIik7cmV0dXJuLTE8cyYmKHI9bXQoZS5zbGljZShzKSksZT1lLnNsaWNlKDAscykpLG0odCk/KG49dCx0PXZvaWQgMCk6dCYmIm9iamVjdCI9PXR5cGVvZiB0JiYoaT0iUE9TVCIpLDA8YS5sZW5ndGgmJmsuYWpheCh7dXJsOmUsdHlwZTppfHwiR0VUIixkYXRhVHlwZToiaHRtbCIsZGF0YTp0fSkuZG9uZShmdW5jdGlvbihlKXtvPWFyZ3VtZW50cyxhLmh0bWwocj9rKCI8ZGl2PiIpLmFwcGVuZChrLnBhcnNlSFRNTChlKSkuZmluZChyKTplKX0pLmFsd2F5cyhuJiZmdW5jdGlvbihlLHQpe2EuZWFjaChmdW5jdGlvbigpe24uYXBwbHkodGhpcyxvfHxbZS5yZXNwb25zZVRleHQsdCxlXSl9KX0pLHRoaXN9LGsuZWFjaChbImFqYXhTdGFydCIsImFqYXhTdG9wIiwiYWpheENvbXBsZXRlIiwiYWpheEVycm9yIiwiYWpheFN1Y2Nlc3MiLCJhamF4U2VuZCJdLGZ1bmN0aW9uKGUsdCl7ay5mblt0XT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vbih0LGUpfX0pLGsuZXhwci5wc2V1ZG9zLmFuaW1hdGVkPWZ1bmN0aW9uKHQpe3JldHVybiBrLmdyZXAoay50aW1lcnMsZnVuY3Rpb24oZSl7cmV0dXJuIHQ9PT1lLmVsZW19KS5sZW5ndGh9LGsub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oZSx0LG4pe3ZhciByLGksbyxhLHMsdSxsPWsuY3NzKGUsInBvc2l0aW9uIiksYz1rKGUpLGY9e307InN0YXRpYyI9PT1sJiYoZS5zdHlsZS5wb3NpdGlvbj0icmVsYXRpdmUiKSxzPWMub2Zmc2V0KCksbz1rLmNzcyhlLCJ0b3AiKSx1PWsuY3NzKGUsImxlZnQiKSwoImFic29sdXRlIj09PWx8fCJmaXhlZCI9PT1sKSYmLTE8KG8rdSkuaW5kZXhPZigiYXV0byIpPyhhPShyPWMucG9zaXRpb24oKSkudG9wLGk9ci5sZWZ0KTooYT1wYXJzZUZsb2F0KG8pfHwwLGk9cGFyc2VGbG9hdCh1KXx8MCksbSh0KSYmKHQ9dC5jYWxsKGUsbixrLmV4dGVuZCh7fSxzKSkpLG51bGwhPXQudG9wJiYoZi50b3A9dC50b3Atcy50b3ArYSksbnVsbCE9dC5sZWZ0JiYoZi5sZWZ0PXQubGVmdC1zLmxlZnQraSksInVzaW5nImluIHQ/dC51c2luZy5jYWxsKGUsZik6Yy5jc3MoZil9fSxrLmZuLmV4dGVuZCh7b2Zmc2V0OmZ1bmN0aW9uKHQpe2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHZvaWQgMD09PXQ/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oZSl7ay5vZmZzZXQuc2V0T2Zmc2V0KHRoaXMsdCxlKX0pO3ZhciBlLG4scj10aGlzWzBdO3JldHVybiByP3IuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGg/KGU9ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPXIub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldyx7dG9wOmUudG9wK24ucGFnZVlPZmZzZXQsbGVmdDplLmxlZnQrbi5wYWdlWE9mZnNldH0pOnt0b3A6MCxsZWZ0OjB9OnZvaWQgMH0scG9zaXRpb246ZnVuY3Rpb24oKXtpZih0aGlzWzBdKXt2YXIgZSx0LG4scj10aGlzWzBdLGk9e3RvcDowLGxlZnQ6MH07aWYoImZpeGVkIj09PWsuY3NzKHIsInBvc2l0aW9uIikpdD1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2Vsc2V7dD10aGlzLm9mZnNldCgpLG49ci5vd25lckRvY3VtZW50LGU9ci5vZmZzZXRQYXJlbnR8fG4uZG9jdW1lbnRFbGVtZW50O3doaWxlKGUmJihlPT09bi5ib2R5fHxlPT09bi5kb2N1bWVudEVsZW1lbnQpJiYic3RhdGljIj09PWsuY3NzKGUsInBvc2l0aW9uIikpZT1lLnBhcmVudE5vZGU7ZSYmZSE9PXImJjE9PT1lLm5vZGVUeXBlJiYoKGk9ayhlKS5vZmZzZXQoKSkudG9wKz1rLmNzcyhlLCJib3JkZXJUb3BXaWR0aCIsITApLGkubGVmdCs9ay5jc3MoZSwiYm9yZGVyTGVmdFdpZHRoIiwhMCkpfXJldHVybnt0b3A6dC50b3AtaS50b3Atay5jc3MociwibWFyZ2luVG9wIiwhMCksbGVmdDp0LmxlZnQtaS5sZWZ0LWsuY3NzKHIsIm1hcmdpbkxlZnQiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9mZnNldFBhcmVudDt3aGlsZShlJiYic3RhdGljIj09PWsuY3NzKGUsInBvc2l0aW9uIikpZT1lLm9mZnNldFBhcmVudDtyZXR1cm4gZXx8aWV9KX19KSxrLmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24odCxpKXt2YXIgbz0icGFnZVlPZmZzZXQiPT09aTtrLmZuW3RdPWZ1bmN0aW9uKGUpe3JldHVybiBfKHRoaXMsZnVuY3Rpb24oZSx0LG4pe3ZhciByO2lmKHgoZSk/cj1lOjk9PT1lLm5vZGVUeXBlJiYocj1lLmRlZmF1bHRWaWV3KSx2b2lkIDA9PT1uKXJldHVybiByP3JbaV06ZVt0XTtyP3Iuc2Nyb2xsVG8obz9yLnBhZ2VYT2Zmc2V0Om4sbz9uOnIucGFnZVlPZmZzZXQpOmVbdF09bn0sdCxlLGFyZ3VtZW50cy5sZW5ndGgpfX0pLGsuZWFjaChbInRvcCIsImxlZnQiXSxmdW5jdGlvbihlLG4pe2suY3NzSG9va3Nbbl09emUoeS5waXhlbFBvc2l0aW9uLGZ1bmN0aW9uKGUsdCl7aWYodClyZXR1cm4gdD1fZShlLG4pLCRlLnRlc3QodCk/ayhlKS5wb3NpdGlvbigpW25dKyJweCI6dH0pfSksay5lYWNoKHtIZWlnaHQ6ImhlaWdodCIsV2lkdGg6IndpZHRoIn0sZnVuY3Rpb24oYSxzKXtrLmVhY2goe3BhZGRpbmc6ImlubmVyIithLGNvbnRlbnQ6cywiIjoib3V0ZXIiK2F9LGZ1bmN0aW9uKHIsbyl7ay5mbltvXT1mdW5jdGlvbihlLHQpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGgmJihyfHwiYm9vbGVhbiIhPXR5cGVvZiBlKSxpPXJ8fCghMD09PWV8fCEwPT09dD8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIF8odGhpcyxmdW5jdGlvbihlLHQsbil7dmFyIHI7cmV0dXJuIHgoZSk/MD09PW8uaW5kZXhPZigib3V0ZXIiKT9lWyJpbm5lciIrYV06ZS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbImNsaWVudCIrYV06OT09PWUubm9kZVR5cGU/KHI9ZS5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoZS5ib2R5WyJzY3JvbGwiK2FdLHJbInNjcm9sbCIrYV0sZS5ib2R5WyJvZmZzZXQiK2FdLHJbIm9mZnNldCIrYV0sclsiY2xpZW50IithXSkpOnZvaWQgMD09PW4/ay5jc3MoZSx0LGkpOmsuc3R5bGUoZSx0LG4saSl9LHMsbj9lOnZvaWQgMCxuKX19KX0pLGsuZWFjaCgiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IHJlc2l6ZSBzY3JvbGwgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBjb250ZXh0bWVudSIuc3BsaXQoIiAiKSxmdW5jdGlvbihlLG4pe2suZm5bbl09ZnVuY3Rpb24oZSx0KXtyZXR1cm4gMDxhcmd1bWVudHMubGVuZ3RoP3RoaXMub24obixudWxsLGUsdCk6dGhpcy50cmlnZ2VyKG4pfX0pLGsuZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoZSkubW91c2VsZWF2ZSh0fHxlKX19KSxrLmZuLmV4dGVuZCh7YmluZDpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHRoaXMub24oZSxudWxsLHQsbil9LHVuYmluZDpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm9mZihlLG51bGwsdCl9LGRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuLHIpe3JldHVybiB0aGlzLm9uKHQsZSxuLHIpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vZmYoZSwiKioiKTp0aGlzLm9mZih0LGV8fCIqKiIsbil9fSksay5wcm94eT1mdW5jdGlvbihlLHQpe3ZhciBuLHIsaTtpZigic3RyaW5nIj09dHlwZW9mIHQmJihuPWVbdF0sdD1lLGU9biksbShlKSlyZXR1cm4gcj1zLmNhbGwoYXJndW1lbnRzLDIpLChpPWZ1bmN0aW9uKCl7cmV0dXJuIGUuYXBwbHkodHx8dGhpcyxyLmNvbmNhdChzLmNhbGwoYXJndW1lbnRzKSkpfSkuZ3VpZD1lLmd1aWQ9ZS5ndWlkfHxrLmd1aWQrKyxpfSxrLmhvbGRSZWFkeT1mdW5jdGlvbihlKXtlP2sucmVhZHlXYWl0Kys6ay5yZWFkeSghMCl9LGsuaXNBcnJheT1BcnJheS5pc0FycmF5LGsucGFyc2VKU09OPUpTT04ucGFyc2Usay5ub2RlTmFtZT1BLGsuaXNGdW5jdGlvbj1tLGsuaXNXaW5kb3c9eCxrLmNhbWVsQ2FzZT1WLGsudHlwZT13LGsubm93PURhdGUubm93LGsuaXNOdW1lcmljPWZ1bmN0aW9uKGUpe3ZhciB0PWsudHlwZShlKTtyZXR1cm4oIm51bWJlciI9PT10fHwic3RyaW5nIj09PXQpJiYhaXNOYU4oZS1wYXJzZUZsb2F0KGUpKX0sImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKCJqcXVlcnkiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGt9KTt2YXIgUXQ9Qy5qUXVlcnksSnQ9Qy4kO3JldHVybiBrLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIEMuJD09PWsmJihDLiQ9SnQpLGUmJkMualF1ZXJ5PT09ayYmKEMualF1ZXJ5PVF0KSxrfSxlfHwoQy5qUXVlcnk9Qy4kPWspLGt9KTsNCg0KLyohDQogKiBqUXVlcnkgVmFsaWRhdGlvbiBQbHVnaW4gdjEuMTcuMA0KICoNCiAqIGh0dHBzOi8vanF1ZXJ5dmFsaWRhdGlvbi5vcmcvDQogKg0KICogQ29weXJpZ2h0IChjKSAyMDE3IErDtnJuIFphZWZmZXJlcg0KICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlDQogKi8NCihmdW5jdGlvbihuKXt0eXBlb2YgZGVmaW5lPT0iZnVuY3Rpb24iJiZkZWZpbmUuYW1kP2RlZmluZShbImpxdWVyeSJdLG4pOnR5cGVvZiBtb2R1bGU9PSJvYmplY3QiJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1uKHJlcXVpcmUoImpxdWVyeSIpKTpuKGpRdWVyeSl9KShmdW5jdGlvbihuKXtuLmV4dGVuZChuLmZuLHt2YWxpZGF0ZTpmdW5jdGlvbih0KXtpZighdGhpcy5sZW5ndGgpe3QmJnQuZGVidWcmJndpbmRvdy5jb25zb2xlJiZjb25zb2xlLndhcm4oIk5vdGhpbmcgc2VsZWN0ZWQsIGNhbid0IHZhbGlkYXRlLCByZXR1cm5pbmcgbm90aGluZy4iKTtyZXR1cm59dmFyIGk9bi5kYXRhKHRoaXNbMF0sInZhbGlkYXRvciIpO2lmKGkpcmV0dXJuIGk7aWYodGhpcy5hdHRyKCJub3ZhbGlkYXRlIiwibm92YWxpZGF0ZSIpLGk9bmV3IG4udmFsaWRhdG9yKHQsdGhpc1swXSksbi5kYXRhKHRoaXNbMF0sInZhbGlkYXRvciIsaSksaS5zZXR0aW5ncy5vbnN1Ym1pdCl7dGhpcy5vbigiY2xpY2sudmFsaWRhdGUiLCI6c3VibWl0IixmdW5jdGlvbih0KXtpLnN1Ym1pdEJ1dHRvbj10LmN1cnJlbnRUYXJnZXQ7bih0aGlzKS5oYXNDbGFzcygiY2FuY2VsIikmJihpLmNhbmNlbFN1Ym1pdD0hMCk7bih0aGlzKS5hdHRyKCJmb3Jtbm92YWxpZGF0ZSIpIT09dW5kZWZpbmVkJiYoaS5jYW5jZWxTdWJtaXQ9ITApfSk7dGhpcy5vbigic3VibWl0LnZhbGlkYXRlIixmdW5jdGlvbih0KXtmdW5jdGlvbiByKCl7dmFyIHIsdTtyZXR1cm4oaS5zdWJtaXRCdXR0b24mJihpLnNldHRpbmdzLnN1Ym1pdEhhbmRsZXJ8fGkuZm9ybVN1Ym1pdHRlZCkmJihyPW4oIjxpbnB1dCB0eXBlPSdoaWRkZW4nLz4iKS5hdHRyKCJuYW1lIixpLnN1Ym1pdEJ1dHRvbi5uYW1lKS52YWwobihpLnN1Ym1pdEJ1dHRvbikudmFsKCkpLmFwcGVuZFRvKGkuY3VycmVudEZvcm0pKSxpLnNldHRpbmdzLnN1Ym1pdEhhbmRsZXIpPyh1PWkuc2V0dGluZ3Muc3VibWl0SGFuZGxlci5jYWxsKGksaS5jdXJyZW50Rm9ybSx0KSxyJiZyLnJlbW92ZSgpLHUhPT11bmRlZmluZWQpP3U6ITE6ITB9cmV0dXJuKGkuc2V0dGluZ3MuZGVidWcmJnQucHJldmVudERlZmF1bHQoKSxpLmNhbmNlbFN1Ym1pdCk/KGkuY2FuY2VsU3VibWl0PSExLHIoKSk6aS5mb3JtKCk/aS5wZW5kaW5nUmVxdWVzdD8oaS5mb3JtU3VibWl0dGVkPSEwLCExKTpyKCk6KGkuZm9jdXNJbnZhbGlkKCksITEpfSl9cmV0dXJuIGl9LHZhbGlkOmZ1bmN0aW9uKCl7dmFyIHQsaSxyO3JldHVybiBuKHRoaXNbMF0pLmlzKCJmb3JtIik/dD10aGlzLnZhbGlkYXRlKCkuZm9ybSgpOihyPVtdLHQ9ITAsaT1uKHRoaXNbMF0uZm9ybSkudmFsaWRhdGUoKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt0PWkuZWxlbWVudCh0aGlzKSYmdDt0fHwocj1yLmNvbmNhdChpLmVycm9yTGlzdCkpfSksaS5lcnJvckxpc3Q9ciksdH0scnVsZXM6ZnVuY3Rpb24odCxpKXt2YXIgcj10aGlzWzBdLGUscyxmLHUsbyxoO2lmKHIhPW51bGwmJighci5mb3JtJiZyLmhhc0F0dHJpYnV0ZSgiY29udGVudGVkaXRhYmxlIikmJihyLmZvcm09dGhpcy5jbG9zZXN0KCJmb3JtIilbMF0sci5uYW1lPXRoaXMuYXR0cigibmFtZSIpKSxyLmZvcm0hPW51bGwpKXtpZih0KXtlPW4uZGF0YShyLmZvcm0sInZhbGlkYXRvciIpLnNldHRpbmdzO3M9ZS5ydWxlcztmPW4udmFsaWRhdG9yLnN0YXRpY1J1bGVzKHIpO3N3aXRjaCh0KXtjYXNlImFkZCI6bi5leHRlbmQoZixuLnZhbGlkYXRvci5ub3JtYWxpemVSdWxlKGkpKTtkZWxldGUgZi5tZXNzYWdlcztzW3IubmFtZV09ZjtpLm1lc3NhZ2VzJiYoZS5tZXNzYWdlc1tyLm5hbWVdPW4uZXh0ZW5kKGUubWVzc2FnZXNbci5uYW1lXSxpLm1lc3NhZ2VzKSk7YnJlYWs7Y2FzZSJyZW1vdmUiOnJldHVybiBpPyhoPXt9LG4uZWFjaChpLnNwbGl0KC9ccy8pLGZ1bmN0aW9uKG4sdCl7aFt0XT1mW3RdO2RlbGV0ZSBmW3RdfSksaCk6KGRlbGV0ZSBzW3IubmFtZV0sZil9fXJldHVybiB1PW4udmFsaWRhdG9yLm5vcm1hbGl6ZVJ1bGVzKG4uZXh0ZW5kKHt9LG4udmFsaWRhdG9yLmNsYXNzUnVsZXMociksbi52YWxpZGF0b3IuYXR0cmlidXRlUnVsZXMociksbi52YWxpZGF0b3IuZGF0YVJ1bGVzKHIpLG4udmFsaWRhdG9yLnN0YXRpY1J1bGVzKHIpKSxyKSx1LnJlcXVpcmVkJiYobz11LnJlcXVpcmVkLGRlbGV0ZSB1LnJlcXVpcmVkLHU9bi5leHRlbmQoe3JlcXVpcmVkOm99LHUpKSx1LnJlbW90ZSYmKG89dS5yZW1vdGUsZGVsZXRlIHUucmVtb3RlLHU9bi5leHRlbmQodSx7cmVtb3RlOm99KSksdX19fSk7bi5leHRlbmQobi5leHByLnBzZXVkb3N8fG4uZXhwclsiOiJdLHtibGFuazpmdW5jdGlvbih0KXtyZXR1cm4hbi50cmltKCIiK24odCkudmFsKCkpfSxmaWxsZWQ6ZnVuY3Rpb24odCl7dmFyIGk9bih0KS52YWwoKTtyZXR1cm4gaSE9PW51bGwmJiEhbi50cmltKCIiK2kpfSx1bmNoZWNrZWQ6ZnVuY3Rpb24odCl7cmV0dXJuIW4odCkucHJvcCgiY2hlY2tlZCIpfX0pO24udmFsaWRhdG9yPWZ1bmN0aW9uKHQsaSl7dGhpcy5zZXR0aW5ncz1uLmV4dGVuZCghMCx7fSxuLnZhbGlkYXRvci5kZWZhdWx0cyx0KTt0aGlzLmN1cnJlbnRGb3JtPWk7dGhpcy5pbml0KCl9O24udmFsaWRhdG9yLmZvcm1hdD1mdW5jdGlvbih0LGkpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoPT09MT9mdW5jdGlvbigpe3ZhciBpPW4ubWFrZUFycmF5KGFyZ3VtZW50cyk7cmV0dXJuIGkudW5zaGlmdCh0KSxuLnZhbGlkYXRvci5mb3JtYXQuYXBwbHkodGhpcyxpKX06aT09PXVuZGVmaW5lZD90Oihhcmd1bWVudHMubGVuZ3RoPjImJmkuY29uc3RydWN0b3IhPT1BcnJheSYmKGk9bi5tYWtlQXJyYXkoYXJndW1lbnRzKS5zbGljZSgxKSksaS5jb25zdHJ1Y3RvciE9PUFycmF5JiYoaT1baV0pLG4uZWFjaChpLGZ1bmN0aW9uKG4saSl7dD10LnJlcGxhY2UobmV3IFJlZ0V4cCgiXFx7IituKyJcXH0iLCJnIiksZnVuY3Rpb24oKXtyZXR1cm4gaX0pfSksdCl9O24uZXh0ZW5kKG4udmFsaWRhdG9yLHtkZWZhdWx0czp7bWVzc2FnZXM6e30sZ3JvdXBzOnt9LHJ1bGVzOnt9LGVycm9yQ2xhc3M6ImVycm9yIixwZW5kaW5nQ2xhc3M6InBlbmRpbmciLHZhbGlkQ2xhc3M6InZhbGlkIixlcnJvckVsZW1lbnQ6ImxhYmVsIixmb2N1c0NsZWFudXA6ITEsZm9jdXNJbnZhbGlkOiEwLGVycm9yQ29udGFpbmVyOm4oW10pLGVycm9yTGFiZWxDb250YWluZXI6bihbXSksb25zdWJtaXQ6ITAsaWdub3JlOiI6aGlkZGVuIixpZ25vcmVUaXRsZTohMSxvbmZvY3VzaW46ZnVuY3Rpb24obil7dGhpcy5sYXN0QWN0aXZlPW47dGhpcy5zZXR0aW5ncy5mb2N1c0NsZWFudXAmJih0aGlzLnNldHRpbmdzLnVuaGlnaGxpZ2h0JiZ0aGlzLnNldHRpbmdzLnVuaGlnaGxpZ2h0LmNhbGwodGhpcyxuLHRoaXMuc2V0dGluZ3MuZXJyb3JDbGFzcyx0aGlzLnNldHRpbmdzLnZhbGlkQ2xhc3MpLHRoaXMuaGlkZVRoZXNlKHRoaXMuZXJyb3JzRm9yKG4pKSl9LG9uZm9jdXNvdXQ6ZnVuY3Rpb24obil7IXRoaXMuY2hlY2thYmxlKG4pJiYobi5uYW1lIGluIHRoaXMuc3VibWl0dGVkfHwhdGhpcy5vcHRpb25hbChuKSkmJnRoaXMuZWxlbWVudChuKX0sb25rZXl1cDpmdW5jdGlvbih0LGkpeyhpLndoaWNoIT09OXx8dGhpcy5lbGVtZW50VmFsdWUodCkhPT0iIikmJm4uaW5BcnJheShpLmtleUNvZGUsWzE2LDE3LDE4LDIwLDM1LDM2LDM3LDM4LDM5LDQwLDQ1LDE0NCwyMjVdKT09PS0xJiYodC5uYW1lIGluIHRoaXMuc3VibWl0dGVkfHx0Lm5hbWUgaW4gdGhpcy5pbnZhbGlkKSYmdGhpcy5lbGVtZW50KHQpfSxvbmNsaWNrOmZ1bmN0aW9uKG4pe24ubmFtZSBpbiB0aGlzLnN1Ym1pdHRlZD90aGlzLmVsZW1lbnQobik6bi5wYXJlbnROb2RlLm5hbWUgaW4gdGhpcy5zdWJtaXR0ZWQmJnRoaXMuZWxlbWVudChuLnBhcmVudE5vZGUpfSxoaWdobGlnaHQ6ZnVuY3Rpb24odCxpLHIpe3QudHlwZT09PSJyYWRpbyI/dGhpcy5maW5kQnlOYW1lKHQubmFtZSkuYWRkQ2xhc3MoaSkucmVtb3ZlQ2xhc3Mocik6bih0KS5hZGRDbGFzcyhpKS5yZW1vdmVDbGFzcyhyKX0sdW5oaWdobGlnaHQ6ZnVuY3Rpb24odCxpLHIpe3QudHlwZT09PSJyYWRpbyI/dGhpcy5maW5kQnlOYW1lKHQubmFtZSkucmVtb3ZlQ2xhc3MoaSkuYWRkQ2xhc3Mocik6bih0KS5yZW1vdmVDbGFzcyhpKS5hZGRDbGFzcyhyKX19LHNldERlZmF1bHRzOmZ1bmN0aW9uKHQpe24uZXh0ZW5kKG4udmFsaWRhdG9yLmRlZmF1bHRzLHQpfSxtZXNzYWdlczp7cmVxdWlyZWQ6IlRoaXMgZmllbGQgaXMgcmVxdWlyZWQuIixyZW1vdGU6IlBsZWFzZSBmaXggdGhpcyBmaWVsZC4iLGVtYWlsOiJQbGVhc2UgZW50ZXIgYSB2YWxpZCBlbWFpbCBhZGRyZXNzLiIsdXJsOiJQbGVhc2UgZW50ZXIgYSB2YWxpZCBVUkwuIixkYXRlOiJQbGVhc2UgZW50ZXIgYSB2YWxpZCBkYXRlLiIsZGF0ZUlTTzoiUGxlYXNlIGVudGVyIGEgdmFsaWQgZGF0ZSAoSVNPKS4iLG51bWJlcjoiUGxlYXNlIGVudGVyIGEgdmFsaWQgbnVtYmVyLiIsZGlnaXRzOiJQbGVhc2UgZW50ZXIgb25seSBkaWdpdHMuIixlcXVhbFRvOiJQbGVhc2UgZW50ZXIgdGhlIHNhbWUgdmFsdWUgYWdhaW4uIixtYXhsZW5ndGg6bi52YWxpZGF0b3IuZm9ybWF0KCJQbGVhc2UgZW50ZXIgbm8gbW9yZSB0aGFuIHswfSBjaGFyYWN0ZXJzLiIpLG1pbmxlbmd0aDpuLnZhbGlkYXRvci5mb3JtYXQoIlBsZWFzZSBlbnRlciBhdCBsZWFzdCB7MH0gY2hhcmFjdGVycy4iKSxyYW5nZWxlbmd0aDpuLnZhbGlkYXRvci5mb3JtYXQoIlBsZWFzZSBlbnRlciBhIHZhbHVlIGJldHdlZW4gezB9IGFuZCB7MX0gY2hhcmFjdGVycyBsb25nLiIpLHJhbmdlOm4udmFsaWRhdG9yLmZvcm1hdCgiUGxlYXNlIGVudGVyIGEgdmFsdWUgYmV0d2VlbiB7MH0gYW5kIHsxfS4iKSxtYXg6bi52YWxpZGF0b3IuZm9ybWF0KCJQbGVhc2UgZW50ZXIgYSB2YWx1ZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gezB9LiIpLG1pbjpuLnZhbGlkYXRvci5mb3JtYXQoIlBsZWFzZSBlbnRlciBhIHZhbHVlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB7MH0uIiksc3RlcDpuLnZhbGlkYXRvci5mb3JtYXQoIlBsZWFzZSBlbnRlciBhIG11bHRpcGxlIG9mIHswfS4iKX0sYXV0b0NyZWF0ZVJhbmdlczohMSxwcm90b3R5cGU6e2luaXQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBpKHQpeyF0aGlzLmZvcm0mJnRoaXMuaGFzQXR0cmlidXRlKCJjb250ZW50ZWRpdGFibGUiKSYmKHRoaXMuZm9ybT1uKHRoaXMpLmNsb3Nlc3QoImZvcm0iKVswXSx0aGlzLm5hbWU9bih0aGlzKS5hdHRyKCJuYW1lIikpO3ZhciByPW4uZGF0YSh0aGlzLmZvcm0sInZhbGlkYXRvciIpLHU9Im9uIit0LnR5cGUucmVwbGFjZSgvXnZhbGlkYXRlLywiIiksaT1yLnNldHRpbmdzO2lbdV0mJiFuKHRoaXMpLmlzKGkuaWdub3JlKSYmaVt1XS5jYWxsKHIsdGhpcyx0KX10aGlzLmxhYmVsQ29udGFpbmVyPW4odGhpcy5zZXR0aW5ncy5lcnJvckxhYmVsQ29udGFpbmVyKTt0aGlzLmVycm9yQ29udGV4dD10aGlzLmxhYmVsQ29udGFpbmVyLmxlbmd0aCYmdGhpcy5sYWJlbENvbnRhaW5lcnx8bih0aGlzLmN1cnJlbnRGb3JtKTt0aGlzLmNvbnRhaW5lcnM9bih0aGlzLnNldHRpbmdzLmVycm9yQ29udGFpbmVyKS5hZGQodGhpcy5zZXR0aW5ncy5lcnJvckxhYmVsQ29udGFpbmVyKTt0aGlzLnN1Ym1pdHRlZD17fTt0aGlzLnZhbHVlQ2FjaGU9e307dGhpcy5wZW5kaW5nUmVxdWVzdD0wO3RoaXMucGVuZGluZz17fTt0aGlzLmludmFsaWQ9e307dGhpcy5yZXNldCgpO3ZhciByPXRoaXMuZ3JvdXBzPXt9LHQ7bi5lYWNoKHRoaXMuc2V0dGluZ3MuZ3JvdXBzLGZ1bmN0aW9uKHQsaSl7dHlwZW9mIGk9PSJzdHJpbmciJiYoaT1pLnNwbGl0KC9ccy8pKTtuLmVhY2goaSxmdW5jdGlvbihuLGkpe3JbaV09dH0pfSk7dD10aGlzLnNldHRpbmdzLnJ1bGVzO24uZWFjaCh0LGZ1bmN0aW9uKGkscil7dFtpXT1uLnZhbGlkYXRvci5ub3JtYWxpemVSdWxlKHIpfSk7bih0aGlzLmN1cnJlbnRGb3JtKS5vbigiZm9jdXNpbi52YWxpZGF0ZSBmb2N1c291dC52YWxpZGF0ZSBrZXl1cC52YWxpZGF0ZSIsIjp0ZXh0LCBbdHlwZT0ncGFzc3dvcmQnXSwgW3R5cGU9J2ZpbGUnXSwgc2VsZWN0LCB0ZXh0YXJlYSwgW3R5cGU9J251bWJlciddLCBbdHlwZT0nc2VhcmNoJ10sIFt0eXBlPSd0ZWwnXSwgW3R5cGU9J3VybCddLCBbdHlwZT0nZW1haWwnXSwgW3R5cGU9J2RhdGV0aW1lJ10sIFt0eXBlPSdkYXRlJ10sIFt0eXBlPSdtb250aCddLCBbdHlwZT0nd2VlayddLCBbdHlwZT0ndGltZSddLCBbdHlwZT0nZGF0ZXRpbWUtbG9jYWwnXSwgW3R5cGU9J3JhbmdlJ10sIFt0eXBlPSdjb2xvciddLCBbdHlwZT0ncmFkaW8nXSwgW3R5cGU9J2NoZWNrYm94J10sIFtjb250ZW50ZWRpdGFibGVdLCBbdHlwZT0nYnV0dG9uJ10iLGkpLm9uKCJjbGljay52YWxpZGF0ZSIsInNlbGVjdCwgb3B0aW9uLCBbdHlwZT0ncmFkaW8nXSwgW3R5cGU9J2NoZWNrYm94J10iLGkpO2lmKHRoaXMuc2V0dGluZ3MuaW52YWxpZEhhbmRsZXIpbih0aGlzLmN1cnJlbnRGb3JtKS5vbigiaW52YWxpZC1mb3JtLnZhbGlkYXRlIix0aGlzLnNldHRpbmdzLmludmFsaWRIYW5kbGVyKX0sZm9ybTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNoZWNrRm9ybSgpLG4uZXh0ZW5kKHRoaXMuc3VibWl0dGVkLHRoaXMuZXJyb3JNYXApLHRoaXMuaW52YWxpZD1uLmV4dGVuZCh7fSx0aGlzLmVycm9yTWFwKSx0aGlzLnZhbGlkKCl8fG4odGhpcy5jdXJyZW50Rm9ybSkudHJpZ2dlckhhbmRsZXIoImludmFsaWQtZm9ybSIsW3RoaXNdKSx0aGlzLnNob3dFcnJvcnMoKSx0aGlzLnZhbGlkKCl9LGNoZWNrRm9ybTpmdW5jdGlvbigpe3RoaXMucHJlcGFyZUZvcm0oKTtmb3IodmFyIG49MCx0PXRoaXMuY3VycmVudEVsZW1lbnRzPXRoaXMuZWxlbWVudHMoKTt0W25dO24rKyl0aGlzLmNoZWNrKHRbbl0pO3JldHVybiB0aGlzLnZhbGlkKCl9LGVsZW1lbnQ6ZnVuY3Rpb24odCl7dmFyIGk9dGhpcy5jbGVhbih0KSxyPXRoaXMudmFsaWRhdGlvblRhcmdldEZvcihpKSx1PXRoaXMsZj0hMCxlLG87cmV0dXJuIHI9PT11bmRlZmluZWQ/ZGVsZXRlIHRoaXMuaW52YWxpZFtpLm5hbWVdOih0aGlzLnByZXBhcmVFbGVtZW50KHIpLHRoaXMuY3VycmVudEVsZW1lbnRzPW4ociksbz10aGlzLmdyb3Vwc1tyLm5hbWVdLG8mJm4uZWFjaCh0aGlzLmdyb3VwcyxmdW5jdGlvbihuLHQpe3Q9PT1vJiZuIT09ci5uYW1lJiYoaT11LnZhbGlkYXRpb25UYXJnZXRGb3IodS5jbGVhbih1LmZpbmRCeU5hbWUobikpKSxpJiZpLm5hbWUgaW4gdS5pbnZhbGlkJiYodS5jdXJyZW50RWxlbWVudHMucHVzaChpKSxmPXUuY2hlY2soaSkmJmYpKX0pLGU9dGhpcy5jaGVjayhyKSE9PSExLGY9ZiYmZSx0aGlzLmludmFsaWRbci5uYW1lXT1lPyExOiEwLHRoaXMubnVtYmVyT2ZJbnZhbGlkcygpfHwodGhpcy50b0hpZGU9dGhpcy50b0hpZGUuYWRkKHRoaXMuY29udGFpbmVycykpLHRoaXMuc2hvd0Vycm9ycygpLG4odCkuYXR0cigiYXJpYS1pbnZhbGlkIiwhZSkpLGZ9LHNob3dFcnJvcnM6ZnVuY3Rpb24odCl7aWYodCl7dmFyIGk9dGhpcztuLmV4dGVuZCh0aGlzLmVycm9yTWFwLHQpO3RoaXMuZXJyb3JMaXN0PW4ubWFwKHRoaXMuZXJyb3JNYXAsZnVuY3Rpb24obix0KXtyZXR1cm57bWVzc2FnZTpuLGVsZW1lbnQ6aS5maW5kQnlOYW1lKHQpWzBdfX0pO3RoaXMuc3VjY2Vzc0xpc3Q9bi5ncmVwKHRoaXMuc3VjY2Vzc0xpc3QsZnVuY3Rpb24obil7cmV0dXJuIShuLm5hbWUgaW4gdCl9KX10aGlzLnNldHRpbmdzLnNob3dFcnJvcnM/dGhpcy5zZXR0aW5ncy5zaG93RXJyb3JzLmNhbGwodGhpcyx0aGlzLmVycm9yTWFwLHRoaXMuZXJyb3JMaXN0KTp0aGlzLmRlZmF1bHRTaG93RXJyb3JzKCl9LHJlc2V0Rm9ybTpmdW5jdGlvbigpe24uZm4ucmVzZXRGb3JtJiZuKHRoaXMuY3VycmVudEZvcm0pLnJlc2V0Rm9ybSgpO3RoaXMuaW52YWxpZD17fTt0aGlzLnN1Ym1pdHRlZD17fTt0aGlzLnByZXBhcmVGb3JtKCk7dGhpcy5oaWRlRXJyb3JzKCk7dmFyIHQ9dGhpcy5lbGVtZW50cygpLnJlbW92ZURhdGEoInByZXZpb3VzVmFsdWUiKS5yZW1vdmVBdHRyKCJhcmlhLWludmFsaWQiKTt0aGlzLnJlc2V0RWxlbWVudHModCl9LHJlc2V0RWxlbWVudHM6ZnVuY3Rpb24obil7dmFyIHQ7aWYodGhpcy5zZXR0aW5ncy51bmhpZ2hsaWdodClmb3IodD0wO25bdF07dCsrKXRoaXMuc2V0dGluZ3MudW5oaWdobGlnaHQuY2FsbCh0aGlzLG5bdF0sdGhpcy5zZXR0aW5ncy5lcnJvckNsYXNzLCIiKSx0aGlzLmZpbmRCeU5hbWUoblt0XS5uYW1lKS5yZW1vdmVDbGFzcyh0aGlzLnNldHRpbmdzLnZhbGlkQ2xhc3MpO2Vsc2Ugbi5yZW1vdmVDbGFzcyh0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MpLnJlbW92ZUNsYXNzKHRoaXMuc2V0dGluZ3MudmFsaWRDbGFzcyl9LG51bWJlck9mSW52YWxpZHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vYmplY3RMZW5ndGgodGhpcy5pbnZhbGlkKX0sb2JqZWN0TGVuZ3RoOmZ1bmN0aW9uKG4pe3ZhciBpPTA7Zm9yKHZhciB0IGluIG4pblt0XSE9PXVuZGVmaW5lZCYmblt0XSE9PW51bGwmJm5bdF0hPT0hMSYmaSsrO3JldHVybiBpfSxoaWRlRXJyb3JzOmZ1bmN0aW9uKCl7dGhpcy5oaWRlVGhlc2UodGhpcy50b0hpZGUpfSxoaWRlVGhlc2U6ZnVuY3Rpb24obil7bi5ub3QodGhpcy5jb250YWluZXJzKS50ZXh0KCIiKTt0aGlzLmFkZFdyYXBwZXIobikuaGlkZSgpfSx2YWxpZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNpemUoKT09PTB9LHNpemU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcnJvckxpc3QubGVuZ3RofSxmb2N1c0ludmFsaWQ6ZnVuY3Rpb24oKXtpZih0aGlzLnNldHRpbmdzLmZvY3VzSW52YWxpZCl0cnl7bih0aGlzLmZpbmRMYXN0QWN0aXZlKCl8fHRoaXMuZXJyb3JMaXN0Lmxlbmd0aCYmdGhpcy5lcnJvckxpc3RbMF0uZWxlbWVudHx8W10pLmZpbHRlcigiOnZpc2libGUiKS5mb2N1cygpLnRyaWdnZXIoImZvY3VzaW4iKX1jYXRjaCh0KXt9fSxmaW5kTGFzdEFjdGl2ZTpmdW5jdGlvbigpe3ZhciB0PXRoaXMubGFzdEFjdGl2ZTtyZXR1cm4gdCYmbi5ncmVwKHRoaXMuZXJyb3JMaXN0LGZ1bmN0aW9uKG4pe3JldHVybiBuLmVsZW1lbnQubmFtZT09PXQubmFtZX0pLmxlbmd0aD09PTEmJnR9LGVsZW1lbnRzOmZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxpPXt9O3JldHVybiBuKHRoaXMuY3VycmVudEZvcm0pLmZpbmQoImlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCBbY29udGVudGVkaXRhYmxlXSIpLm5vdCgiOnN1Ym1pdCwgOnJlc2V0LCA6aW1hZ2UsIDpkaXNhYmxlZCIpLm5vdCh0aGlzLnNldHRpbmdzLmlnbm9yZSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIHI9dGhpcy5uYW1lfHxuKHRoaXMpLmF0dHIoIm5hbWUiKTtyZXR1cm4oIXImJnQuc2V0dGluZ3MuZGVidWcmJndpbmRvdy5jb25zb2xlJiZjb25zb2xlLmVycm9yKCIlbyBoYXMgbm8gbmFtZSBhc3NpZ25lZCIsdGhpcyksdGhpcy5oYXNBdHRyaWJ1dGUoImNvbnRlbnRlZGl0YWJsZSIpJiYodGhpcy5mb3JtPW4odGhpcykuY2xvc2VzdCgiZm9ybSIpWzBdLHRoaXMubmFtZT1yKSxyIGluIGl8fCF0Lm9iamVjdExlbmd0aChuKHRoaXMpLnJ1bGVzKCkpKT8hMTooaVtyXT0hMCwhMCl9KX0sY2xlYW46ZnVuY3Rpb24odCl7cmV0dXJuIG4odClbMF19LGVycm9yczpmdW5jdGlvbigpe3ZhciB0PXRoaXMuc2V0dGluZ3MuZXJyb3JDbGFzcy5zcGxpdCgiICIpLmpvaW4oIi4iKTtyZXR1cm4gbih0aGlzLnNldHRpbmdzLmVycm9yRWxlbWVudCsiLiIrdCx0aGlzLmVycm9yQ29udGV4dCl9LHJlc2V0SW50ZXJuYWxzOmZ1bmN0aW9uKCl7dGhpcy5zdWNjZXNzTGlzdD1bXTt0aGlzLmVycm9yTGlzdD1bXTt0aGlzLmVycm9yTWFwPXt9O3RoaXMudG9TaG93PW4oW10pO3RoaXMudG9IaWRlPW4oW10pfSxyZXNldDpmdW5jdGlvbigpe3RoaXMucmVzZXRJbnRlcm5hbHMoKTt0aGlzLmN1cnJlbnRFbGVtZW50cz1uKFtdKX0scHJlcGFyZUZvcm06ZnVuY3Rpb24oKXt0aGlzLnJlc2V0KCk7dGhpcy50b0hpZGU9dGhpcy5lcnJvcnMoKS5hZGQodGhpcy5jb250YWluZXJzKX0scHJlcGFyZUVsZW1lbnQ6ZnVuY3Rpb24obil7dGhpcy5yZXNldCgpO3RoaXMudG9IaWRlPXRoaXMuZXJyb3JzRm9yKG4pfSxlbGVtZW50VmFsdWU6ZnVuY3Rpb24odCl7dmFyIGY9bih0KSx1PXQudHlwZSxpLHI7cmV0dXJuIHU9PT0icmFkaW8ifHx1PT09ImNoZWNrYm94Ij90aGlzLmZpbmRCeU5hbWUodC5uYW1lKS5maWx0ZXIoIjpjaGVja2VkIikudmFsKCk6dT09PSJudW1iZXIiJiZ0eXBlb2YgdC52YWxpZGl0eSE9InVuZGVmaW5lZCI/dC52YWxpZGl0eS5iYWRJbnB1dD8iTmFOIjpmLnZhbCgpOihpPXQuaGFzQXR0cmlidXRlKCJjb250ZW50ZWRpdGFibGUiKT9mLnRleHQoKTpmLnZhbCgpLHU9PT0iZmlsZSIpP2kuc3Vic3RyKDAsMTIpPT09IkM6XFxmYWtlcGF0aFxcIj9pLnN1YnN0cigxMik6KHI9aS5sYXN0SW5kZXhPZigiLyIpLHI+PTApP2kuc3Vic3RyKHIrMSk6KHI9aS5sYXN0SW5kZXhPZigiXFwiKSxyPj0wKT9pLnN1YnN0cihyKzEpOmk6dHlwZW9mIGk9PSJzdHJpbmciP2kucmVwbGFjZSgvXHIvZywiIik6aX0sY2hlY2s6ZnVuY3Rpb24odCl7dD10aGlzLnZhbGlkYXRpb25UYXJnZXRGb3IodGhpcy5jbGVhbih0KSk7dmFyIGk9bih0KS5ydWxlcygpLGM9bi5tYXAoaSxmdW5jdGlvbihuLHQpe3JldHVybiB0fSkubGVuZ3RoLGg9ITEsdT10aGlzLmVsZW1lbnRWYWx1ZSh0KSxmLGUscixvO2lmKHR5cGVvZiBpLm5vcm1hbGl6ZXI9PSJmdW5jdGlvbiI/bz1pLm5vcm1hbGl6ZXI6dHlwZW9mIHRoaXMuc2V0dGluZ3Mubm9ybWFsaXplcj09ImZ1bmN0aW9uIiYmKG89dGhpcy5zZXR0aW5ncy5ub3JtYWxpemVyKSxvKXtpZih1PW8uY2FsbCh0LHUpLHR5cGVvZiB1IT0ic3RyaW5nIil0aHJvdyBuZXcgVHlwZUVycm9yKCJUaGUgbm9ybWFsaXplciBzaG91bGQgcmV0dXJuIGEgc3RyaW5nIHZhbHVlLiIpO2RlbGV0ZSBpLm5vcm1hbGl6ZXJ9Zm9yKGUgaW4gaSl7cj17bWV0aG9kOmUscGFyYW1ldGVyczppW2VdfTt0cnl7aWYoZj1uLnZhbGlkYXRvci5tZXRob2RzW2VdLmNhbGwodGhpcyx1LHQsci5wYXJhbWV0ZXJzKSxmPT09ImRlcGVuZGVuY3ktbWlzbWF0Y2giJiZjPT09MSl7aD0hMDtjb250aW51ZX1pZihoPSExLGY9PT0icGVuZGluZyIpe3RoaXMudG9IaWRlPXRoaXMudG9IaWRlLm5vdCh0aGlzLmVycm9yc0Zvcih0KSk7cmV0dXJufWlmKCFmKXJldHVybiB0aGlzLmZvcm1hdEFuZEFkZCh0LHIpLCExfWNhdGNoKHMpe3RoaXMuc2V0dGluZ3MuZGVidWcmJndpbmRvdy5jb25zb2xlJiZjb25zb2xlLmxvZygiRXhjZXB0aW9uIG9jY3VycmVkIHdoZW4gY2hlY2tpbmcgZWxlbWVudCAiK3QuaWQrIiwgY2hlY2sgdGhlICciK3IubWV0aG9kKyInIG1ldGhvZC4iLHMpO3MgaW5zdGFuY2VvZiBUeXBlRXJyb3ImJihzLm1lc3NhZ2UrPSIuICBFeGNlcHRpb24gb2NjdXJyZWQgd2hlbiBjaGVja2luZyBlbGVtZW50ICIrdC5pZCsiLCBjaGVjayB0aGUgJyIrci5tZXRob2QrIicgbWV0aG9kLiIpO3Rocm93IHM7fX1pZighaClyZXR1cm4gdGhpcy5vYmplY3RMZW5ndGgoaSkmJnRoaXMuc3VjY2Vzc0xpc3QucHVzaCh0KSwhMH0sY3VzdG9tRGF0YU1lc3NhZ2U6ZnVuY3Rpb24odCxpKXtyZXR1cm4gbih0KS5kYXRhKCJtc2ciK2kuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkraS5zdWJzdHJpbmcoMSkudG9Mb3dlckNhc2UoKSl8fG4odCkuZGF0YSgibXNnIil9LGN1c3RvbU1lc3NhZ2U6ZnVuY3Rpb24obix0KXt2YXIgaT10aGlzLnNldHRpbmdzLm1lc3NhZ2VzW25dO3JldHVybiBpJiYoaS5jb25zdHJ1Y3Rvcj09PVN0cmluZz9pOmlbdF0pfSxmaW5kRGVmaW5lZDpmdW5jdGlvbigpe2Zvcih2YXIgbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspaWYoYXJndW1lbnRzW25dIT09dW5kZWZpbmVkKXJldHVybiBhcmd1bWVudHNbbl07cmV0dXJuIHVuZGVmaW5lZH0sZGVmYXVsdE1lc3NhZ2U6ZnVuY3Rpb24odCxpKXt0eXBlb2YgaT09InN0cmluZyImJihpPXttZXRob2Q6aX0pO3ZhciByPXRoaXMuZmluZERlZmluZWQodGhpcy5jdXN0b21NZXNzYWdlKHQubmFtZSxpLm1ldGhvZCksdGhpcy5jdXN0b21EYXRhTWVzc2FnZSh0LGkubWV0aG9kKSwhdGhpcy5zZXR0aW5ncy5pZ25vcmVUaXRsZSYmdC50aXRsZXx8dW5kZWZpbmVkLG4udmFsaWRhdG9yLm1lc3NhZ2VzW2kubWV0aG9kXSwiPHN0cm9uZz5XYXJuaW5nOiBObyBtZXNzYWdlIGRlZmluZWQgZm9yICIrdC5uYW1lKyI8XC9zdHJvbmc+IiksdT0vXCQ/XHsoXGQrKVx9L2c7cmV0dXJuIHR5cGVvZiByPT0iZnVuY3Rpb24iP3I9ci5jYWxsKHRoaXMsaS5wYXJhbWV0ZXJzLHQpOnUudGVzdChyKSYmKHI9bi52YWxpZGF0b3IuZm9ybWF0KHIucmVwbGFjZSh1LCJ7JDF9IiksaS5wYXJhbWV0ZXJzKSkscn0sZm9ybWF0QW5kQWRkOmZ1bmN0aW9uKG4sdCl7dmFyIGk9dGhpcy5kZWZhdWx0TWVzc2FnZShuLHQpO3RoaXMuZXJyb3JMaXN0LnB1c2goe21lc3NhZ2U6aSxlbGVtZW50Om4sbWV0aG9kOnQubWV0aG9kfSk7dGhpcy5lcnJvck1hcFtuLm5hbWVdPWk7dGhpcy5zdWJtaXR0ZWRbbi5uYW1lXT1pfSxhZGRXcmFwcGVyOmZ1bmN0aW9uKG4pe3JldHVybiB0aGlzLnNldHRpbmdzLndyYXBwZXImJihuPW4uYWRkKG4ucGFyZW50KHRoaXMuc2V0dGluZ3Mud3JhcHBlcikpKSxufSxkZWZhdWx0U2hvd0Vycm9yczpmdW5jdGlvbigpe2Zvcih2YXIgaSx0LG49MDt0aGlzLmVycm9yTGlzdFtuXTtuKyspdD10aGlzLmVycm9yTGlzdFtuXSx0aGlzLnNldHRpbmdzLmhpZ2hsaWdodCYmdGhpcy5zZXR0aW5ncy5oaWdobGlnaHQuY2FsbCh0aGlzLHQuZWxlbWVudCx0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MsdGhpcy5zZXR0aW5ncy52YWxpZENsYXNzKSx0aGlzLnNob3dMYWJlbCh0LmVsZW1lbnQsdC5tZXNzYWdlKTtpZih0aGlzLmVycm9yTGlzdC5sZW5ndGgmJih0aGlzLnRvU2hvdz10aGlzLnRvU2hvdy5hZGQodGhpcy5jb250YWluZXJzKSksdGhpcy5zZXR0aW5ncy5zdWNjZXNzKWZvcihuPTA7dGhpcy5zdWNjZXNzTGlzdFtuXTtuKyspdGhpcy5zaG93TGFiZWwodGhpcy5zdWNjZXNzTGlzdFtuXSk7aWYodGhpcy5zZXR0aW5ncy51bmhpZ2hsaWdodClmb3Iobj0wLGk9dGhpcy52YWxpZEVsZW1lbnRzKCk7aVtuXTtuKyspdGhpcy5zZXR0aW5ncy51bmhpZ2hsaWdodC5jYWxsKHRoaXMsaVtuXSx0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MsdGhpcy5zZXR0aW5ncy52YWxpZENsYXNzKTt0aGlzLnRvSGlkZT10aGlzLnRvSGlkZS5ub3QodGhpcy50b1Nob3cpO3RoaXMuaGlkZUVycm9ycygpO3RoaXMuYWRkV3JhcHBlcih0aGlzLnRvU2hvdykuc2hvdygpfSx2YWxpZEVsZW1lbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudEVsZW1lbnRzLm5vdCh0aGlzLmludmFsaWRFbGVtZW50cygpKX0saW52YWxpZEVsZW1lbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIG4odGhpcy5lcnJvckxpc3QpLm1hcChmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnR9KX0sc2hvd0xhYmVsOmZ1bmN0aW9uKHQsaSl7dmFyIHUscyxlLG8scj10aGlzLmVycm9yc0Zvcih0KSxoPXRoaXMuaWRPck5hbWUodCksZj1uKHQpLmF0dHIoImFyaWEtZGVzY3JpYmVkYnkiKTtyLmxlbmd0aD8oci5yZW1vdmVDbGFzcyh0aGlzLnNldHRpbmdzLnZhbGlkQ2xhc3MpLmFkZENsYXNzKHRoaXMuc2V0dGluZ3MuZXJyb3JDbGFzcyksci5odG1sKGkpKToocj1uKCI8Iit0aGlzLnNldHRpbmdzLmVycm9yRWxlbWVudCsiPiIpLmF0dHIoImlkIixoKyItZXJyb3IiKS5hZGRDbGFzcyh0aGlzLnNldHRpbmdzLmVycm9yQ2xhc3MpLmh0bWwoaXx8IiIpLHU9cix0aGlzLnNldHRpbmdzLndyYXBwZXImJih1PXIuaGlkZSgpLnNob3coKS53cmFwKCI8Iit0aGlzLnNldHRpbmdzLndyYXBwZXIrIi8+IikucGFyZW50KCkpLHRoaXMubGFiZWxDb250YWluZXIubGVuZ3RoP3RoaXMubGFiZWxDb250YWluZXIuYXBwZW5kKHUpOnRoaXMuc2V0dGluZ3MuZXJyb3JQbGFjZW1lbnQ/dGhpcy5zZXR0aW5ncy5lcnJvclBsYWNlbWVudC5jYWxsKHRoaXMsdSxuKHQpKTp1Lmluc2VydEFmdGVyKHQpLHIuaXMoImxhYmVsIik/ci5hdHRyKCJmb3IiLGgpOnIucGFyZW50cygibGFiZWxbZm9yPSciK3RoaXMuZXNjYXBlQ3NzTWV0YShoKSsiJ10iKS5sZW5ndGg9PT0wJiYoZT1yLmF0dHIoImlkIiksZj9mLm1hdGNoKG5ldyBSZWdFeHAoIlxcYiIrdGhpcy5lc2NhcGVDc3NNZXRhKGUpKyJcXGIiKSl8fChmKz0iICIrZSk6Zj1lLG4odCkuYXR0cigiYXJpYS1kZXNjcmliZWRieSIsZikscz10aGlzLmdyb3Vwc1t0Lm5hbWVdLHMmJihvPXRoaXMsbi5lYWNoKG8uZ3JvdXBzLGZ1bmN0aW9uKHQsaSl7aT09PXMmJm4oIltuYW1lPSciK28uZXNjYXBlQ3NzTWV0YSh0KSsiJ10iLG8uY3VycmVudEZvcm0pLmF0dHIoImFyaWEtZGVzY3JpYmVkYnkiLHIuYXR0cigiaWQiKSl9KSkpKTshaSYmdGhpcy5zZXR0aW5ncy5zdWNjZXNzJiYoci50ZXh0KCIiKSx0eXBlb2YgdGhpcy5zZXR0aW5ncy5zdWNjZXNzPT0ic3RyaW5nIj9yLmFkZENsYXNzKHRoaXMuc2V0dGluZ3Muc3VjY2Vzcyk6dGhpcy5zZXR0aW5ncy5zdWNjZXNzKHIsdCkpO3RoaXMudG9TaG93PXRoaXMudG9TaG93LmFkZChyKX0sZXJyb3JzRm9yOmZ1bmN0aW9uKHQpe3ZhciByPXRoaXMuZXNjYXBlQ3NzTWV0YSh0aGlzLmlkT3JOYW1lKHQpKSx1PW4odCkuYXR0cigiYXJpYS1kZXNjcmliZWRieSIpLGk9ImxhYmVsW2Zvcj0nIityKyInXSwgbGFiZWxbZm9yPSciK3IrIiddICoiO3JldHVybiB1JiYoaT1pKyIsICMiK3RoaXMuZXNjYXBlQ3NzTWV0YSh1KS5yZXBsYWNlKC9ccysvZywiLCAjIikpLHRoaXMuZXJyb3JzKCkuZmlsdGVyKGkpfSxlc2NhcGVDc3NNZXRhOmZ1bmN0aW9uKG4pe3JldHVybiBuLnJlcGxhY2UoLyhbXFwhIiMkJSYnKCkqKywuLzo7PD0+P0BcW1xdXmB7fH1+XSkvZywiXFwkMSIpfSxpZE9yTmFtZTpmdW5jdGlvbihuKXtyZXR1cm4gdGhpcy5ncm91cHNbbi5uYW1lXXx8KHRoaXMuY2hlY2thYmxlKG4pP24ubmFtZTpuLmlkfHxuLm5hbWUpfSx2YWxpZGF0aW9uVGFyZ2V0Rm9yOmZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNoZWNrYWJsZSh0KSYmKHQ9dGhpcy5maW5kQnlOYW1lKHQubmFtZSkpLG4odCkubm90KHRoaXMuc2V0dGluZ3MuaWdub3JlKVswXX0sY2hlY2thYmxlOmZ1bmN0aW9uKG4pe3JldHVybi9yYWRpb3xjaGVja2JveC9pLnRlc3Qobi50eXBlKX0sZmluZEJ5TmFtZTpmdW5jdGlvbih0KXtyZXR1cm4gbih0aGlzLmN1cnJlbnRGb3JtKS5maW5kKCJbbmFtZT0nIit0aGlzLmVzY2FwZUNzc01ldGEodCkrIiddIil9LGdldExlbmd0aDpmdW5jdGlvbih0LGkpe3N3aXRjaChpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe2Nhc2Uic2VsZWN0IjpyZXR1cm4gbigib3B0aW9uOnNlbGVjdGVkIixpKS5sZW5ndGg7Y2FzZSJpbnB1dCI6aWYodGhpcy5jaGVja2FibGUoaSkpcmV0dXJuIHRoaXMuZmluZEJ5TmFtZShpLm5hbWUpLmZpbHRlcigiOmNoZWNrZWQiKS5sZW5ndGh9cmV0dXJuIHQubGVuZ3RofSxkZXBlbmQ6ZnVuY3Rpb24obix0KXtyZXR1cm4gdGhpcy5kZXBlbmRUeXBlc1t0eXBlb2Ygbl0/dGhpcy5kZXBlbmRUeXBlc1t0eXBlb2Ygbl0obix0KTohMH0sZGVwZW5kVHlwZXM6e2Jvb2xlYW46ZnVuY3Rpb24obil7cmV0dXJuIG59LHN0cmluZzpmdW5jdGlvbih0LGkpe3JldHVybiEhbih0LGkuZm9ybSkubGVuZ3RofSwiZnVuY3Rpb24iOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIG4odCl9fSxvcHRpb25hbDpmdW5jdGlvbih0KXt2YXIgaT10aGlzLmVsZW1lbnRWYWx1ZSh0KTtyZXR1cm4hbi52YWxpZGF0b3IubWV0aG9kcy5yZXF1aXJlZC5jYWxsKHRoaXMsaSx0KSYmImRlcGVuZGVuY3ktbWlzbWF0Y2gifSxzdGFydFJlcXVlc3Q6ZnVuY3Rpb24odCl7dGhpcy5wZW5kaW5nW3QubmFtZV18fCh0aGlzLnBlbmRpbmdSZXF1ZXN0Kyssbih0KS5hZGRDbGFzcyh0aGlzLnNldHRpbmdzLnBlbmRpbmdDbGFzcyksdGhpcy5wZW5kaW5nW3QubmFtZV09ITApfSxzdG9wUmVxdWVzdDpmdW5jdGlvbih0LGkpe3RoaXMucGVuZGluZ1JlcXVlc3QtLTt0aGlzLnBlbmRpbmdSZXF1ZXN0PDAmJih0aGlzLnBlbmRpbmdSZXF1ZXN0PTApO2RlbGV0ZSB0aGlzLnBlbmRpbmdbdC5uYW1lXTtuKHQpLnJlbW92ZUNsYXNzKHRoaXMuc2V0dGluZ3MucGVuZGluZ0NsYXNzKTtpJiZ0aGlzLnBlbmRpbmdSZXF1ZXN0PT09MCYmdGhpcy5mb3JtU3VibWl0dGVkJiZ0aGlzLmZvcm0oKT8obih0aGlzLmN1cnJlbnRGb3JtKS5zdWJtaXQoKSx0aGlzLnN1Ym1pdEJ1dHRvbiYmbigiaW5wdXQ6aGlkZGVuW25hbWU9JyIrdGhpcy5zdWJtaXRCdXR0b24ubmFtZSsiJ10iLHRoaXMuY3VycmVudEZvcm0pLnJlbW92ZSgpLHRoaXMuZm9ybVN1Ym1pdHRlZD0hMSk6IWkmJnRoaXMucGVuZGluZ1JlcXVlc3Q9PT0wJiZ0aGlzLmZvcm1TdWJtaXR0ZWQmJihuKHRoaXMuY3VycmVudEZvcm0pLnRyaWdnZXJIYW5kbGVyKCJpbnZhbGlkLWZvcm0iLFt0aGlzXSksdGhpcy5mb3JtU3VibWl0dGVkPSExKX0scHJldmlvdXNWYWx1ZTpmdW5jdGlvbih0LGkpe3JldHVybiBpPXR5cGVvZiBpPT0ic3RyaW5nIiYmaXx8InJlbW90ZSIsbi5kYXRhKHQsInByZXZpb3VzVmFsdWUiKXx8bi5kYXRhKHQsInByZXZpb3VzVmFsdWUiLHtvbGQ6bnVsbCx2YWxpZDohMCxtZXNzYWdlOnRoaXMuZGVmYXVsdE1lc3NhZ2UodCx7bWV0aG9kOml9KX0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5yZXNldEZvcm0oKTtuKHRoaXMuY3VycmVudEZvcm0pLm9mZigiLnZhbGlkYXRlIikucmVtb3ZlRGF0YSgidmFsaWRhdG9yIikuZmluZCgiLnZhbGlkYXRlLWVxdWFsVG8tYmx1ciIpLm9mZigiLnZhbGlkYXRlLWVxdWFsVG8iKS5yZW1vdmVDbGFzcygidmFsaWRhdGUtZXF1YWxUby1ibHVyIil9fSxjbGFzc1J1bGVTZXR0aW5nczp7cmVxdWlyZWQ6e3JlcXVpcmVkOiEwfSxlbWFpbDp7ZW1haWw6ITB9LHVybDp7dXJsOiEwfSxkYXRlOntkYXRlOiEwfSxkYXRlSVNPOntkYXRlSVNPOiEwfSxudW1iZXI6e251bWJlcjohMH0sZGlnaXRzOntkaWdpdHM6ITB9LGNyZWRpdGNhcmQ6e2NyZWRpdGNhcmQ6ITB9fSxhZGRDbGFzc1J1bGVzOmZ1bmN0aW9uKHQsaSl7dC5jb25zdHJ1Y3Rvcj09PVN0cmluZz90aGlzLmNsYXNzUnVsZVNldHRpbmdzW3RdPWk6bi5leHRlbmQodGhpcy5jbGFzc1J1bGVTZXR0aW5ncyx0KX0sY2xhc3NSdWxlczpmdW5jdGlvbih0KXt2YXIgaT17fSxyPW4odCkuYXR0cigiY2xhc3MiKTtyZXR1cm4gciYmbi5lYWNoKHIuc3BsaXQoIiAiKSxmdW5jdGlvbigpe3RoaXMgaW4gbi52YWxpZGF0b3IuY2xhc3NSdWxlU2V0dGluZ3MmJm4uZXh0ZW5kKGksbi52YWxpZGF0b3IuY2xhc3NSdWxlU2V0dGluZ3NbdGhpc10pfSksaX0sbm9ybWFsaXplQXR0cmlidXRlUnVsZTpmdW5jdGlvbihuLHQsaSxyKXsvbWlufG1heHxzdGVwLy50ZXN0KGkpJiYodD09PW51bGx8fC9udW1iZXJ8cmFuZ2V8dGV4dC8udGVzdCh0KSkmJihyPU51bWJlcihyKSxpc05hTihyKSYmKHI9dW5kZWZpbmVkKSk7cnx8cj09PTA/bltpXT1yOnQ9PT1pJiZ0IT09InJhbmdlIiYmKG5baV09ITApfSxhdHRyaWJ1dGVSdWxlczpmdW5jdGlvbih0KXt2YXIgcj17fSxmPW4odCksZT10LmdldEF0dHJpYnV0ZSgidHlwZSIpLHUsaTtmb3IodSBpbiBuLnZhbGlkYXRvci5tZXRob2RzKXU9PT0icmVxdWlyZWQiPyhpPXQuZ2V0QXR0cmlidXRlKHUpLGk9PT0iIiYmKGk9ITApLGk9ISFpKTppPWYuYXR0cih1KSx0aGlzLm5vcm1hbGl6ZUF0dHJpYnV0ZVJ1bGUocixlLHUsaSk7cmV0dXJuIHIubWF4bGVuZ3RoJiYvLTF8MjE0NzQ4MzY0N3w1MjQyODgvLnRlc3Qoci5tYXhsZW5ndGgpJiZkZWxldGUgci5tYXhsZW5ndGgscn0sZGF0YVJ1bGVzOmZ1bmN0aW9uKHQpe3ZhciByPXt9LGY9bih0KSxlPXQuZ2V0QXR0cmlidXRlKCJ0eXBlIiksaSx1O2ZvcihpIGluIG4udmFsaWRhdG9yLm1ldGhvZHMpdT1mLmRhdGEoInJ1bGUiK2kuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkraS5zdWJzdHJpbmcoMSkudG9Mb3dlckNhc2UoKSksdGhpcy5ub3JtYWxpemVBdHRyaWJ1dGVSdWxlKHIsZSxpLHUpO3JldHVybiByfSxzdGF0aWNSdWxlczpmdW5jdGlvbih0KXt2YXIgaT17fSxyPW4uZGF0YSh0LmZvcm0sInZhbGlkYXRvciIpO3JldHVybiByLnNldHRpbmdzLnJ1bGVzJiYoaT1uLnZhbGlkYXRvci5ub3JtYWxpemVSdWxlKHIuc2V0dGluZ3MucnVsZXNbdC5uYW1lXSl8fHt9KSxpfSxub3JtYWxpemVSdWxlczpmdW5jdGlvbih0LGkpe3JldHVybiBuLmVhY2godCxmdW5jdGlvbihyLHUpe2lmKHU9PT0hMSl7ZGVsZXRlIHRbcl07cmV0dXJufWlmKHUucGFyYW18fHUuZGVwZW5kcyl7dmFyIGY9ITA7c3dpdGNoKHR5cGVvZiB1LmRlcGVuZHMpe2Nhc2Uic3RyaW5nIjpmPSEhbih1LmRlcGVuZHMsaS5mb3JtKS5sZW5ndGg7YnJlYWs7Y2FzZSJmdW5jdGlvbiI6Zj11LmRlcGVuZHMuY2FsbChpLGkpfWY/dFtyXT11LnBhcmFtIT09dW5kZWZpbmVkP3UucGFyYW06ITA6KG4uZGF0YShpLmZvcm0sInZhbGlkYXRvciIpLnJlc2V0RWxlbWVudHMobihpKSksZGVsZXRlIHRbcl0pfX0pLG4uZWFjaCh0LGZ1bmN0aW9uKHIsdSl7dFtyXT1uLmlzRnVuY3Rpb24odSkmJnIhPT0ibm9ybWFsaXplciI/dShpKTp1fSksbi5lYWNoKFsibWlubGVuZ3RoIiwibWF4bGVuZ3RoIl0sZnVuY3Rpb24oKXt0W3RoaXNdJiYodFt0aGlzXT1OdW1iZXIodFt0aGlzXSkpfSksbi5lYWNoKFsicmFuZ2VsZW5ndGgiLCJyYW5nZSJdLGZ1bmN0aW9uKCl7dmFyIGk7dFt0aGlzXSYmKG4uaXNBcnJheSh0W3RoaXNdKT90W3RoaXNdPVtOdW1iZXIodFt0aGlzXVswXSksTnVtYmVyKHRbdGhpc11bMV0pXTp0eXBlb2YgdFt0aGlzXT09InN0cmluZyImJihpPXRbdGhpc10ucmVwbGFjZSgvW1xbXF1dL2csIiIpLnNwbGl0KC9bXHMsXSsvKSx0W3RoaXNdPVtOdW1iZXIoaVswXSksTnVtYmVyKGlbMV0pXSkpfSksbi52YWxpZGF0b3IuYXV0b0NyZWF0ZVJhbmdlcyYmKHQubWluIT1udWxsJiZ0Lm1heCE9bnVsbCYmKHQucmFuZ2U9W3QubWluLHQubWF4XSxkZWxldGUgdC5taW4sZGVsZXRlIHQubWF4KSx0Lm1pbmxlbmd0aCE9bnVsbCYmdC5tYXhsZW5ndGghPW51bGwmJih0LnJhbmdlbGVuZ3RoPVt0Lm1pbmxlbmd0aCx0Lm1heGxlbmd0aF0sZGVsZXRlIHQubWlubGVuZ3RoLGRlbGV0ZSB0Lm1heGxlbmd0aCkpLHR9LG5vcm1hbGl6ZVJ1bGU6ZnVuY3Rpb24odCl7aWYodHlwZW9mIHQ9PSJzdHJpbmciKXt2YXIgaT17fTtuLmVhY2godC5zcGxpdCgvXHMvKSxmdW5jdGlvbigpe2lbdGhpc109ITB9KTt0PWl9cmV0dXJuIHR9LGFkZE1ldGhvZDpmdW5jdGlvbih0LGkscil7bi52YWxpZGF0b3IubWV0aG9kc1t0XT1pO24udmFsaWRhdG9yLm1lc3NhZ2VzW3RdPXIhPT11bmRlZmluZWQ/cjpuLnZhbGlkYXRvci5tZXNzYWdlc1t0XTtpLmxlbmd0aDwzJiZuLnZhbGlkYXRvci5hZGRDbGFzc1J1bGVzKHQsbi52YWxpZGF0b3Iubm9ybWFsaXplUnVsZSh0KSl9LG1ldGhvZHM6e3JlcXVpcmVkOmZ1bmN0aW9uKHQsaSxyKXtpZighdGhpcy5kZXBlbmQocixpKSlyZXR1cm4iZGVwZW5kZW5jeS1taXNtYXRjaCI7aWYoaS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09InNlbGVjdCIpe3ZhciB1PW4oaSkudmFsKCk7cmV0dXJuIHUmJnUubGVuZ3RoPjB9cmV0dXJuIHRoaXMuY2hlY2thYmxlKGkpP3RoaXMuZ2V0TGVuZ3RoKHQsaSk+MDp0Lmxlbmd0aD4wfSxlbWFpbDpmdW5jdGlvbihuLHQpe3JldHVybiB0aGlzLm9wdGlvbmFsKHQpfHwvXlthLXpBLVowLTkuISMkJSYnKitcLz0/Xl9ge3x9fi1dK0BbYS16QS1aMC05XSg/OlthLXpBLVowLTktXXswLDYxfVthLXpBLVowLTldKT8oPzpcLlthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqJC8udGVzdChuKX0sdXJsOmZ1bmN0aW9uKG4sdCl7cmV0dXJuIHRoaXMub3B0aW9uYWwodCl8fC9eKD86KD86KD86aHR0cHM/fGZ0cCk6KT9cL1wvKSg/OlxTKyg/OjpcUyopP0ApPyg/Oig/ISg/OjEwfDEyNykoPzpcLlxkezEsM30pezN9KSg/ISg/OjE2OVwuMjU0fDE5MlwuMTY4KSg/OlwuXGR7MSwzfSl7Mn0pKD8hMTcyXC4oPzoxWzYtOV18MlxkfDNbMC0xXSkoPzpcLlxkezEsM30pezJ9KSg/OlsxLTldXGQ/fDFcZFxkfDJbMDFdXGR8MjJbMC0zXSkoPzpcLig/OjE/XGR7MSwyfXwyWzAtNF1cZHwyNVswLTVdKSl7Mn0oPzpcLig/OlsxLTldXGQ/fDFcZFxkfDJbMC00XVxkfDI1WzAtNF0pKXwoPzooPzpbYS16XHUwMGExLVx1ZmZmZjAtOV0tKikqW2Etelx1MDBhMS1cdWZmZmYwLTldKykoPzpcLig/OlthLXpcdTAwYTEtXHVmZmZmMC05XS0qKSpbYS16XHUwMGExLVx1ZmZmZjAtOV0rKSooPzpcLig/OlthLXpcdTAwYTEtXHVmZmZmXXsyLH0pKS4/KSg/OjpcZHsyLDV9KT8oPzpbLz8jXVxTKik/JC9pLnRlc3Qobil9LGRhdGU6ZnVuY3Rpb24obix0KXtyZXR1cm4gdGhpcy5vcHRpb25hbCh0KXx8IS9JbnZhbGlkfE5hTi8udGVzdChuZXcgRGF0ZShuKS50b1N0cmluZygpKX0sZGF0ZUlTTzpmdW5jdGlvbihuLHQpe3JldHVybiB0aGlzLm9wdGlvbmFsKHQpfHwvXlxkezR9W1wvXC1dKDA/WzEtOV18MVswMTJdKVtcL1wtXSgwP1sxLTldfFsxMl1bMC05XXwzWzAxXSkkLy50ZXN0KG4pfSxudW1iZXI6ZnVuY3Rpb24obix0KXtyZXR1cm4gdGhpcy5vcHRpb25hbCh0KXx8L14oPzotP1xkK3wtP1xkezEsM30oPzosXGR7M30pKyk/KD86XC5cZCspPyQvLnRlc3Qobil9LGRpZ2l0czpmdW5jdGlvbihuLHQpe3JldHVybiB0aGlzLm9wdGlvbmFsKHQpfHwvXlxkKyQvLnRlc3Qobil9LG1pbmxlbmd0aDpmdW5jdGlvbih0LGkscil7dmFyIHU9bi5pc0FycmF5KHQpP3QubGVuZ3RoOnRoaXMuZ2V0TGVuZ3RoKHQsaSk7cmV0dXJuIHRoaXMub3B0aW9uYWwoaSl8fHU+PXJ9LG1heGxlbmd0aDpmdW5jdGlvbih0LGkscil7dmFyIHU9bi5pc0FycmF5KHQpP3QubGVuZ3RoOnRoaXMuZ2V0TGVuZ3RoKHQsaSk7cmV0dXJuIHRoaXMub3B0aW9uYWwoaSl8fHU8PXJ9LHJhbmdlbGVuZ3RoOmZ1bmN0aW9uKHQsaSxyKXt2YXIgdT1uLmlzQXJyYXkodCk/dC5sZW5ndGg6dGhpcy5nZXRMZW5ndGgodCxpKTtyZXR1cm4gdGhpcy5vcHRpb25hbChpKXx8dT49clswXSYmdTw9clsxXX0sbWluOmZ1bmN0aW9uKG4sdCxpKXtyZXR1cm4gdGhpcy5vcHRpb25hbCh0KXx8bj49aX0sbWF4OmZ1bmN0aW9uKG4sdCxpKXtyZXR1cm4gdGhpcy5vcHRpb25hbCh0KXx8bjw9aX0scmFuZ2U6ZnVuY3Rpb24obix0LGkpe3JldHVybiB0aGlzLm9wdGlvbmFsKHQpfHxuPj1pWzBdJiZuPD1pWzFdfSxzdGVwOmZ1bmN0aW9uKHQsaSxyKXt2YXIgdT1uKGkpLmF0dHIoInR5cGUiKSxoPSJTdGVwIGF0dHJpYnV0ZSBvbiBpbnB1dCB0eXBlICIrdSsiIGlzIG5vdCBzdXBwb3J0ZWQuIixjPW5ldyBSZWdFeHAoIlxcYiIrdSsiXFxiIiksbD11JiYhYy50ZXN0KCJ0ZXh0LG51bWJlcixyYW5nZSIpLGU9ZnVuY3Rpb24obil7dmFyIHQ9KCIiK24pLm1hdGNoKC8oPzpcLihcZCspKT8kLyk7cmV0dXJuIHQ/dFsxXT90WzFdLmxlbmd0aDowOjB9LG89ZnVuY3Rpb24obil7cmV0dXJuIE1hdGgucm91bmQobipNYXRoLnBvdygxMCxmKSl9LHM9ITAsZjtpZihsKXRocm93IG5ldyBFcnJvcihoKTtyZXR1cm4gZj1lKHIpLChlKHQpPmZ8fG8odCklbyhyKSE9MCkmJihzPSExKSx0aGlzLm9wdGlvbmFsKGkpfHxzfSxlcXVhbFRvOmZ1bmN0aW9uKHQsaSxyKXt2YXIgdT1uKHIpO2lmKHRoaXMuc2V0dGluZ3Mub25mb2N1c291dCYmdS5ub3QoIi52YWxpZGF0ZS1lcXVhbFRvLWJsdXIiKS5sZW5ndGgpdS5hZGRDbGFzcygidmFsaWRhdGUtZXF1YWxUby1ibHVyIikub24oImJsdXIudmFsaWRhdGUtZXF1YWxUbyIsZnVuY3Rpb24oKXtuKGkpLnZhbGlkKCl9KTtyZXR1cm4gdD09PXUudmFsKCl9LHJlbW90ZTpmdW5jdGlvbih0LGkscix1KXtpZih0aGlzLm9wdGlvbmFsKGkpKXJldHVybiJkZXBlbmRlbmN5LW1pc21hdGNoIjt1PXR5cGVvZiB1PT0ic3RyaW5nIiYmdXx8InJlbW90ZSI7dmFyIGU9dGhpcy5wcmV2aW91c1ZhbHVlKGksdSksZixvLHM7cmV0dXJuKHRoaXMuc2V0dGluZ3MubWVzc2FnZXNbaS5uYW1lXXx8KHRoaXMuc2V0dGluZ3MubWVzc2FnZXNbaS5uYW1lXT17fSksZS5vcmlnaW5hbE1lc3NhZ2U9ZS5vcmlnaW5hbE1lc3NhZ2V8fHRoaXMuc2V0dGluZ3MubWVzc2FnZXNbaS5uYW1lXVt1XSx0aGlzLnNldHRpbmdzLm1lc3NhZ2VzW2kubmFtZV1bdV09ZS5tZXNzYWdlLHI9dHlwZW9mIHI9PSJzdHJpbmciJiZ7dXJsOnJ9fHxyLHM9bi5wYXJhbShuLmV4dGVuZCh7ZGF0YTp0fSxyLmRhdGEpKSxlLm9sZD09PXMpP2UudmFsaWQ6KGUub2xkPXMsZj10aGlzLHRoaXMuc3RhcnRSZXF1ZXN0KGkpLG89e30sb1tpLm5hbWVdPXQsbi5hamF4KG4uZXh0ZW5kKCEwLHttb2RlOiJhYm9ydCIscG9ydDoidmFsaWRhdGUiK2kubmFtZSxkYXRhVHlwZToianNvbiIsZGF0YTpvLGNvbnRleHQ6Zi5jdXJyZW50Rm9ybSxzdWNjZXNzOmZ1bmN0aW9uKG4pe3ZhciByPW49PT0hMHx8bj09PSJ0cnVlIixvLHMsaDtmLnNldHRpbmdzLm1lc3NhZ2VzW2kubmFtZV1bdV09ZS5vcmlnaW5hbE1lc3NhZ2U7cj8oaD1mLmZvcm1TdWJtaXR0ZWQsZi5yZXNldEludGVybmFscygpLGYudG9IaWRlPWYuZXJyb3JzRm9yKGkpLGYuZm9ybVN1Ym1pdHRlZD1oLGYuc3VjY2Vzc0xpc3QucHVzaChpKSxmLmludmFsaWRbaS5uYW1lXT0hMSxmLnNob3dFcnJvcnMoKSk6KG89e30scz1ufHxmLmRlZmF1bHRNZXNzYWdlKGkse21ldGhvZDp1LHBhcmFtZXRlcnM6dH0pLG9baS5uYW1lXT1lLm1lc3NhZ2U9cyxmLmludmFsaWRbaS5uYW1lXT0hMCxmLnNob3dFcnJvcnMobykpO2UudmFsaWQ9cjtmLnN0b3BSZXF1ZXN0KGkscil9fSxyKSksInBlbmRpbmciKX19fSk7dmFyIHQ9e30saTtyZXR1cm4gbi5hamF4UHJlZmlsdGVyP24uYWpheFByZWZpbHRlcihmdW5jdGlvbihuLGkscil7dmFyIHU9bi5wb3J0O24ubW9kZT09PSJhYm9ydCImJih0W3VdJiZ0W3VdLmFib3J0KCksdFt1XT1yKX0pOihpPW4uYWpheCxuLmFqYXg9ZnVuY3Rpb24ocil7dmFyIGY9KCJtb2RlImluIHI/cjpuLmFqYXhTZXR0aW5ncykubW9kZSx1PSgicG9ydCJpbiByP3I6bi5hamF4U2V0dGluZ3MpLnBvcnQ7cmV0dXJuIGY9PT0iYWJvcnQiPyh0W3VdJiZ0W3VdLmFib3J0KCksdFt1XT1pLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0W3VdKTppLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLG59KTsNCihmdW5jdGlvbihuKXt0eXBlb2YgZGVmaW5lPT0iZnVuY3Rpb24iJiZkZWZpbmUuYW1kP2RlZmluZSgianF1ZXJ5LnZhbGlkYXRlLnVub2J0cnVzaXZlIixbImpxdWVyeS12YWxpZGF0aW9uIl0sbik6dHlwZW9mIG1vZHVsZT09Im9iamVjdCImJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPW4ocmVxdWlyZSgianF1ZXJ5LXZhbGlkYXRpb24iKSk6alF1ZXJ5LnZhbGlkYXRvci51bm9idHJ1c2l2ZT1uKGpRdWVyeSl9KShmdW5jdGlvbihuKXtmdW5jdGlvbiBpKG4sdCxpKXtuLnJ1bGVzW3RdPWk7bi5tZXNzYWdlJiYobi5tZXNzYWdlc1t0XT1uLm1lc3NhZ2UpfWZ1bmN0aW9uIGgobil7cmV0dXJuIG4ucmVwbGFjZSgvXlxzK3xccyskL2csIiIpLnNwbGl0KC9ccyosXHMqL2cpfWZ1bmN0aW9uIGYobil7cmV0dXJuIG4ucmVwbGFjZSgvKFshIiMkJSYnKCkqKywuLzo7PD0+P0BcW1xcXF1eYHt8fX5dKS9nLCJcXCQxIil9ZnVuY3Rpb24gZShuKXtyZXR1cm4gbi5zdWJzdHIoMCxuLmxhc3RJbmRleE9mKCIuIikrMSl9ZnVuY3Rpb24gbyhuLHQpe3JldHVybiBuLmluZGV4T2YoIiouIik9PT0wJiYobj1uLnJlcGxhY2UoIiouIix0KSksbn1mdW5jdGlvbiBjKHQsaSl7dmFyIHI9bih0aGlzKS5maW5kKCJbZGF0YS12YWxtc2ctZm9yPSciK2YoaVswXS5uYW1lKSsiJ10iKSx1PXIuYXR0cigiZGF0YS12YWxtc2ctcmVwbGFjZSIpLGU9dT9uLnBhcnNlSlNPTih1KSE9PSExOm51bGw7ci5yZW1vdmVDbGFzcygiZmllbGQtdmFsaWRhdGlvbi12YWxpZCIpLmFkZENsYXNzKCJmaWVsZC12YWxpZGF0aW9uLWVycm9yIik7dC5kYXRhKCJ1bm9idHJ1c2l2ZUNvbnRhaW5lciIscik7ZT8oci5lbXB0eSgpLHQucmVtb3ZlQ2xhc3MoImlucHV0LXZhbGlkYXRpb24tZXJyb3IiKS5hcHBlbmRUbyhyKSk6dC5oaWRlKCl9ZnVuY3Rpb24gbCh0LGkpe3ZhciB1PW4odGhpcykuZmluZCgiW2RhdGEtdmFsbXNnLXN1bW1hcnk9dHJ1ZV0iKSxyPXUuZmluZCgidWwiKTtyJiZyLmxlbmd0aCYmaS5lcnJvckxpc3QubGVuZ3RoJiYoci5lbXB0eSgpLHUuYWRkQ2xhc3MoInZhbGlkYXRpb24tc3VtbWFyeS1lcnJvcnMiKS5yZW1vdmVDbGFzcygidmFsaWRhdGlvbi1zdW1tYXJ5LXZhbGlkIiksbi5lYWNoKGkuZXJyb3JMaXN0LGZ1bmN0aW9uKCl7bigiPGxpIC8+IikuaHRtbCh0aGlzLm1lc3NhZ2UpLmFwcGVuZFRvKHIpfSkpfWZ1bmN0aW9uIGEodCl7dmFyIGk9dC5kYXRhKCJ1bm9idHJ1c2l2ZUNvbnRhaW5lciIpLHIsdTtpJiYocj1pLmF0dHIoImRhdGEtdmFsbXNnLXJlcGxhY2UiKSx1PXI/bi5wYXJzZUpTT04ocik6bnVsbCxpLmFkZENsYXNzKCJmaWVsZC12YWxpZGF0aW9uLXZhbGlkIikucmVtb3ZlQ2xhc3MoImZpZWxkLXZhbGlkYXRpb24tZXJyb3IiKSx0LnJlbW92ZURhdGEoInVub2J0cnVzaXZlQ29udGFpbmVyIiksdSYmaS5lbXB0eSgpKX1mdW5jdGlvbiB2KCl7dmFyIHQ9bih0aGlzKSxpPSJfX2pxdWVyeV91bm9idHJ1c2l2ZV92YWxpZGF0aW9uX2Zvcm1fcmVzZXQiO2lmKCF0LmRhdGEoaSkpe3QuZGF0YShpLCEwKTt0cnl7dC5kYXRhKCJ2YWxpZGF0b3IiKS5yZXNldEZvcm0oKX1maW5hbGx5e3QucmVtb3ZlRGF0YShpKX10LmZpbmQoIi52YWxpZGF0aW9uLXN1bW1hcnktZXJyb3JzIikuYWRkQ2xhc3MoInZhbGlkYXRpb24tc3VtbWFyeS12YWxpZCIpLnJlbW92ZUNsYXNzKCJ2YWxpZGF0aW9uLXN1bW1hcnktZXJyb3JzIik7dC5maW5kKCIuZmllbGQtdmFsaWRhdGlvbi1lcnJvciIpLmFkZENsYXNzKCJmaWVsZC12YWxpZGF0aW9uLXZhbGlkIikucmVtb3ZlQ2xhc3MoImZpZWxkLXZhbGlkYXRpb24tZXJyb3IiKS5yZW1vdmVEYXRhKCJ1bm9idHJ1c2l2ZUNvbnRhaW5lciIpLmZpbmQoIj4qIikucmVtb3ZlRGF0YSgidW5vYnRydXNpdmVDb250YWluZXIiKX19ZnVuY3Rpb24gcyh0KXt2YXIgaT1uKHQpLGY9aS5kYXRhKHUpLHM9bi5wcm94eSh2LHQpLGU9ci51bm9idHJ1c2l2ZS5vcHRpb25zfHx7fSxvPWZ1bmN0aW9uKGkscil7dmFyIHU9ZVtpXTt1JiZuLmlzRnVuY3Rpb24odSkmJnUuYXBwbHkodCxyKX07cmV0dXJuIGZ8fChmPXtvcHRpb25zOntlcnJvckNsYXNzOmUuZXJyb3JDbGFzc3x8ImlucHV0LXZhbGlkYXRpb24tZXJyb3IiLGVycm9yRWxlbWVudDplLmVycm9yRWxlbWVudHx8InNwYW4iLGVycm9yUGxhY2VtZW50OmZ1bmN0aW9uKCl7Yy5hcHBseSh0LGFyZ3VtZW50cyk7bygiZXJyb3JQbGFjZW1lbnQiLGFyZ3VtZW50cyl9LGludmFsaWRIYW5kbGVyOmZ1bmN0aW9uKCl7bC5hcHBseSh0LGFyZ3VtZW50cyk7bygiaW52YWxpZEhhbmRsZXIiLGFyZ3VtZW50cyl9LG1lc3NhZ2VzOnt9LHJ1bGVzOnt9LHN1Y2Nlc3M6ZnVuY3Rpb24oKXthLmFwcGx5KHQsYXJndW1lbnRzKTtvKCJzdWNjZXNzIixhcmd1bWVudHMpfX0sYXR0YWNoVmFsaWRhdGlvbjpmdW5jdGlvbigpe2kub2ZmKCJyZXNldC4iK3Uscykub24oInJlc2V0LiIrdSxzKS52YWxpZGF0ZSh0aGlzLm9wdGlvbnMpfSx2YWxpZGF0ZTpmdW5jdGlvbigpe3JldHVybiBpLnZhbGlkYXRlKCksaS52YWxpZCgpfX0saS5kYXRhKHUsZikpLGZ9dmFyIHI9bi52YWxpZGF0b3IsdCx1PSJ1bm9idHJ1c2l2ZVZhbGlkYXRpb24iO3JldHVybiByLnVub2J0cnVzaXZlPXthZGFwdGVyczpbXSxwYXJzZUVsZW1lbnQ6ZnVuY3Rpb24odCxpKXt2YXIgdT1uKHQpLGY9dS5wYXJlbnRzKCJmb3JtIilbMF0scixlLG87ZiYmKHI9cyhmKSxyLm9wdGlvbnMucnVsZXNbdC5uYW1lXT1lPXt9LHIub3B0aW9ucy5tZXNzYWdlc1t0Lm5hbWVdPW89e30sbi5lYWNoKHRoaXMuYWRhcHRlcnMsZnVuY3Rpb24oKXt2YXIgaT0iZGF0YS12YWwtIit0aGlzLm5hbWUscj11LmF0dHIoaSkscz17fTtyIT09dW5kZWZpbmVkJiYoaSs9Ii0iLG4uZWFjaCh0aGlzLnBhcmFtcyxmdW5jdGlvbigpe3NbdGhpc109dS5hdHRyKGkrdGhpcyl9KSx0aGlzLmFkYXB0KHtlbGVtZW50OnQsZm9ybTpmLG1lc3NhZ2U6cixwYXJhbXM6cyxydWxlczplLG1lc3NhZ2VzOm99KSl9KSxuLmV4dGVuZChlLHtfX2R1bW15X186ITB9KSxpfHxyLmF0dGFjaFZhbGlkYXRpb24oKSl9LHBhcnNlOmZ1bmN0aW9uKHQpe3ZhciBpPW4odCksdT1pLnBhcmVudHMoKS5hZGRCYWNrKCkuZmlsdGVyKCJmb3JtIikuYWRkKGkuZmluZCgiZm9ybSIpKS5oYXMoIltkYXRhLXZhbD10cnVlXSIpO2kuZmluZCgiW2RhdGEtdmFsPXRydWVdIikuZWFjaChmdW5jdGlvbigpe3IudW5vYnRydXNpdmUucGFyc2VFbGVtZW50KHRoaXMsITApfSk7dS5lYWNoKGZ1bmN0aW9uKCl7dmFyIG49cyh0aGlzKTtuJiZuLmF0dGFjaFZhbGlkYXRpb24oKX0pfX0sdD1yLnVub2J0cnVzaXZlLmFkYXB0ZXJzLHQuYWRkPWZ1bmN0aW9uKG4sdCxpKXtyZXR1cm4gaXx8KGk9dCx0PVtdKSx0aGlzLnB1c2goe25hbWU6bixwYXJhbXM6dCxhZGFwdDppfSksdGhpc30sdC5hZGRCb29sPWZ1bmN0aW9uKG4sdCl7cmV0dXJuIHRoaXMuYWRkKG4sZnVuY3Rpb24ocil7aShyLHR8fG4sITApfSl9LHQuYWRkTWluTWF4PWZ1bmN0aW9uKG4sdCxyLHUsZixlKXtyZXR1cm4gdGhpcy5hZGQobixbZnx8Im1pbiIsZXx8Im1heCJdLGZ1bmN0aW9uKG4pe3ZhciBmPW4ucGFyYW1zLm1pbixlPW4ucGFyYW1zLm1heDtmJiZlP2kobix1LFtmLGVdKTpmP2kobix0LGYpOmUmJmkobixyLGUpfSl9LHQuYWRkU2luZ2xlVmFsPWZ1bmN0aW9uKG4sdCxyKXtyZXR1cm4gdGhpcy5hZGQobixbdHx8InZhbCJdLGZ1bmN0aW9uKHUpe2kodSxyfHxuLHUucGFyYW1zW3RdKX0pfSxyLmFkZE1ldGhvZCgiX19kdW1teV9fIixmdW5jdGlvbigpe3JldHVybiEwfSksci5hZGRNZXRob2QoInJlZ2V4IixmdW5jdGlvbihuLHQsaSl7dmFyIHI7cmV0dXJuIHRoaXMub3B0aW9uYWwodCk/ITA6KHI9bmV3IFJlZ0V4cChpKS5leGVjKG4pLHImJnIuaW5kZXg9PT0wJiZyWzBdLmxlbmd0aD09PW4ubGVuZ3RoKX0pLHIuYWRkTWV0aG9kKCJub25hbHBoYW1pbiIsZnVuY3Rpb24obix0LGkpe3ZhciByO3JldHVybiBpJiYocj1uLm1hdGNoKC9cVy9nKSxyPXImJnIubGVuZ3RoPj1pKSxyfSksci5tZXRob2RzLmV4dGVuc2lvbj8odC5hZGRTaW5nbGVWYWwoImFjY2VwdCIsIm1pbXR5cGUiKSx0LmFkZFNpbmdsZVZhbCgiZXh0ZW5zaW9uIiwiZXh0ZW5zaW9uIikpOnQuYWRkU2luZ2xlVmFsKCJleHRlbnNpb24iLCJleHRlbnNpb24iLCJhY2NlcHQiKSx0LmFkZFNpbmdsZVZhbCgicmVnZXgiLCJwYXR0ZXJuIiksdC5hZGRCb29sKCJjcmVkaXRjYXJkIikuYWRkQm9vbCgiZGF0ZSIpLmFkZEJvb2woImRpZ2l0cyIpLmFkZEJvb2woImVtYWlsIikuYWRkQm9vbCgibnVtYmVyIikuYWRkQm9vbCgidXJsIiksdC5hZGRNaW5NYXgoImxlbmd0aCIsIm1pbmxlbmd0aCIsIm1heGxlbmd0aCIsInJhbmdlbGVuZ3RoIikuYWRkTWluTWF4KCJyYW5nZSIsIm1pbiIsIm1heCIsInJhbmdlIiksdC5hZGRNaW5NYXgoIm1pbmxlbmd0aCIsIm1pbmxlbmd0aCIpLmFkZE1pbk1heCgibWF4bGVuZ3RoIiwibWlubGVuZ3RoIiwibWF4bGVuZ3RoIiksdC5hZGQoImVxdWFsdG8iLFsib3RoZXIiXSxmdW5jdGlvbih0KXt2YXIgcj1lKHQuZWxlbWVudC5uYW1lKSx1PXQucGFyYW1zLm90aGVyLHM9byh1LHIpLGg9bih0LmZvcm0pLmZpbmQoIjppbnB1dCIpLmZpbHRlcigiW25hbWU9JyIrZihzKSsiJ10iKVswXTtpKHQsImVxdWFsVG8iLGgpfSksdC5hZGQoInJlcXVpcmVkIixmdW5jdGlvbihuKXsobi5lbGVtZW50LnRhZ05hbWUudG9VcHBlckNhc2UoKSE9PSJJTlBVVCJ8fG4uZWxlbWVudC50eXBlLnRvVXBwZXJDYXNlKCkhPT0iQ0hFQ0tCT1giKSYmaShuLCJyZXF1aXJlZCIsITApfSksdC5hZGQoInJlbW90ZSIsWyJ1cmwiLCJ0eXBlIiwiYWRkaXRpb25hbGZpZWxkcyJdLGZ1bmN0aW9uKHQpe3ZhciByPXt1cmw6dC5wYXJhbXMudXJsLHR5cGU6dC5wYXJhbXMudHlwZXx8IkdFVCIsZGF0YTp7fX0sdT1lKHQuZWxlbWVudC5uYW1lKTtuLmVhY2goaCh0LnBhcmFtcy5hZGRpdGlvbmFsZmllbGRzfHx0LmVsZW1lbnQubmFtZSksZnVuY3Rpb24oaSxlKXt2YXIgcz1vKGUsdSk7ci5kYXRhW3NdPWZ1bmN0aW9uKCl7dmFyIGk9bih0LmZvcm0pLmZpbmQoIjppbnB1dCIpLmZpbHRlcigiW25hbWU9JyIrZihzKSsiJ10iKTtyZXR1cm4gaS5pcygiOmNoZWNrYm94Iik/aS5maWx0ZXIoIjpjaGVja2VkIikudmFsKCl8fGkuZmlsdGVyKCI6aGlkZGVuIikudmFsKCl8fCIiOmkuaXMoIjpyYWRpbyIpP2kuZmlsdGVyKCI6Y2hlY2tlZCIpLnZhbCgpfHwiIjppLnZhbCgpfX0pO2kodCwicmVtb3RlIixyKX0pLHQuYWRkKCJwYXNzd29yZCIsWyJtaW4iLCJub25hbHBoYW1pbiIsInJlZ2V4Il0sZnVuY3Rpb24obil7bi5wYXJhbXMubWluJiZpKG4sIm1pbmxlbmd0aCIsbi5wYXJhbXMubWluKTtuLnBhcmFtcy5ub25hbHBoYW1pbiYmaShuLCJub25hbHBoYW1pbiIsbi5wYXJhbXMubm9uYWxwaGFtaW4pO24ucGFyYW1zLnJlZ2V4JiZpKG4sInJlZ2V4IixuLnBhcmFtcy5yZWdleCl9KSx0LmFkZCgiZmlsZWV4dGVuc2lvbnMiLFsiZXh0ZW5zaW9ucyJdLGZ1bmN0aW9uKG4pe2kobiwiZXh0ZW5zaW9uIixuLnBhcmFtcy5leHRlbnNpb25zKX0pLG4oZnVuY3Rpb24oKXtyLnVub2J0cnVzaXZlLnBhcnNlKGRvY3VtZW50KX0pLHIudW5vYnRydXNpdmV9KTsNCihmdW5jdGlvbihuKXtmdW5jdGlvbiBpKG4sdCl7Zm9yKHZhciBpPXdpbmRvdyxyPShufHwiIikuc3BsaXQoIi4iKTtpJiZyLmxlbmd0aDspaT1pW3Iuc2hpZnQoKV07cmV0dXJuIHR5cGVvZiBpPT0iZnVuY3Rpb24iP2k6KHQucHVzaChuKSxGdW5jdGlvbi5jb25zdHJ1Y3Rvci5hcHBseShudWxsLHQpKX1mdW5jdGlvbiByKG4pe3JldHVybiBuPT09IkdFVCJ8fG49PT0iUE9TVCJ9ZnVuY3Rpb24gZShuLHQpe3IodCl8fG4uc2V0UmVxdWVzdEhlYWRlcigiWC1IVFRQLU1ldGhvZC1PdmVycmlkZSIsdCl9ZnVuY3Rpb24gbyh0LGkscil7dmFyIHU7ci5pbmRleE9mKCJhcHBsaWNhdGlvbi94LWphdmFzY3JpcHQiKT09PS0xJiYodT0odC5nZXRBdHRyaWJ1dGUoImRhdGEtYWpheC1tb2RlIil8fCIiKS50b1VwcGVyQ2FzZSgpLG4odC5nZXRBdHRyaWJ1dGUoImRhdGEtYWpheC11cGRhdGUiKSkuZWFjaChmdW5jdGlvbih0LHIpe3ZhciBmO3N3aXRjaCh1KXtjYXNlIkJFRk9SRSI6Zj1yLmZpcnN0Q2hpbGQ7bigiPGRpdiAvPiIpLmh0bWwoaSkuY29udGVudHMoKS5lYWNoKGZ1bmN0aW9uKCl7ci5pbnNlcnRCZWZvcmUodGhpcyxmKX0pO2JyZWFrO2Nhc2UiQUZURVIiOm4oIjxkaXYgLz4iKS5odG1sKGkpLmNvbnRlbnRzKCkuZWFjaChmdW5jdGlvbigpe3IuYXBwZW5kQ2hpbGQodGhpcyl9KTticmVhaztkZWZhdWx0Om4ocikuaHRtbChpKX19KSl9ZnVuY3Rpb24gdSh0LHUpe3ZhciBzLGgsZixjOyhzPXQuZ2V0QXR0cmlidXRlKCJkYXRhLWFqYXgtY29uZmlybSIpLCFzfHx3aW5kb3cuY29uZmlybShzKSkmJihoPW4odC5nZXRBdHRyaWJ1dGUoImRhdGEtYWpheC1sb2FkaW5nIikpLGM9dC5nZXRBdHRyaWJ1dGUoImRhdGEtYWpheC1sb2FkaW5nLWR1cmF0aW9uIil8fDAsbi5leHRlbmQodSx7dHlwZTp0LmdldEF0dHJpYnV0ZSgiZGF0YS1hamF4LW1ldGhvZCIpfHx1bmRlZmluZWQsdXJsOnQuZ2V0QXR0cmlidXRlKCJkYXRhLWFqYXgtdXJsIil8fHVuZGVmaW5lZCxiZWZvcmVTZW5kOmZ1bmN0aW9uKG4pe3ZhciByO3JldHVybiBlKG4sZikscj1pKHQuZ2V0QXR0cmlidXRlKCJkYXRhLWFqYXgtYmVnaW4iKSxbInhociJdKS5hcHBseSh0aGlzLGFyZ3VtZW50cyksciE9PSExJiZoLnNob3coYykscn0sY29tcGxldGU6ZnVuY3Rpb24oKXtoLmhpZGUoYyk7aSh0LmdldEF0dHJpYnV0ZSgiZGF0YS1hamF4LWNvbXBsZXRlIiksWyJ4aHIiLCJzdGF0dXMiXSkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxzdWNjZXNzOmZ1bmN0aW9uKG4scix1KXtvKHQsbix1LmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKXx8InRleHQvaHRtbCIpO2kodC5nZXRBdHRyaWJ1dGUoImRhdGEtYWpheC1zdWNjZXNzIiksWyJkYXRhIiwic3RhdHVzIiwieGhyIl0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZXJyb3I6aSh0LmdldEF0dHJpYnV0ZSgiZGF0YS1hamF4LWZhaWx1cmUiKSxbInhociIsInN0YXR1cyIsImVycm9yIl0pfSksdS5kYXRhLnB1c2goe25hbWU6IlgtUmVxdWVzdGVkLVdpdGgiLHZhbHVlOiJYTUxIdHRwUmVxdWVzdCJ9KSxmPXUudHlwZS50b1VwcGVyQ2FzZSgpLHIoZil8fCh1LnR5cGU9IlBPU1QiLHUuZGF0YS5wdXNoKHtuYW1lOiJYLUhUVFAtTWV0aG9kLU92ZXJyaWRlIix2YWx1ZTpmfSkpLG4uYWpheCh1KSl9ZnVuY3Rpb24gcyh0KXt2YXIgaT1uKHQpLmRhdGEoZik7cmV0dXJuIWl8fCFpLnZhbGlkYXRlfHxpLnZhbGlkYXRlKCl9dmFyIHQ9InVub2J0cnVzaXZlQWpheENsaWNrIixmPSJ1bm9idHJ1c2l2ZVZhbGlkYXRpb24iO24oZG9jdW1lbnQpLm9uKCJjbGljayIsImFbZGF0YS1hamF4PXRydWVdIixmdW5jdGlvbihuKXtuLnByZXZlbnREZWZhdWx0KCk7dSh0aGlzLHt1cmw6dGhpcy5ocmVmLHR5cGU6IkdFVCIsZGF0YTpbXX0pfSk7bihkb2N1bWVudCkub24oImNsaWNrIiwiZm9ybVtkYXRhLWFqYXg9dHJ1ZV0gaW5wdXRbdHlwZT1pbWFnZV0iLGZ1bmN0aW9uKGkpe3ZhciByPWkudGFyZ2V0Lm5hbWUsdT1uKGkudGFyZ2V0KSxmPXUucGFyZW50cygiZm9ybSIpWzBdLGU9dS5vZmZzZXQoKTtuKGYpLmRhdGEodCxbe25hbWU6cisiLngiLHZhbHVlOk1hdGgucm91bmQoaS5wYWdlWC1lLmxlZnQpfSx7bmFtZTpyKyIueSIsdmFsdWU6TWF0aC5yb3VuZChpLnBhZ2VZLWUudG9wKX1dKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bihmKS5yZW1vdmVEYXRhKHQpfSwwKX0pO24oZG9jdW1lbnQpLm9uKCJjbGljayIsImZvcm1bZGF0YS1hamF4PXRydWVdIDpzdWJtaXQiLGZ1bmN0aW9uKGkpe3ZhciByPWkudGFyZ2V0Lm5hbWUsdT1uKGkudGFyZ2V0KS5wYXJlbnRzKCJmb3JtIilbMF07bih1KS5kYXRhKHQscj9be25hbWU6cix2YWx1ZTppLnRhcmdldC52YWx1ZX1dOltdKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bih1KS5yZW1vdmVEYXRhKHQpfSwwKX0pO24oZG9jdW1lbnQpLm9uKCJzdWJtaXQiLCJmb3JtW2RhdGEtYWpheD10cnVlXSIsZnVuY3Rpb24oaSl7dmFyIHI9bih0aGlzKS5kYXRhKHQpfHxbXTsoaS5wcmV2ZW50RGVmYXVsdCgpLHModGhpcykpJiZ1KHRoaXMse3VybDp0aGlzLmFjdGlvbix0eXBlOnRoaXMubWV0aG9kfHwiR0VUIixkYXRhOnIuY29uY2F0KG4odGhpcykuc2VyaWFsaXplQXJyYXkoKSl9KX0pfSkoalF1ZXJ5KTsNCi8qIQ0KICAqIEJvb3RzdHJhcCB2NS4wLjIgKGh0dHBzOi8vZ2V0Ym9vdHN0cmFwLmNvbS8pDQogICogQ29weXJpZ2h0IDIwMTEtMjAyMSBUaGUgQm9vdHN0cmFwIEF1dGhvcnMgKGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9ncmFwaHMvY29udHJpYnV0b3JzKQ0KICAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFpbi9MSUNFTlNFKQ0KICAqLw0KIWZ1bmN0aW9uICh0LCBlKSB7ICJvYmplY3QiID09IHR5cGVvZiBleHBvcnRzICYmICJ1bmRlZmluZWQiICE9IHR5cGVvZiBtb2R1bGUgPyBtb2R1bGUuZXhwb3J0cyA9IGUoKSA6ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGRlZmluZSAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGUpIDogKHQgPSAidW5kZWZpbmVkIiAhPSB0eXBlb2YgZ2xvYmFsVGhpcyA/IGdsb2JhbFRoaXMgOiB0IHx8IHNlbGYpLmJvb3RzdHJhcCA9IGUoKSB9KHRoaXMsIChmdW5jdGlvbiAoKSB7ICJ1c2Ugc3RyaWN0IjsgY29uc3QgdCA9IHsgZmluZDogKHQsIGUgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpID0+IFtdLmNvbmNhdCguLi5FbGVtZW50LnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yQWxsLmNhbGwoZSwgdCkpLCBmaW5kT25lOiAodCwgZSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkgPT4gRWxlbWVudC5wcm90b3R5cGUucXVlcnlTZWxlY3Rvci5jYWxsKGUsIHQpLCBjaGlsZHJlbjogKHQsIGUpID0+IFtdLmNvbmNhdCguLi50LmNoaWxkcmVuKS5maWx0ZXIodCA9PiB0Lm1hdGNoZXMoZSkpLCBwYXJlbnRzKHQsIGUpIHsgY29uc3QgaSA9IFtdOyBsZXQgbiA9IHQucGFyZW50Tm9kZTsgZm9yICg7IG4gJiYgbi5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgMyAhPT0gbi5ub2RlVHlwZTspbi5tYXRjaGVzKGUpICYmIGkucHVzaChuKSwgbiA9IG4ucGFyZW50Tm9kZTsgcmV0dXJuIGkgfSwgcHJldih0LCBlKSB7IGxldCBpID0gdC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nOyBmb3IgKDsgaTspIHsgaWYgKGkubWF0Y2hlcyhlKSkgcmV0dXJuIFtpXTsgaSA9IGkucHJldmlvdXNFbGVtZW50U2libGluZyB9IHJldHVybiBbXSB9LCBuZXh0KHQsIGUpIHsgbGV0IGkgPSB0Lm5leHRFbGVtZW50U2libGluZzsgZm9yICg7IGk7KSB7IGlmIChpLm1hdGNoZXMoZSkpIHJldHVybiBbaV07IGkgPSBpLm5leHRFbGVtZW50U2libGluZyB9IHJldHVybiBbXSB9IH0sIGUgPSB0ID0+IHsgZG8geyB0ICs9IE1hdGguZmxvb3IoMWU2ICogTWF0aC5yYW5kb20oKSkgfSB3aGlsZSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodCkpOyByZXR1cm4gdCB9LCBpID0gdCA9PiB7IGxldCBlID0gdC5nZXRBdHRyaWJ1dGUoImRhdGEtYnMtdGFyZ2V0Iik7IGlmICghZSB8fCAiIyIgPT09IGUpIHsgbGV0IGkgPSB0LmdldEF0dHJpYnV0ZSgiaHJlZiIpOyBpZiAoIWkgfHwgIWkuaW5jbHVkZXMoIiMiKSAmJiAhaS5zdGFydHNXaXRoKCIuIikpIHJldHVybiBudWxsOyBpLmluY2x1ZGVzKCIjIikgJiYgIWkuc3RhcnRzV2l0aCgiIyIpICYmIChpID0gIiMiICsgaS5zcGxpdCgiIyIpWzFdKSwgZSA9IGkgJiYgIiMiICE9PSBpID8gaS50cmltKCkgOiBudWxsIH0gcmV0dXJuIGUgfSwgbiA9IHQgPT4geyBjb25zdCBlID0gaSh0KTsgcmV0dXJuIGUgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKSA/IGUgOiBudWxsIH0sIHMgPSB0ID0+IHsgY29uc3QgZSA9IGkodCk7IHJldHVybiBlID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKSA6IG51bGwgfSwgbyA9IHQgPT4geyB0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KCJ0cmFuc2l0aW9uZW5kIikpIH0sIHIgPSB0ID0+ICEoIXQgfHwgIm9iamVjdCIgIT0gdHlwZW9mIHQpICYmICh2b2lkIDAgIT09IHQuanF1ZXJ5ICYmICh0ID0gdFswXSksIHZvaWQgMCAhPT0gdC5ub2RlVHlwZSksIGEgPSBlID0+IHIoZSkgPyBlLmpxdWVyeSA/IGVbMF0gOiBlIDogInN0cmluZyIgPT0gdHlwZW9mIGUgJiYgZS5sZW5ndGggPiAwID8gdC5maW5kT25lKGUpIDogbnVsbCwgbCA9ICh0LCBlLCBpKSA9PiB7IE9iamVjdC5rZXlzKGkpLmZvckVhY2gobiA9PiB7IGNvbnN0IHMgPSBpW25dLCBvID0gZVtuXSwgYSA9IG8gJiYgcihvKSA/ICJlbGVtZW50IiA6IG51bGwgPT0gKGwgPSBvKSA/ICIiICsgbCA6IHt9LnRvU3RyaW5nLmNhbGwobCkubWF0Y2goL1xzKFthLXpdKykvaSlbMV0udG9Mb3dlckNhc2UoKTsgdmFyIGw7IGlmICghbmV3IFJlZ0V4cChzKS50ZXN0KGEpKSB0aHJvdyBuZXcgVHlwZUVycm9yKGAke3QudG9VcHBlckNhc2UoKX06IE9wdGlvbiAiJHtufSIgcHJvdmlkZWQgdHlwZSAiJHthfSIgYnV0IGV4cGVjdGVkIHR5cGUgIiR7c30iLmApIH0pIH0sIGMgPSB0ID0+ICEoIXIodCkgfHwgMCA9PT0gdC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCkgJiYgInZpc2libGUiID09PSBnZXRDb21wdXRlZFN0eWxlKHQpLmdldFByb3BlcnR5VmFsdWUoInZpc2liaWxpdHkiKSwgaCA9IHQgPT4gIXQgfHwgdC5ub2RlVHlwZSAhPT0gTm9kZS5FTEVNRU5UX05PREUgfHwgISF0LmNsYXNzTGlzdC5jb250YWlucygiZGlzYWJsZWQiKSB8fCAodm9pZCAwICE9PSB0LmRpc2FibGVkID8gdC5kaXNhYmxlZCA6IHQuaGFzQXR0cmlidXRlKCJkaXNhYmxlZCIpICYmICJmYWxzZSIgIT09IHQuZ2V0QXR0cmlidXRlKCJkaXNhYmxlZCIpKSwgZCA9IHQgPT4geyBpZiAoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hdHRhY2hTaGFkb3cpIHJldHVybiBudWxsOyBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgdC5nZXRSb290Tm9kZSkgeyBjb25zdCBlID0gdC5nZXRSb290Tm9kZSgpOyByZXR1cm4gZSBpbnN0YW5jZW9mIFNoYWRvd1Jvb3QgPyBlIDogbnVsbCB9IHJldHVybiB0IGluc3RhbmNlb2YgU2hhZG93Um9vdCA/IHQgOiB0LnBhcmVudE5vZGUgPyBkKHQucGFyZW50Tm9kZSkgOiBudWxsIH0sIHUgPSAoKSA9PiB7IH0sIGYgPSB0ID0+IHQub2Zmc2V0SGVpZ2h0LCBwID0gKCkgPT4geyBjb25zdCB7IGpRdWVyeTogdCB9ID0gd2luZG93OyByZXR1cm4gdCAmJiAhZG9jdW1lbnQuYm9keS5oYXNBdHRyaWJ1dGUoImRhdGEtYnMtbm8tanF1ZXJ5IikgPyB0IDogbnVsbCB9LCBtID0gW10sIGcgPSAoKSA9PiAicnRsIiA9PT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRpciwgXyA9IHQgPT4geyB2YXIgZTsgZSA9ICgpID0+IHsgY29uc3QgZSA9IHAoKTsgaWYgKGUpIHsgY29uc3QgaSA9IHQuTkFNRSwgbiA9IGUuZm5baV07IGUuZm5baV0gPSB0LmpRdWVyeUludGVyZmFjZSwgZS5mbltpXS5Db25zdHJ1Y3RvciA9IHQsIGUuZm5baV0ubm9Db25mbGljdCA9ICgpID0+IChlLmZuW2ldID0gbiwgdC5qUXVlcnlJbnRlcmZhY2UpIH0gfSwgImxvYWRpbmciID09PSBkb2N1bWVudC5yZWFkeVN0YXRlID8gKG0ubGVuZ3RoIHx8IGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCAoKSA9PiB7IG0uZm9yRWFjaCh0ID0+IHQoKSkgfSksIG0ucHVzaChlKSkgOiBlKCkgfSwgYiA9IHQgPT4geyAiZnVuY3Rpb24iID09IHR5cGVvZiB0ICYmIHQoKSB9LCB2ID0gKHQsIGUsIGkgPSAhMCkgPT4geyBpZiAoIWkpIHJldHVybiB2b2lkIGIodCk7IGNvbnN0IG4gPSAodCA9PiB7IGlmICghdCkgcmV0dXJuIDA7IGxldCB7IHRyYW5zaXRpb25EdXJhdGlvbjogZSwgdHJhbnNpdGlvbkRlbGF5OiBpIH0gPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KTsgY29uc3QgbiA9IE51bWJlci5wYXJzZUZsb2F0KGUpLCBzID0gTnVtYmVyLnBhcnNlRmxvYXQoaSk7IHJldHVybiBuIHx8IHMgPyAoZSA9IGUuc3BsaXQoIiwiKVswXSwgaSA9IGkuc3BsaXQoIiwiKVswXSwgMWUzICogKE51bWJlci5wYXJzZUZsb2F0KGUpICsgTnVtYmVyLnBhcnNlRmxvYXQoaSkpKSA6IDAgfSkoZSkgKyA1OyBsZXQgcyA9ICExOyBjb25zdCByID0gKHsgdGFyZ2V0OiBpIH0pID0+IHsgaSA9PT0gZSAmJiAocyA9ICEwLCBlLnJlbW92ZUV2ZW50TGlzdGVuZXIoInRyYW5zaXRpb25lbmQiLCByKSwgYih0KSkgfTsgZS5hZGRFdmVudExpc3RlbmVyKCJ0cmFuc2l0aW9uZW5kIiwgciksIHNldFRpbWVvdXQoKCkgPT4geyBzIHx8IG8oZSkgfSwgbikgfSwgeSA9ICh0LCBlLCBpLCBuKSA9PiB7IGxldCBzID0gdC5pbmRleE9mKGUpOyBpZiAoLTEgPT09IHMpIHJldHVybiB0WyFpICYmIG4gPyB0Lmxlbmd0aCAtIDEgOiAwXTsgY29uc3QgbyA9IHQubGVuZ3RoOyByZXR1cm4gcyArPSBpID8gMSA6IC0xLCBuICYmIChzID0gKHMgKyBvKSAlIG8pLCB0W01hdGgubWF4KDAsIE1hdGgubWluKHMsIG8gLSAxKSldIH0sIHcgPSAvW14uXSooPz1cLi4qKVwufC4qLywgRSA9IC9cLi4qLywgQSA9IC86OlxkKyQvLCBUID0ge307IGxldCBPID0gMTsgY29uc3QgQyA9IHsgbW91c2VlbnRlcjogIm1vdXNlb3ZlciIsIG1vdXNlbGVhdmU6ICJtb3VzZW91dCIgfSwgayA9IC9eKG1vdXNlZW50ZXJ8bW91c2VsZWF2ZSkvaSwgTCA9IG5ldyBTZXQoWyJjbGljayIsICJkYmxjbGljayIsICJtb3VzZXVwIiwgIm1vdXNlZG93biIsICJjb250ZXh0bWVudSIsICJtb3VzZXdoZWVsIiwgIkRPTU1vdXNlU2Nyb2xsIiwgIm1vdXNlb3ZlciIsICJtb3VzZW91dCIsICJtb3VzZW1vdmUiLCAic2VsZWN0c3RhcnQiLCAic2VsZWN0ZW5kIiwgImtleWRvd24iLCAia2V5cHJlc3MiLCAia2V5dXAiLCAib3JpZW50YXRpb25jaGFuZ2UiLCAidG91Y2hzdGFydCIsICJ0b3VjaG1vdmUiLCAidG91Y2hlbmQiLCAidG91Y2hjYW5jZWwiLCAicG9pbnRlcmRvd24iLCAicG9pbnRlcm1vdmUiLCAicG9pbnRlcnVwIiwgInBvaW50ZXJsZWF2ZSIsICJwb2ludGVyY2FuY2VsIiwgImdlc3R1cmVzdGFydCIsICJnZXN0dXJlY2hhbmdlIiwgImdlc3R1cmVlbmQiLCAiZm9jdXMiLCAiYmx1ciIsICJjaGFuZ2UiLCAicmVzZXQiLCAic2VsZWN0IiwgInN1Ym1pdCIsICJmb2N1c2luIiwgImZvY3Vzb3V0IiwgImxvYWQiLCAidW5sb2FkIiwgImJlZm9yZXVubG9hZCIsICJyZXNpemUiLCAibW92ZSIsICJET01Db250ZW50TG9hZGVkIiwgInJlYWR5c3RhdGVjaGFuZ2UiLCAiZXJyb3IiLCAiYWJvcnQiLCAic2Nyb2xsIl0pOyBmdW5jdGlvbiB4KHQsIGUpIHsgcmV0dXJuIGUgJiYgYCR7ZX06OiR7TysrfWAgfHwgdC51aWRFdmVudCB8fCBPKysgfSBmdW5jdGlvbiBEKHQpIHsgY29uc3QgZSA9IHgodCk7IHJldHVybiB0LnVpZEV2ZW50ID0gZSwgVFtlXSA9IFRbZV0gfHwge30sIFRbZV0gfSBmdW5jdGlvbiBTKHQsIGUsIGkgPSBudWxsKSB7IGNvbnN0IG4gPSBPYmplY3Qua2V5cyh0KTsgZm9yIChsZXQgcyA9IDAsIG8gPSBuLmxlbmd0aDsgcyA8IG87IHMrKykgeyBjb25zdCBvID0gdFtuW3NdXTsgaWYgKG8ub3JpZ2luYWxIYW5kbGVyID09PSBlICYmIG8uZGVsZWdhdGlvblNlbGVjdG9yID09PSBpKSByZXR1cm4gbyB9IHJldHVybiBudWxsIH0gZnVuY3Rpb24gSSh0LCBlLCBpKSB7IGNvbnN0IG4gPSAic3RyaW5nIiA9PSB0eXBlb2YgZSwgcyA9IG4gPyBpIDogZTsgbGV0IG8gPSBNKHQpOyByZXR1cm4gTC5oYXMobykgfHwgKG8gPSB0KSwgW24sIHMsIG9dIH0gZnVuY3Rpb24gTih0LCBlLCBpLCBuLCBzKSB7IGlmICgic3RyaW5nIiAhPSB0eXBlb2YgZSB8fCAhdCkgcmV0dXJuOyBpZiAoaSB8fCAoaSA9IG4sIG4gPSBudWxsKSwgay50ZXN0KGUpKSB7IGNvbnN0IHQgPSB0ID0+IGZ1bmN0aW9uIChlKSB7IGlmICghZS5yZWxhdGVkVGFyZ2V0IHx8IGUucmVsYXRlZFRhcmdldCAhPT0gZS5kZWxlZ2F0ZVRhcmdldCAmJiAhZS5kZWxlZ2F0ZVRhcmdldC5jb250YWlucyhlLnJlbGF0ZWRUYXJnZXQpKSByZXR1cm4gdC5jYWxsKHRoaXMsIGUpIH07IG4gPyBuID0gdChuKSA6IGkgPSB0KGkpIH0gY29uc3QgW28sIHIsIGFdID0gSShlLCBpLCBuKSwgbCA9IEQodCksIGMgPSBsW2FdIHx8IChsW2FdID0ge30pLCBoID0gUyhjLCByLCBvID8gaSA6IG51bGwpOyBpZiAoaCkgcmV0dXJuIHZvaWQgKGgub25lT2ZmID0gaC5vbmVPZmYgJiYgcyk7IGNvbnN0IGQgPSB4KHIsIGUucmVwbGFjZSh3LCAiIikpLCB1ID0gbyA/IGZ1bmN0aW9uICh0LCBlLCBpKSB7IHJldHVybiBmdW5jdGlvbiBuKHMpIHsgY29uc3QgbyA9IHQucXVlcnlTZWxlY3RvckFsbChlKTsgZm9yIChsZXQgeyB0YXJnZXQ6IHIgfSA9IHM7IHIgJiYgciAhPT0gdGhpczsgciA9IHIucGFyZW50Tm9kZSlmb3IgKGxldCBhID0gby5sZW5ndGg7IGEtLTspaWYgKG9bYV0gPT09IHIpIHJldHVybiBzLmRlbGVnYXRlVGFyZ2V0ID0gciwgbi5vbmVPZmYgJiYgUC5vZmYodCwgcy50eXBlLCBlLCBpKSwgaS5hcHBseShyLCBbc10pOyByZXR1cm4gbnVsbCB9IH0odCwgaSwgbikgOiBmdW5jdGlvbiAodCwgZSkgeyByZXR1cm4gZnVuY3Rpb24gaShuKSB7IHJldHVybiBuLmRlbGVnYXRlVGFyZ2V0ID0gdCwgaS5vbmVPZmYgJiYgUC5vZmYodCwgbi50eXBlLCBlKSwgZS5hcHBseSh0LCBbbl0pIH0gfSh0LCBpKTsgdS5kZWxlZ2F0aW9uU2VsZWN0b3IgPSBvID8gaSA6IG51bGwsIHUub3JpZ2luYWxIYW5kbGVyID0gciwgdS5vbmVPZmYgPSBzLCB1LnVpZEV2ZW50ID0gZCwgY1tkXSA9IHUsIHQuYWRkRXZlbnRMaXN0ZW5lcihhLCB1LCBvKSB9IGZ1bmN0aW9uIGoodCwgZSwgaSwgbiwgcykgeyBjb25zdCBvID0gUyhlW2ldLCBuLCBzKTsgbyAmJiAodC5yZW1vdmVFdmVudExpc3RlbmVyKGksIG8sIEJvb2xlYW4ocykpLCBkZWxldGUgZVtpXVtvLnVpZEV2ZW50XSkgfSBmdW5jdGlvbiBNKHQpIHsgcmV0dXJuIHQgPSB0LnJlcGxhY2UoRSwgIiIpLCBDW3RdIHx8IHQgfSBjb25zdCBQID0geyBvbih0LCBlLCBpLCBuKSB7IE4odCwgZSwgaSwgbiwgITEpIH0sIG9uZSh0LCBlLCBpLCBuKSB7IE4odCwgZSwgaSwgbiwgITApIH0sIG9mZih0LCBlLCBpLCBuKSB7IGlmICgic3RyaW5nIiAhPSB0eXBlb2YgZSB8fCAhdCkgcmV0dXJuOyBjb25zdCBbcywgbywgcl0gPSBJKGUsIGksIG4pLCBhID0gciAhPT0gZSwgbCA9IEQodCksIGMgPSBlLnN0YXJ0c1dpdGgoIi4iKTsgaWYgKHZvaWQgMCAhPT0gbykgeyBpZiAoIWwgfHwgIWxbcl0pIHJldHVybjsgcmV0dXJuIHZvaWQgaih0LCBsLCByLCBvLCBzID8gaSA6IG51bGwpIH0gYyAmJiBPYmplY3Qua2V5cyhsKS5mb3JFYWNoKGkgPT4geyAhZnVuY3Rpb24gKHQsIGUsIGksIG4pIHsgY29uc3QgcyA9IGVbaV0gfHwge307IE9iamVjdC5rZXlzKHMpLmZvckVhY2gobyA9PiB7IGlmIChvLmluY2x1ZGVzKG4pKSB7IGNvbnN0IG4gPSBzW29dOyBqKHQsIGUsIGksIG4ub3JpZ2luYWxIYW5kbGVyLCBuLmRlbGVnYXRpb25TZWxlY3RvcikgfSB9KSB9KHQsIGwsIGksIGUuc2xpY2UoMSkpIH0pOyBjb25zdCBoID0gbFtyXSB8fCB7fTsgT2JqZWN0LmtleXMoaCkuZm9yRWFjaChpID0+IHsgY29uc3QgbiA9IGkucmVwbGFjZShBLCAiIik7IGlmICghYSB8fCBlLmluY2x1ZGVzKG4pKSB7IGNvbnN0IGUgPSBoW2ldOyBqKHQsIGwsIHIsIGUub3JpZ2luYWxIYW5kbGVyLCBlLmRlbGVnYXRpb25TZWxlY3RvcikgfSB9KSB9LCB0cmlnZ2VyKHQsIGUsIGkpIHsgaWYgKCJzdHJpbmciICE9IHR5cGVvZiBlIHx8ICF0KSByZXR1cm4gbnVsbDsgY29uc3QgbiA9IHAoKSwgcyA9IE0oZSksIG8gPSBlICE9PSBzLCByID0gTC5oYXMocyk7IGxldCBhLCBsID0gITAsIGMgPSAhMCwgaCA9ICExLCBkID0gbnVsbDsgcmV0dXJuIG8gJiYgbiAmJiAoYSA9IG4uRXZlbnQoZSwgaSksIG4odCkudHJpZ2dlcihhKSwgbCA9ICFhLmlzUHJvcGFnYXRpb25TdG9wcGVkKCksIGMgPSAhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpLCBoID0gYS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSksIHIgPyAoZCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCJIVE1MRXZlbnRzIiksIGQuaW5pdEV2ZW50KHMsIGwsICEwKSkgOiBkID0gbmV3IEN1c3RvbUV2ZW50KGUsIHsgYnViYmxlczogbCwgY2FuY2VsYWJsZTogITAgfSksIHZvaWQgMCAhPT0gaSAmJiBPYmplY3Qua2V5cyhpKS5mb3JFYWNoKHQgPT4geyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZCwgdCwgeyBnZXQ6ICgpID0+IGlbdF0gfSkgfSksIGggJiYgZC5wcmV2ZW50RGVmYXVsdCgpLCBjICYmIHQuZGlzcGF0Y2hFdmVudChkKSwgZC5kZWZhdWx0UHJldmVudGVkICYmIHZvaWQgMCAhPT0gYSAmJiBhLnByZXZlbnREZWZhdWx0KCksIGQgfSB9LCBIID0gbmV3IE1hcDsgdmFyIFIgPSB7IHNldCh0LCBlLCBpKSB7IEguaGFzKHQpIHx8IEguc2V0KHQsIG5ldyBNYXApOyBjb25zdCBuID0gSC5nZXQodCk7IG4uaGFzKGUpIHx8IDAgPT09IG4uc2l6ZSA/IG4uc2V0KGUsIGkpIDogY29uc29sZS5lcnJvcihgQm9vdHN0cmFwIGRvZXNuJ3QgYWxsb3cgbW9yZSB0aGFuIG9uZSBpbnN0YW5jZSBwZXIgZWxlbWVudC4gQm91bmQgaW5zdGFuY2U6ICR7QXJyYXkuZnJvbShuLmtleXMoKSlbMF19LmApIH0sIGdldDogKHQsIGUpID0+IEguaGFzKHQpICYmIEguZ2V0KHQpLmdldChlKSB8fCBudWxsLCByZW1vdmUodCwgZSkgeyBpZiAoIUguaGFzKHQpKSByZXR1cm47IGNvbnN0IGkgPSBILmdldCh0KTsgaS5kZWxldGUoZSksIDAgPT09IGkuc2l6ZSAmJiBILmRlbGV0ZSh0KSB9IH07IGNsYXNzIEIgeyBjb25zdHJ1Y3Rvcih0KSB7ICh0ID0gYSh0KSkgJiYgKHRoaXMuX2VsZW1lbnQgPSB0LCBSLnNldCh0aGlzLl9lbGVtZW50LCB0aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZLCB0aGlzKSkgfSBkaXNwb3NlKCkgeyBSLnJlbW92ZSh0aGlzLl9lbGVtZW50LCB0aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZKSwgUC5vZmYodGhpcy5fZWxlbWVudCwgdGhpcy5jb25zdHJ1Y3Rvci5FVkVOVF9LRVkpLCBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzKS5mb3JFYWNoKHQgPT4geyB0aGlzW3RdID0gbnVsbCB9KSB9IF9xdWV1ZUNhbGxiYWNrKHQsIGUsIGkgPSAhMCkgeyB2KHQsIGUsIGkpIH0gc3RhdGljIGdldEluc3RhbmNlKHQpIHsgcmV0dXJuIFIuZ2V0KHQsIHRoaXMuREFUQV9LRVkpIH0gc3RhdGljIGdldE9yQ3JlYXRlSW5zdGFuY2UodCwgZSA9IHt9KSB7IHJldHVybiB0aGlzLmdldEluc3RhbmNlKHQpIHx8IG5ldyB0aGlzKHQsICJvYmplY3QiID09IHR5cGVvZiBlID8gZSA6IG51bGwpIH0gc3RhdGljIGdldCBWRVJTSU9OKCkgeyByZXR1cm4gIjUuMC4yIiB9IHN0YXRpYyBnZXQgTkFNRSgpIHsgdGhyb3cgbmV3IEVycm9yKCdZb3UgaGF2ZSB0byBpbXBsZW1lbnQgdGhlIHN0YXRpYyBtZXRob2QgIk5BTUUiLCBmb3IgZWFjaCBjb21wb25lbnQhJykgfSBzdGF0aWMgZ2V0IERBVEFfS0VZKCkgeyByZXR1cm4gImJzLiIgKyB0aGlzLk5BTUUgfSBzdGF0aWMgZ2V0IEVWRU5UX0tFWSgpIHsgcmV0dXJuICIuIiArIHRoaXMuREFUQV9LRVkgfSB9IGNsYXNzIFcgZXh0ZW5kcyBCIHsgc3RhdGljIGdldCBOQU1FKCkgeyByZXR1cm4gImFsZXJ0IiB9IGNsb3NlKHQpIHsgY29uc3QgZSA9IHQgPyB0aGlzLl9nZXRSb290RWxlbWVudCh0KSA6IHRoaXMuX2VsZW1lbnQsIGkgPSB0aGlzLl90cmlnZ2VyQ2xvc2VFdmVudChlKTsgbnVsbCA9PT0gaSB8fCBpLmRlZmF1bHRQcmV2ZW50ZWQgfHwgdGhpcy5fcmVtb3ZlRWxlbWVudChlKSB9IF9nZXRSb290RWxlbWVudCh0KSB7IHJldHVybiBzKHQpIHx8IHQuY2xvc2VzdCgiLmFsZXJ0IikgfSBfdHJpZ2dlckNsb3NlRXZlbnQodCkgeyByZXR1cm4gUC50cmlnZ2VyKHQsICJjbG9zZS5icy5hbGVydCIpIH0gX3JlbW92ZUVsZW1lbnQodCkgeyB0LmNsYXNzTGlzdC5yZW1vdmUoInNob3ciKTsgY29uc3QgZSA9IHQuY2xhc3NMaXN0LmNvbnRhaW5zKCJmYWRlIik7IHRoaXMuX3F1ZXVlQ2FsbGJhY2soKCkgPT4gdGhpcy5fZGVzdHJveUVsZW1lbnQodCksIHQsIGUpIH0gX2Rlc3Ryb3lFbGVtZW50KHQpIHsgdC5yZW1vdmUoKSwgUC50cmlnZ2VyKHQsICJjbG9zZWQuYnMuYWxlcnQiKSB9IHN0YXRpYyBqUXVlcnlJbnRlcmZhY2UodCkgeyByZXR1cm4gdGhpcy5lYWNoKChmdW5jdGlvbiAoKSB7IGNvbnN0IGUgPSBXLmdldE9yQ3JlYXRlSW5zdGFuY2UodGhpcyk7ICJjbG9zZSIgPT09IHQgJiYgZVt0XSh0aGlzKSB9KSkgfSBzdGF0aWMgaGFuZGxlRGlzbWlzcyh0KSB7IHJldHVybiBmdW5jdGlvbiAoZSkgeyBlICYmIGUucHJldmVudERlZmF1bHQoKSwgdC5jbG9zZSh0aGlzKSB9IH0gfSBQLm9uKGRvY3VtZW50LCAiY2xpY2suYnMuYWxlcnQuZGF0YS1hcGkiLCAnW2RhdGEtYnMtZGlzbWlzcz0iYWxlcnQiXScsIFcuaGFuZGxlRGlzbWlzcyhuZXcgVykpLCBfKFcpOyBjbGFzcyBxIGV4dGVuZHMgQiB7IHN0YXRpYyBnZXQgTkFNRSgpIHsgcmV0dXJuICJidXR0b24iIH0gdG9nZ2xlKCkgeyB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgiYXJpYS1wcmVzc2VkIiwgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCJhY3RpdmUiKSkgfSBzdGF0aWMgalF1ZXJ5SW50ZXJmYWNlKHQpIHsgcmV0dXJuIHRoaXMuZWFjaCgoZnVuY3Rpb24gKCkgeyBjb25zdCBlID0gcS5nZXRPckNyZWF0ZUluc3RhbmNlKHRoaXMpOyAidG9nZ2xlIiA9PT0gdCAmJiBlW3RdKCkgfSkpIH0gfSBmdW5jdGlvbiB6KHQpIHsgcmV0dXJuICJ0cnVlIiA9PT0gdCB8fCAiZmFsc2UiICE9PSB0ICYmICh0ID09PSBOdW1iZXIodCkudG9TdHJpbmcoKSA/IE51bWJlcih0KSA6ICIiID09PSB0IHx8ICJudWxsIiA9PT0gdCA/IG51bGwgOiB0KSB9IGZ1bmN0aW9uICQodCkgeyByZXR1cm4gdC5yZXBsYWNlKC9bQS1aXS9nLCB0ID0+ICItIiArIHQudG9Mb3dlckNhc2UoKSkgfSBQLm9uKGRvY3VtZW50LCAiY2xpY2suYnMuYnV0dG9uLmRhdGEtYXBpIiwgJ1tkYXRhLWJzLXRvZ2dsZT0iYnV0dG9uIl0nLCB0ID0+IHsgdC5wcmV2ZW50RGVmYXVsdCgpOyBjb25zdCBlID0gdC50YXJnZXQuY2xvc2VzdCgnW2RhdGEtYnMtdG9nZ2xlPSJidXR0b24iXScpOyBxLmdldE9yQ3JlYXRlSW5zdGFuY2UoZSkudG9nZ2xlKCkgfSksIF8ocSk7IGNvbnN0IFUgPSB7IHNldERhdGFBdHRyaWJ1dGUodCwgZSwgaSkgeyB0LnNldEF0dHJpYnV0ZSgiZGF0YS1icy0iICsgJChlKSwgaSkgfSwgcmVtb3ZlRGF0YUF0dHJpYnV0ZSh0LCBlKSB7IHQucmVtb3ZlQXR0cmlidXRlKCJkYXRhLWJzLSIgKyAkKGUpKSB9LCBnZXREYXRhQXR0cmlidXRlcyh0KSB7IGlmICghdCkgcmV0dXJuIHt9OyBjb25zdCBlID0ge307IHJldHVybiBPYmplY3Qua2V5cyh0LmRhdGFzZXQpLmZpbHRlcih0ID0+IHQuc3RhcnRzV2l0aCgiYnMiKSkuZm9yRWFjaChpID0+IHsgbGV0IG4gPSBpLnJlcGxhY2UoL15icy8sICIiKTsgbiA9IG4uY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyBuLnNsaWNlKDEsIG4ubGVuZ3RoKSwgZVtuXSA9IHoodC5kYXRhc2V0W2ldKSB9KSwgZSB9LCBnZXREYXRhQXR0cmlidXRlOiAodCwgZSkgPT4geih0LmdldEF0dHJpYnV0ZSgiZGF0YS1icy0iICsgJChlKSkpLCBvZmZzZXQodCkgeyBjb25zdCBlID0gdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgcmV0dXJuIHsgdG9wOiBlLnRvcCArIGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wLCBsZWZ0OiBlLmxlZnQgKyBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgfSB9LCBwb3NpdGlvbjogdCA9PiAoeyB0b3A6IHQub2Zmc2V0VG9wLCBsZWZ0OiB0Lm9mZnNldExlZnQgfSkgfSwgRiA9IHsgaW50ZXJ2YWw6IDVlMywga2V5Ym9hcmQ6ICEwLCBzbGlkZTogITEsIHBhdXNlOiAiaG92ZXIiLCB3cmFwOiAhMCwgdG91Y2g6ICEwIH0sIFYgPSB7IGludGVydmFsOiAiKG51bWJlcnxib29sZWFuKSIsIGtleWJvYXJkOiAiYm9vbGVhbiIsIHNsaWRlOiAiKGJvb2xlYW58c3RyaW5nKSIsIHBhdXNlOiAiKHN0cmluZ3xib29sZWFuKSIsIHdyYXA6ICJib29sZWFuIiwgdG91Y2g6ICJib29sZWFuIiB9LCBLID0gIm5leHQiLCBYID0gInByZXYiLCBZID0gImxlZnQiLCBRID0gInJpZ2h0IiwgRyA9IHsgQXJyb3dMZWZ0OiBRLCBBcnJvd1JpZ2h0OiBZIH07IGNsYXNzIFogZXh0ZW5kcyBCIHsgY29uc3RydWN0b3IoZSwgaSkgeyBzdXBlcihlKSwgdGhpcy5faXRlbXMgPSBudWxsLCB0aGlzLl9pbnRlcnZhbCA9IG51bGwsIHRoaXMuX2FjdGl2ZUVsZW1lbnQgPSBudWxsLCB0aGlzLl9pc1BhdXNlZCA9ICExLCB0aGlzLl9pc1NsaWRpbmcgPSAhMSwgdGhpcy50b3VjaFRpbWVvdXQgPSBudWxsLCB0aGlzLnRvdWNoU3RhcnRYID0gMCwgdGhpcy50b3VjaERlbHRhWCA9IDAsIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhpKSwgdGhpcy5faW5kaWNhdG9yc0VsZW1lbnQgPSB0LmZpbmRPbmUoIi5jYXJvdXNlbC1pbmRpY2F0b3JzIiwgdGhpcy5fZWxlbWVudCksIHRoaXMuX3RvdWNoU3VwcG9ydGVkID0gIm9udG91Y2hzdGFydCIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8IG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDAsIHRoaXMuX3BvaW50ZXJFdmVudCA9IEJvb2xlYW4od2luZG93LlBvaW50ZXJFdmVudCksIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCkgfSBzdGF0aWMgZ2V0IERlZmF1bHQoKSB7IHJldHVybiBGIH0gc3RhdGljIGdldCBOQU1FKCkgeyByZXR1cm4gImNhcm91c2VsIiB9IG5leHQoKSB7IHRoaXMuX3NsaWRlKEspIH0gbmV4dFdoZW5WaXNpYmxlKCkgeyAhZG9jdW1lbnQuaGlkZGVuICYmIGModGhpcy5fZWxlbWVudCkgJiYgdGhpcy5uZXh0KCkgfSBwcmV2KCkgeyB0aGlzLl9zbGlkZShYKSB9IHBhdXNlKGUpIHsgZSB8fCAodGhpcy5faXNQYXVzZWQgPSAhMCksIHQuZmluZE9uZSgiLmNhcm91c2VsLWl0ZW0tbmV4dCwgLmNhcm91c2VsLWl0ZW0tcHJldiIsIHRoaXMuX2VsZW1lbnQpICYmIChvKHRoaXMuX2VsZW1lbnQpLCB0aGlzLmN5Y2xlKCEwKSksIGNsZWFySW50ZXJ2YWwodGhpcy5faW50ZXJ2YWwpLCB0aGlzLl9pbnRlcnZhbCA9IG51bGwgfSBjeWNsZSh0KSB7IHQgfHwgKHRoaXMuX2lzUGF1c2VkID0gITEpLCB0aGlzLl9pbnRlcnZhbCAmJiAoY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnRlcnZhbCksIHRoaXMuX2ludGVydmFsID0gbnVsbCksIHRoaXMuX2NvbmZpZyAmJiB0aGlzLl9jb25maWcuaW50ZXJ2YWwgJiYgIXRoaXMuX2lzUGF1c2VkICYmICh0aGlzLl91cGRhdGVJbnRlcnZhbCgpLCB0aGlzLl9pbnRlcnZhbCA9IHNldEludGVydmFsKChkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPyB0aGlzLm5leHRXaGVuVmlzaWJsZSA6IHRoaXMubmV4dCkuYmluZCh0aGlzKSwgdGhpcy5fY29uZmlnLmludGVydmFsKSkgfSB0byhlKSB7IHRoaXMuX2FjdGl2ZUVsZW1lbnQgPSB0LmZpbmRPbmUoIi5hY3RpdmUuY2Fyb3VzZWwtaXRlbSIsIHRoaXMuX2VsZW1lbnQpOyBjb25zdCBpID0gdGhpcy5fZ2V0SXRlbUluZGV4KHRoaXMuX2FjdGl2ZUVsZW1lbnQpOyBpZiAoZSA+IHRoaXMuX2l0ZW1zLmxlbmd0aCAtIDEgfHwgZSA8IDApIHJldHVybjsgaWYgKHRoaXMuX2lzU2xpZGluZykgcmV0dXJuIHZvaWQgUC5vbmUodGhpcy5fZWxlbWVudCwgInNsaWQuYnMuY2Fyb3VzZWwiLCAoKSA9PiB0aGlzLnRvKGUpKTsgaWYgKGkgPT09IGUpIHJldHVybiB0aGlzLnBhdXNlKCksIHZvaWQgdGhpcy5jeWNsZSgpOyBjb25zdCBuID0gZSA+IGkgPyBLIDogWDsgdGhpcy5fc2xpZGUobiwgdGhpcy5faXRlbXNbZV0pIH0gX2dldENvbmZpZyh0KSB7IHJldHVybiB0ID0geyAuLi5GLCAuLi5VLmdldERhdGFBdHRyaWJ1dGVzKHRoaXMuX2VsZW1lbnQpLCAuLi4ib2JqZWN0IiA9PSB0eXBlb2YgdCA/IHQgOiB7fSB9LCBsKCJjYXJvdXNlbCIsIHQsIFYpLCB0IH0gX2hhbmRsZVN3aXBlKCkgeyBjb25zdCB0ID0gTWF0aC5hYnModGhpcy50b3VjaERlbHRhWCk7IGlmICh0IDw9IDQwKSByZXR1cm47IGNvbnN0IGUgPSB0IC8gdGhpcy50b3VjaERlbHRhWDsgdGhpcy50b3VjaERlbHRhWCA9IDAsIGUgJiYgdGhpcy5fc2xpZGUoZSA+IDAgPyBRIDogWSkgfSBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7IHRoaXMuX2NvbmZpZy5rZXlib2FyZCAmJiBQLm9uKHRoaXMuX2VsZW1lbnQsICJrZXlkb3duLmJzLmNhcm91c2VsIiwgdCA9PiB0aGlzLl9rZXlkb3duKHQpKSwgImhvdmVyIiA9PT0gdGhpcy5fY29uZmlnLnBhdXNlICYmIChQLm9uKHRoaXMuX2VsZW1lbnQsICJtb3VzZWVudGVyLmJzLmNhcm91c2VsIiwgdCA9PiB0aGlzLnBhdXNlKHQpKSwgUC5vbih0aGlzLl9lbGVtZW50LCAibW91c2VsZWF2ZS5icy5jYXJvdXNlbCIsIHQgPT4gdGhpcy5jeWNsZSh0KSkpLCB0aGlzLl9jb25maWcudG91Y2ggJiYgdGhpcy5fdG91Y2hTdXBwb3J0ZWQgJiYgdGhpcy5fYWRkVG91Y2hFdmVudExpc3RlbmVycygpIH0gX2FkZFRvdWNoRXZlbnRMaXN0ZW5lcnMoKSB7IGNvbnN0IGUgPSB0ID0+IHsgIXRoaXMuX3BvaW50ZXJFdmVudCB8fCAicGVuIiAhPT0gdC5wb2ludGVyVHlwZSAmJiAidG91Y2giICE9PSB0LnBvaW50ZXJUeXBlID8gdGhpcy5fcG9pbnRlckV2ZW50IHx8ICh0aGlzLnRvdWNoU3RhcnRYID0gdC50b3VjaGVzWzBdLmNsaWVudFgpIDogdGhpcy50b3VjaFN0YXJ0WCA9IHQuY2xpZW50WCB9LCBpID0gdCA9PiB7IHRoaXMudG91Y2hEZWx0YVggPSB0LnRvdWNoZXMgJiYgdC50b3VjaGVzLmxlbmd0aCA+IDEgPyAwIDogdC50b3VjaGVzWzBdLmNsaWVudFggLSB0aGlzLnRvdWNoU3RhcnRYIH0sIG4gPSB0ID0+IHsgIXRoaXMuX3BvaW50ZXJFdmVudCB8fCAicGVuIiAhPT0gdC5wb2ludGVyVHlwZSAmJiAidG91Y2giICE9PSB0LnBvaW50ZXJUeXBlIHx8ICh0aGlzLnRvdWNoRGVsdGFYID0gdC5jbGllbnRYIC0gdGhpcy50b3VjaFN0YXJ0WCksIHRoaXMuX2hhbmRsZVN3aXBlKCksICJob3ZlciIgPT09IHRoaXMuX2NvbmZpZy5wYXVzZSAmJiAodGhpcy5wYXVzZSgpLCB0aGlzLnRvdWNoVGltZW91dCAmJiBjbGVhclRpbWVvdXQodGhpcy50b3VjaFRpbWVvdXQpLCB0aGlzLnRvdWNoVGltZW91dCA9IHNldFRpbWVvdXQodCA9PiB0aGlzLmN5Y2xlKHQpLCA1MDAgKyB0aGlzLl9jb25maWcuaW50ZXJ2YWwpKSB9OyB0LmZpbmQoIi5jYXJvdXNlbC1pdGVtIGltZyIsIHRoaXMuX2VsZW1lbnQpLmZvckVhY2godCA9PiB7IFAub24odCwgImRyYWdzdGFydC5icy5jYXJvdXNlbCIsIHQgPT4gdC5wcmV2ZW50RGVmYXVsdCgpKSB9KSwgdGhpcy5fcG9pbnRlckV2ZW50ID8gKFAub24odGhpcy5fZWxlbWVudCwgInBvaW50ZXJkb3duLmJzLmNhcm91c2VsIiwgdCA9PiBlKHQpKSwgUC5vbih0aGlzLl9lbGVtZW50LCAicG9pbnRlcnVwLmJzLmNhcm91c2VsIiwgdCA9PiBuKHQpKSwgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJwb2ludGVyLWV2ZW50IikpIDogKFAub24odGhpcy5fZWxlbWVudCwgInRvdWNoc3RhcnQuYnMuY2Fyb3VzZWwiLCB0ID0+IGUodCkpLCBQLm9uKHRoaXMuX2VsZW1lbnQsICJ0b3VjaG1vdmUuYnMuY2Fyb3VzZWwiLCB0ID0+IGkodCkpLCBQLm9uKHRoaXMuX2VsZW1lbnQsICJ0b3VjaGVuZC5icy5jYXJvdXNlbCIsIHQgPT4gbih0KSkpIH0gX2tleWRvd24odCkgeyBpZiAoL2lucHV0fHRleHRhcmVhL2kudGVzdCh0LnRhcmdldC50YWdOYW1lKSkgcmV0dXJuOyBjb25zdCBlID0gR1t0LmtleV07IGUgJiYgKHQucHJldmVudERlZmF1bHQoKSwgdGhpcy5fc2xpZGUoZSkpIH0gX2dldEl0ZW1JbmRleChlKSB7IHJldHVybiB0aGlzLl9pdGVtcyA9IGUgJiYgZS5wYXJlbnROb2RlID8gdC5maW5kKCIuY2Fyb3VzZWwtaXRlbSIsIGUucGFyZW50Tm9kZSkgOiBbXSwgdGhpcy5faXRlbXMuaW5kZXhPZihlKSB9IF9nZXRJdGVtQnlPcmRlcih0LCBlKSB7IGNvbnN0IGkgPSB0ID09PSBLOyByZXR1cm4geSh0aGlzLl9pdGVtcywgZSwgaSwgdGhpcy5fY29uZmlnLndyYXApIH0gX3RyaWdnZXJTbGlkZUV2ZW50KGUsIGkpIHsgY29uc3QgbiA9IHRoaXMuX2dldEl0ZW1JbmRleChlKSwgcyA9IHRoaXMuX2dldEl0ZW1JbmRleCh0LmZpbmRPbmUoIi5hY3RpdmUuY2Fyb3VzZWwtaXRlbSIsIHRoaXMuX2VsZW1lbnQpKTsgcmV0dXJuIFAudHJpZ2dlcih0aGlzLl9lbGVtZW50LCAic2xpZGUuYnMuY2Fyb3VzZWwiLCB7IHJlbGF0ZWRUYXJnZXQ6IGUsIGRpcmVjdGlvbjogaSwgZnJvbTogcywgdG86IG4gfSkgfSBfc2V0QWN0aXZlSW5kaWNhdG9yRWxlbWVudChlKSB7IGlmICh0aGlzLl9pbmRpY2F0b3JzRWxlbWVudCkgeyBjb25zdCBpID0gdC5maW5kT25lKCIuYWN0aXZlIiwgdGhpcy5faW5kaWNhdG9yc0VsZW1lbnQpOyBpLmNsYXNzTGlzdC5yZW1vdmUoImFjdGl2ZSIpLCBpLnJlbW92ZUF0dHJpYnV0ZSgiYXJpYS1jdXJyZW50Iik7IGNvbnN0IG4gPSB0LmZpbmQoIltkYXRhLWJzLXRhcmdldF0iLCB0aGlzLl9pbmRpY2F0b3JzRWxlbWVudCk7IGZvciAobGV0IHQgPSAwOyB0IDwgbi5sZW5ndGg7IHQrKylpZiAoTnVtYmVyLnBhcnNlSW50KG5bdF0uZ2V0QXR0cmlidXRlKCJkYXRhLWJzLXNsaWRlLXRvIiksIDEwKSA9PT0gdGhpcy5fZ2V0SXRlbUluZGV4KGUpKSB7IG5bdF0uY2xhc3NMaXN0LmFkZCgiYWN0aXZlIiksIG5bdF0uc2V0QXR0cmlidXRlKCJhcmlhLWN1cnJlbnQiLCAidHJ1ZSIpOyBicmVhayB9IH0gfSBfdXBkYXRlSW50ZXJ2YWwoKSB7IGNvbnN0IGUgPSB0aGlzLl9hY3RpdmVFbGVtZW50IHx8IHQuZmluZE9uZSgiLmFjdGl2ZS5jYXJvdXNlbC1pdGVtIiwgdGhpcy5fZWxlbWVudCk7IGlmICghZSkgcmV0dXJuOyBjb25zdCBpID0gTnVtYmVyLnBhcnNlSW50KGUuZ2V0QXR0cmlidXRlKCJkYXRhLWJzLWludGVydmFsIiksIDEwKTsgaSA/ICh0aGlzLl9jb25maWcuZGVmYXVsdEludGVydmFsID0gdGhpcy5fY29uZmlnLmRlZmF1bHRJbnRlcnZhbCB8fCB0aGlzLl9jb25maWcuaW50ZXJ2YWwsIHRoaXMuX2NvbmZpZy5pbnRlcnZhbCA9IGkpIDogdGhpcy5fY29uZmlnLmludGVydmFsID0gdGhpcy5fY29uZmlnLmRlZmF1bHRJbnRlcnZhbCB8fCB0aGlzLl9jb25maWcuaW50ZXJ2YWwgfSBfc2xpZGUoZSwgaSkgeyBjb25zdCBuID0gdGhpcy5fZGlyZWN0aW9uVG9PcmRlcihlKSwgcyA9IHQuZmluZE9uZSgiLmFjdGl2ZS5jYXJvdXNlbC1pdGVtIiwgdGhpcy5fZWxlbWVudCksIG8gPSB0aGlzLl9nZXRJdGVtSW5kZXgocyksIHIgPSBpIHx8IHRoaXMuX2dldEl0ZW1CeU9yZGVyKG4sIHMpLCBhID0gdGhpcy5fZ2V0SXRlbUluZGV4KHIpLCBsID0gQm9vbGVhbih0aGlzLl9pbnRlcnZhbCksIGMgPSBuID09PSBLLCBoID0gYyA/ICJjYXJvdXNlbC1pdGVtLXN0YXJ0IiA6ICJjYXJvdXNlbC1pdGVtLWVuZCIsIGQgPSBjID8gImNhcm91c2VsLWl0ZW0tbmV4dCIgOiAiY2Fyb3VzZWwtaXRlbS1wcmV2IiwgdSA9IHRoaXMuX29yZGVyVG9EaXJlY3Rpb24obik7IGlmIChyICYmIHIuY2xhc3NMaXN0LmNvbnRhaW5zKCJhY3RpdmUiKSkgcmV0dXJuIHZvaWQgKHRoaXMuX2lzU2xpZGluZyA9ICExKTsgaWYgKHRoaXMuX2lzU2xpZGluZykgcmV0dXJuOyBpZiAodGhpcy5fdHJpZ2dlclNsaWRlRXZlbnQociwgdSkuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuOyBpZiAoIXMgfHwgIXIpIHJldHVybjsgdGhpcy5faXNTbGlkaW5nID0gITAsIGwgJiYgdGhpcy5wYXVzZSgpLCB0aGlzLl9zZXRBY3RpdmVJbmRpY2F0b3JFbGVtZW50KHIpLCB0aGlzLl9hY3RpdmVFbGVtZW50ID0gcjsgY29uc3QgcCA9ICgpID0+IHsgUC50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsICJzbGlkLmJzLmNhcm91c2VsIiwgeyByZWxhdGVkVGFyZ2V0OiByLCBkaXJlY3Rpb246IHUsIGZyb206IG8sIHRvOiBhIH0pIH07IGlmICh0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygic2xpZGUiKSkgeyByLmNsYXNzTGlzdC5hZGQoZCksIGYociksIHMuY2xhc3NMaXN0LmFkZChoKSwgci5jbGFzc0xpc3QuYWRkKGgpOyBjb25zdCB0ID0gKCkgPT4geyByLmNsYXNzTGlzdC5yZW1vdmUoaCwgZCksIHIuY2xhc3NMaXN0LmFkZCgiYWN0aXZlIiksIHMuY2xhc3NMaXN0LnJlbW92ZSgiYWN0aXZlIiwgZCwgaCksIHRoaXMuX2lzU2xpZGluZyA9ICExLCBzZXRUaW1lb3V0KHAsIDApIH07IHRoaXMuX3F1ZXVlQ2FsbGJhY2sodCwgcywgITApIH0gZWxzZSBzLmNsYXNzTGlzdC5yZW1vdmUoImFjdGl2ZSIpLCByLmNsYXNzTGlzdC5hZGQoImFjdGl2ZSIpLCB0aGlzLl9pc1NsaWRpbmcgPSAhMSwgcCgpOyBsICYmIHRoaXMuY3ljbGUoKSB9IF9kaXJlY3Rpb25Ub09yZGVyKHQpIHsgcmV0dXJuIFtRLCBZXS5pbmNsdWRlcyh0KSA/IGcoKSA/IHQgPT09IFkgPyBYIDogSyA6IHQgPT09IFkgPyBLIDogWCA6IHQgfSBfb3JkZXJUb0RpcmVjdGlvbih0KSB7IHJldHVybiBbSywgWF0uaW5jbHVkZXModCkgPyBnKCkgPyB0ID09PSBYID8gWSA6IFEgOiB0ID09PSBYID8gUSA6IFkgOiB0IH0gc3RhdGljIGNhcm91c2VsSW50ZXJmYWNlKHQsIGUpIHsgY29uc3QgaSA9IFouZ2V0T3JDcmVhdGVJbnN0YW5jZSh0LCBlKTsgbGV0IHsgX2NvbmZpZzogbiB9ID0gaTsgIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgKG4gPSB7IC4uLm4sIC4uLmUgfSk7IGNvbnN0IHMgPSAic3RyaW5nIiA9PSB0eXBlb2YgZSA/IGUgOiBuLnNsaWRlOyBpZiAoIm51bWJlciIgPT0gdHlwZW9mIGUpIGkudG8oZSk7IGVsc2UgaWYgKCJzdHJpbmciID09IHR5cGVvZiBzKSB7IGlmICh2b2lkIDAgPT09IGlbc10pIHRocm93IG5ldyBUeXBlRXJyb3IoYE5vIG1ldGhvZCBuYW1lZCAiJHtzfSJgKTsgaVtzXSgpIH0gZWxzZSBuLmludGVydmFsICYmIG4ucmlkZSAmJiAoaS5wYXVzZSgpLCBpLmN5Y2xlKCkpIH0gc3RhdGljIGpRdWVyeUludGVyZmFjZSh0KSB7IHJldHVybiB0aGlzLmVhY2goKGZ1bmN0aW9uICgpIHsgWi5jYXJvdXNlbEludGVyZmFjZSh0aGlzLCB0KSB9KSkgfSBzdGF0aWMgZGF0YUFwaUNsaWNrSGFuZGxlcih0KSB7IGNvbnN0IGUgPSBzKHRoaXMpOyBpZiAoIWUgfHwgIWUuY2xhc3NMaXN0LmNvbnRhaW5zKCJjYXJvdXNlbCIpKSByZXR1cm47IGNvbnN0IGkgPSB7IC4uLlUuZ2V0RGF0YUF0dHJpYnV0ZXMoZSksIC4uLlUuZ2V0RGF0YUF0dHJpYnV0ZXModGhpcykgfSwgbiA9IHRoaXMuZ2V0QXR0cmlidXRlKCJkYXRhLWJzLXNsaWRlLXRvIik7IG4gJiYgKGkuaW50ZXJ2YWwgPSAhMSksIFouY2Fyb3VzZWxJbnRlcmZhY2UoZSwgaSksIG4gJiYgWi5nZXRJbnN0YW5jZShlKS50byhuKSwgdC5wcmV2ZW50RGVmYXVsdCgpIH0gfSBQLm9uKGRvY3VtZW50LCAiY2xpY2suYnMuY2Fyb3VzZWwuZGF0YS1hcGkiLCAiW2RhdGEtYnMtc2xpZGVdLCBbZGF0YS1icy1zbGlkZS10b10iLCBaLmRhdGFBcGlDbGlja0hhbmRsZXIpLCBQLm9uKHdpbmRvdywgImxvYWQuYnMuY2Fyb3VzZWwuZGF0YS1hcGkiLCAoKSA9PiB7IGNvbnN0IGUgPSB0LmZpbmQoJ1tkYXRhLWJzLXJpZGU9ImNhcm91c2VsIl0nKTsgZm9yIChsZXQgdCA9IDAsIGkgPSBlLmxlbmd0aDsgdCA8IGk7IHQrKylaLmNhcm91c2VsSW50ZXJmYWNlKGVbdF0sIFouZ2V0SW5zdGFuY2UoZVt0XSkpIH0pLCBfKFopOyBjb25zdCBKID0geyB0b2dnbGU6ICEwLCBwYXJlbnQ6ICIiIH0sIHR0ID0geyB0b2dnbGU6ICJib29sZWFuIiwgcGFyZW50OiAiKHN0cmluZ3xlbGVtZW50KSIgfTsgY2xhc3MgZXQgZXh0ZW5kcyBCIHsgY29uc3RydWN0b3IoZSwgaSkgeyBzdXBlcihlKSwgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gITEsIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhpKSwgdGhpcy5fdHJpZ2dlckFycmF5ID0gdC5maW5kKGBbZGF0YS1icy10b2dnbGU9ImNvbGxhcHNlIl1baHJlZj0iIyR7dGhpcy5fZWxlbWVudC5pZH0iXSxbZGF0YS1icy10b2dnbGU9ImNvbGxhcHNlIl1bZGF0YS1icy10YXJnZXQ9IiMke3RoaXMuX2VsZW1lbnQuaWR9Il1gKTsgY29uc3QgcyA9IHQuZmluZCgnW2RhdGEtYnMtdG9nZ2xlPSJjb2xsYXBzZSJdJyk7IGZvciAobGV0IGUgPSAwLCBpID0gcy5sZW5ndGg7IGUgPCBpOyBlKyspIHsgY29uc3QgaSA9IHNbZV0sIG8gPSBuKGkpLCByID0gdC5maW5kKG8pLmZpbHRlcih0ID0+IHQgPT09IHRoaXMuX2VsZW1lbnQpOyBudWxsICE9PSBvICYmIHIubGVuZ3RoICYmICh0aGlzLl9zZWxlY3RvciA9IG8sIHRoaXMuX3RyaWdnZXJBcnJheS5wdXNoKGkpKSB9IHRoaXMuX3BhcmVudCA9IHRoaXMuX2NvbmZpZy5wYXJlbnQgPyB0aGlzLl9nZXRQYXJlbnQoKSA6IG51bGwsIHRoaXMuX2NvbmZpZy5wYXJlbnQgfHwgdGhpcy5fYWRkQXJpYUFuZENvbGxhcHNlZENsYXNzKHRoaXMuX2VsZW1lbnQsIHRoaXMuX3RyaWdnZXJBcnJheSksIHRoaXMuX2NvbmZpZy50b2dnbGUgJiYgdGhpcy50b2dnbGUoKSB9IHN0YXRpYyBnZXQgRGVmYXVsdCgpIHsgcmV0dXJuIEogfSBzdGF0aWMgZ2V0IE5BTUUoKSB7IHJldHVybiAiY29sbGFwc2UiIH0gdG9nZ2xlKCkgeyB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygic2hvdyIpID8gdGhpcy5oaWRlKCkgOiB0aGlzLnNob3coKSB9IHNob3coKSB7IGlmICh0aGlzLl9pc1RyYW5zaXRpb25pbmcgfHwgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoInNob3ciKSkgcmV0dXJuOyBsZXQgZSwgaTsgdGhpcy5fcGFyZW50ICYmIChlID0gdC5maW5kKCIuc2hvdywgLmNvbGxhcHNpbmciLCB0aGlzLl9wYXJlbnQpLmZpbHRlcih0ID0+ICJzdHJpbmciID09IHR5cGVvZiB0aGlzLl9jb25maWcucGFyZW50ID8gdC5nZXRBdHRyaWJ1dGUoImRhdGEtYnMtcGFyZW50IikgPT09IHRoaXMuX2NvbmZpZy5wYXJlbnQgOiB0LmNsYXNzTGlzdC5jb250YWlucygiY29sbGFwc2UiKSksIDAgPT09IGUubGVuZ3RoICYmIChlID0gbnVsbCkpOyBjb25zdCBuID0gdC5maW5kT25lKHRoaXMuX3NlbGVjdG9yKTsgaWYgKGUpIHsgY29uc3QgdCA9IGUuZmluZCh0ID0+IG4gIT09IHQpOyBpZiAoaSA9IHQgPyBldC5nZXRJbnN0YW5jZSh0KSA6IG51bGwsIGkgJiYgaS5faXNUcmFuc2l0aW9uaW5nKSByZXR1cm4gfSBpZiAoUC50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsICJzaG93LmJzLmNvbGxhcHNlIikuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuOyBlICYmIGUuZm9yRWFjaCh0ID0+IHsgbiAhPT0gdCAmJiBldC5jb2xsYXBzZUludGVyZmFjZSh0LCAiaGlkZSIpLCBpIHx8IFIuc2V0KHQsICJicy5jb2xsYXBzZSIsIG51bGwpIH0pOyBjb25zdCBzID0gdGhpcy5fZ2V0RGltZW5zaW9uKCk7IHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgiY29sbGFwc2UiKSwgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJjb2xsYXBzaW5nIiksIHRoaXMuX2VsZW1lbnQuc3R5bGVbc10gPSAwLCB0aGlzLl90cmlnZ2VyQXJyYXkubGVuZ3RoICYmIHRoaXMuX3RyaWdnZXJBcnJheS5mb3JFYWNoKHQgPT4geyB0LmNsYXNzTGlzdC5yZW1vdmUoImNvbGxhcHNlZCIpLCB0LnNldEF0dHJpYnV0ZSgiYXJpYS1leHBhbmRlZCIsICEwKSB9KSwgdGhpcy5zZXRUcmFuc2l0aW9uaW5nKCEwKTsgY29uc3QgbyA9ICJzY3JvbGwiICsgKHNbMF0udG9VcHBlckNhc2UoKSArIHMuc2xpY2UoMSkpOyB0aGlzLl9xdWV1ZUNhbGxiYWNrKCgpID0+IHsgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCJjb2xsYXBzaW5nIiksIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZCgiY29sbGFwc2UiLCAic2hvdyIpLCB0aGlzLl9lbGVtZW50LnN0eWxlW3NdID0gIiIsIHRoaXMuc2V0VHJhbnNpdGlvbmluZyghMSksIFAudHJpZ2dlcih0aGlzLl9lbGVtZW50LCAic2hvd24uYnMuY29sbGFwc2UiKSB9LCB0aGlzLl9lbGVtZW50LCAhMCksIHRoaXMuX2VsZW1lbnQuc3R5bGVbc10gPSB0aGlzLl9lbGVtZW50W29dICsgInB4IiB9IGhpZGUoKSB7IGlmICh0aGlzLl9pc1RyYW5zaXRpb25pbmcgfHwgIXRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCJzaG93IikpIHJldHVybjsgaWYgKFAudHJpZ2dlcih0aGlzLl9lbGVtZW50LCAiaGlkZS5icy5jb2xsYXBzZSIpLmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjsgY29uc3QgdCA9IHRoaXMuX2dldERpbWVuc2lvbigpOyB0aGlzLl9lbGVtZW50LnN0eWxlW3RdID0gdGhpcy5fZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVt0XSArICJweCIsIGYodGhpcy5fZWxlbWVudCksIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZCgiY29sbGFwc2luZyIpLCB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoImNvbGxhcHNlIiwgInNob3ciKTsgY29uc3QgZSA9IHRoaXMuX3RyaWdnZXJBcnJheS5sZW5ndGg7IGlmIChlID4gMCkgZm9yIChsZXQgdCA9IDA7IHQgPCBlOyB0KyspIHsgY29uc3QgZSA9IHRoaXMuX3RyaWdnZXJBcnJheVt0XSwgaSA9IHMoZSk7IGkgJiYgIWkuY2xhc3NMaXN0LmNvbnRhaW5zKCJzaG93IikgJiYgKGUuY2xhc3NMaXN0LmFkZCgiY29sbGFwc2VkIiksIGUuc2V0QXR0cmlidXRlKCJhcmlhLWV4cGFuZGVkIiwgITEpKSB9IHRoaXMuc2V0VHJhbnNpdGlvbmluZyghMCksIHRoaXMuX2VsZW1lbnQuc3R5bGVbdF0gPSAiIiwgdGhpcy5fcXVldWVDYWxsYmFjaygoKSA9PiB7IHRoaXMuc2V0VHJhbnNpdGlvbmluZyghMSksIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgiY29sbGFwc2luZyIpLCB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoImNvbGxhcHNlIiksIFAudHJpZ2dlcih0aGlzLl9lbGVtZW50LCAiaGlkZGVuLmJzLmNvbGxhcHNlIikgfSwgdGhpcy5fZWxlbWVudCwgITApIH0gc2V0VHJhbnNpdGlvbmluZyh0KSB7IHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IHQgfSBfZ2V0Q29uZmlnKHQpIHsgcmV0dXJuICh0ID0geyAuLi5KLCAuLi50IH0pLnRvZ2dsZSA9IEJvb2xlYW4odC50b2dnbGUpLCBsKCJjb2xsYXBzZSIsIHQsIHR0KSwgdCB9IF9nZXREaW1lbnNpb24oKSB7IHJldHVybiB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygid2lkdGgiKSA/ICJ3aWR0aCIgOiAiaGVpZ2h0IiB9IF9nZXRQYXJlbnQoKSB7IGxldCB7IHBhcmVudDogZSB9ID0gdGhpcy5fY29uZmlnOyBlID0gYShlKTsgY29uc3QgaSA9IGBbZGF0YS1icy10b2dnbGU9ImNvbGxhcHNlIl1bZGF0YS1icy1wYXJlbnQ9IiR7ZX0iXWA7IHJldHVybiB0LmZpbmQoaSwgZSkuZm9yRWFjaCh0ID0+IHsgY29uc3QgZSA9IHModCk7IHRoaXMuX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyhlLCBbdF0pIH0pLCBlIH0gX2FkZEFyaWFBbmRDb2xsYXBzZWRDbGFzcyh0LCBlKSB7IGlmICghdCB8fCAhZS5sZW5ndGgpIHJldHVybjsgY29uc3QgaSA9IHQuY2xhc3NMaXN0LmNvbnRhaW5zKCJzaG93Iik7IGUuZm9yRWFjaCh0ID0+IHsgaSA/IHQuY2xhc3NMaXN0LnJlbW92ZSgiY29sbGFwc2VkIikgOiB0LmNsYXNzTGlzdC5hZGQoImNvbGxhcHNlZCIpLCB0LnNldEF0dHJpYnV0ZSgiYXJpYS1leHBhbmRlZCIsIGkpIH0pIH0gc3RhdGljIGNvbGxhcHNlSW50ZXJmYWNlKHQsIGUpIHsgbGV0IGkgPSBldC5nZXRJbnN0YW5jZSh0KTsgY29uc3QgbiA9IHsgLi4uSiwgLi4uVS5nZXREYXRhQXR0cmlidXRlcyh0KSwgLi4uIm9iamVjdCIgPT0gdHlwZW9mIGUgJiYgZSA/IGUgOiB7fSB9OyBpZiAoIWkgJiYgbi50b2dnbGUgJiYgInN0cmluZyIgPT0gdHlwZW9mIGUgJiYgL3Nob3d8aGlkZS8udGVzdChlKSAmJiAobi50b2dnbGUgPSAhMSksIGkgfHwgKGkgPSBuZXcgZXQodCwgbikpLCAic3RyaW5nIiA9PSB0eXBlb2YgZSkgeyBpZiAodm9pZCAwID09PSBpW2VdKSB0aHJvdyBuZXcgVHlwZUVycm9yKGBObyBtZXRob2QgbmFtZWQgIiR7ZX0iYCk7IGlbZV0oKSB9IH0gc3RhdGljIGpRdWVyeUludGVyZmFjZSh0KSB7IHJldHVybiB0aGlzLmVhY2goKGZ1bmN0aW9uICgpIHsgZXQuY29sbGFwc2VJbnRlcmZhY2UodGhpcywgdCkgfSkpIH0gfSBQLm9uKGRvY3VtZW50LCAiY2xpY2suYnMuY29sbGFwc2UuZGF0YS1hcGkiLCAnW2RhdGEtYnMtdG9nZ2xlPSJjb2xsYXBzZSJdJywgKGZ1bmN0aW9uIChlKSB7ICgiQSIgPT09IGUudGFyZ2V0LnRhZ05hbWUgfHwgZS5kZWxlZ2F0ZVRhcmdldCAmJiAiQSIgPT09IGUuZGVsZWdhdGVUYXJnZXQudGFnTmFtZSkgJiYgZS5wcmV2ZW50RGVmYXVsdCgpOyBjb25zdCBpID0gVS5nZXREYXRhQXR0cmlidXRlcyh0aGlzKSwgcyA9IG4odGhpcyk7IHQuZmluZChzKS5mb3JFYWNoKHQgPT4geyBjb25zdCBlID0gZXQuZ2V0SW5zdGFuY2UodCk7IGxldCBuOyBlID8gKG51bGwgPT09IGUuX3BhcmVudCAmJiAic3RyaW5nIiA9PSB0eXBlb2YgaS5wYXJlbnQgJiYgKGUuX2NvbmZpZy5wYXJlbnQgPSBpLnBhcmVudCwgZS5fcGFyZW50ID0gZS5fZ2V0UGFyZW50KCkpLCBuID0gInRvZ2dsZSIpIDogbiA9IGksIGV0LmNvbGxhcHNlSW50ZXJmYWNlKHQsIG4pIH0pIH0pKSwgXyhldCk7IHZhciBpdCA9ICJ0b3AiLCBudCA9ICJib3R0b20iLCBzdCA9ICJyaWdodCIsIG90ID0gImxlZnQiLCBydCA9IFtpdCwgbnQsIHN0LCBvdF0sIGF0ID0gcnQucmVkdWNlKChmdW5jdGlvbiAodCwgZSkgeyByZXR1cm4gdC5jb25jYXQoW2UgKyAiLXN0YXJ0IiwgZSArICItZW5kIl0pIH0pLCBbXSksIGx0ID0gW10uY29uY2F0KHJ0LCBbImF1dG8iXSkucmVkdWNlKChmdW5jdGlvbiAodCwgZSkgeyByZXR1cm4gdC5jb25jYXQoW2UsIGUgKyAiLXN0YXJ0IiwgZSArICItZW5kIl0pIH0pLCBbXSksIGN0ID0gWyJiZWZvcmVSZWFkIiwgInJlYWQiLCAiYWZ0ZXJSZWFkIiwgImJlZm9yZU1haW4iLCAibWFpbiIsICJhZnRlck1haW4iLCAiYmVmb3JlV3JpdGUiLCAid3JpdGUiLCAiYWZ0ZXJXcml0ZSJdOyBmdW5jdGlvbiBodCh0KSB7IHJldHVybiB0ID8gKHQubm9kZU5hbWUgfHwgIiIpLnRvTG93ZXJDYXNlKCkgOiBudWxsIH0gZnVuY3Rpb24gZHQodCkgeyBpZiAobnVsbCA9PSB0KSByZXR1cm4gd2luZG93OyBpZiAoIltvYmplY3QgV2luZG93XSIgIT09IHQudG9TdHJpbmcoKSkgeyB2YXIgZSA9IHQub3duZXJEb2N1bWVudDsgcmV0dXJuIGUgJiYgZS5kZWZhdWx0VmlldyB8fCB3aW5kb3cgfSByZXR1cm4gdCB9IGZ1bmN0aW9uIHV0KHQpIHsgcmV0dXJuIHQgaW5zdGFuY2VvZiBkdCh0KS5FbGVtZW50IHx8IHQgaW5zdGFuY2VvZiBFbGVtZW50IH0gZnVuY3Rpb24gZnQodCkgeyByZXR1cm4gdCBpbnN0YW5jZW9mIGR0KHQpLkhUTUxFbGVtZW50IHx8IHQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCB9IGZ1bmN0aW9uIHB0KHQpIHsgcmV0dXJuICJ1bmRlZmluZWQiICE9IHR5cGVvZiBTaGFkb3dSb290ICYmICh0IGluc3RhbmNlb2YgZHQodCkuU2hhZG93Um9vdCB8fCB0IGluc3RhbmNlb2YgU2hhZG93Um9vdCkgfSB2YXIgbXQgPSB7IG5hbWU6ICJhcHBseVN0eWxlcyIsIGVuYWJsZWQ6ICEwLCBwaGFzZTogIndyaXRlIiwgZm46IGZ1bmN0aW9uICh0KSB7IHZhciBlID0gdC5zdGF0ZTsgT2JqZWN0LmtleXMoZS5lbGVtZW50cykuZm9yRWFjaCgoZnVuY3Rpb24gKHQpIHsgdmFyIGkgPSBlLnN0eWxlc1t0XSB8fCB7fSwgbiA9IGUuYXR0cmlidXRlc1t0XSB8fCB7fSwgcyA9IGUuZWxlbWVudHNbdF07IGZ0KHMpICYmIGh0KHMpICYmIChPYmplY3QuYXNzaWduKHMuc3R5bGUsIGkpLCBPYmplY3Qua2V5cyhuKS5mb3JFYWNoKChmdW5jdGlvbiAodCkgeyB2YXIgZSA9IG5bdF07ICExID09PSBlID8gcy5yZW1vdmVBdHRyaWJ1dGUodCkgOiBzLnNldEF0dHJpYnV0ZSh0LCAhMCA9PT0gZSA/ICIiIDogZSkgfSkpKSB9KSkgfSwgZWZmZWN0OiBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IHQuc3RhdGUsIGkgPSB7IHBvcHBlcjogeyBwb3NpdGlvbjogZS5vcHRpb25zLnN0cmF0ZWd5LCBsZWZ0OiAiMCIsIHRvcDogIjAiLCBtYXJnaW46ICIwIiB9LCBhcnJvdzogeyBwb3NpdGlvbjogImFic29sdXRlIiB9LCByZWZlcmVuY2U6IHt9IH07IHJldHVybiBPYmplY3QuYXNzaWduKGUuZWxlbWVudHMucG9wcGVyLnN0eWxlLCBpLnBvcHBlciksIGUuc3R5bGVzID0gaSwgZS5lbGVtZW50cy5hcnJvdyAmJiBPYmplY3QuYXNzaWduKGUuZWxlbWVudHMuYXJyb3cuc3R5bGUsIGkuYXJyb3cpLCBmdW5jdGlvbiAoKSB7IE9iamVjdC5rZXlzKGUuZWxlbWVudHMpLmZvckVhY2goKGZ1bmN0aW9uICh0KSB7IHZhciBuID0gZS5lbGVtZW50c1t0XSwgcyA9IGUuYXR0cmlidXRlc1t0XSB8fCB7fSwgbyA9IE9iamVjdC5rZXlzKGUuc3R5bGVzLmhhc093blByb3BlcnR5KHQpID8gZS5zdHlsZXNbdF0gOiBpW3RdKS5yZWR1Y2UoKGZ1bmN0aW9uICh0LCBlKSB7IHJldHVybiB0W2VdID0gIiIsIHQgfSksIHt9KTsgZnQobikgJiYgaHQobikgJiYgKE9iamVjdC5hc3NpZ24obi5zdHlsZSwgbyksIE9iamVjdC5rZXlzKHMpLmZvckVhY2goKGZ1bmN0aW9uICh0KSB7IG4ucmVtb3ZlQXR0cmlidXRlKHQpIH0pKSkgfSkpIH0gfSwgcmVxdWlyZXM6IFsiY29tcHV0ZVN0eWxlcyJdIH07IGZ1bmN0aW9uIGd0KHQpIHsgcmV0dXJuIHQuc3BsaXQoIi0iKVswXSB9IGZ1bmN0aW9uIF90KHQpIHsgdmFyIGUgPSB0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyByZXR1cm4geyB3aWR0aDogZS53aWR0aCwgaGVpZ2h0OiBlLmhlaWdodCwgdG9wOiBlLnRvcCwgcmlnaHQ6IGUucmlnaHQsIGJvdHRvbTogZS5ib3R0b20sIGxlZnQ6IGUubGVmdCwgeDogZS5sZWZ0LCB5OiBlLnRvcCB9IH0gZnVuY3Rpb24gYnQodCkgeyB2YXIgZSA9IF90KHQpLCBpID0gdC5vZmZzZXRXaWR0aCwgbiA9IHQub2Zmc2V0SGVpZ2h0OyByZXR1cm4gTWF0aC5hYnMoZS53aWR0aCAtIGkpIDw9IDEgJiYgKGkgPSBlLndpZHRoKSwgTWF0aC5hYnMoZS5oZWlnaHQgLSBuKSA8PSAxICYmIChuID0gZS5oZWlnaHQpLCB7IHg6IHQub2Zmc2V0TGVmdCwgeTogdC5vZmZzZXRUb3AsIHdpZHRoOiBpLCBoZWlnaHQ6IG4gfSB9IGZ1bmN0aW9uIHZ0KHQsIGUpIHsgdmFyIGkgPSBlLmdldFJvb3ROb2RlICYmIGUuZ2V0Um9vdE5vZGUoKTsgaWYgKHQuY29udGFpbnMoZSkpIHJldHVybiAhMDsgaWYgKGkgJiYgcHQoaSkpIHsgdmFyIG4gPSBlOyBkbyB7IGlmIChuICYmIHQuaXNTYW1lTm9kZShuKSkgcmV0dXJuICEwOyBuID0gbi5wYXJlbnROb2RlIHx8IG4uaG9zdCB9IHdoaWxlIChuKSB9IHJldHVybiAhMSB9IGZ1bmN0aW9uIHl0KHQpIHsgcmV0dXJuIGR0KHQpLmdldENvbXB1dGVkU3R5bGUodCkgfSBmdW5jdGlvbiB3dCh0KSB7IHJldHVybiBbInRhYmxlIiwgInRkIiwgInRoIl0uaW5kZXhPZihodCh0KSkgPj0gMCB9IGZ1bmN0aW9uIEV0KHQpIHsgcmV0dXJuICgodXQodCkgPyB0Lm93bmVyRG9jdW1lbnQgOiB0LmRvY3VtZW50KSB8fCB3aW5kb3cuZG9jdW1lbnQpLmRvY3VtZW50RWxlbWVudCB9IGZ1bmN0aW9uIEF0KHQpIHsgcmV0dXJuICJodG1sIiA9PT0gaHQodCkgPyB0IDogdC5hc3NpZ25lZFNsb3QgfHwgdC5wYXJlbnROb2RlIHx8IChwdCh0KSA/IHQuaG9zdCA6IG51bGwpIHx8IEV0KHQpIH0gZnVuY3Rpb24gVHQodCkgeyByZXR1cm4gZnQodCkgJiYgImZpeGVkIiAhPT0geXQodCkucG9zaXRpb24gPyB0Lm9mZnNldFBhcmVudCA6IG51bGwgfSBmdW5jdGlvbiBPdCh0KSB7IGZvciAodmFyIGUgPSBkdCh0KSwgaSA9IFR0KHQpOyBpICYmIHd0KGkpICYmICJzdGF0aWMiID09PSB5dChpKS5wb3NpdGlvbjspaSA9IFR0KGkpOyByZXR1cm4gaSAmJiAoImh0bWwiID09PSBodChpKSB8fCAiYm9keSIgPT09IGh0KGkpICYmICJzdGF0aWMiID09PSB5dChpKS5wb3NpdGlvbikgPyBlIDogaSB8fCBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IC0xICE9PSBuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZigiZmlyZWZveCIpOyBpZiAoLTEgIT09IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiVHJpZGVudCIpICYmIGZ0KHQpICYmICJmaXhlZCIgPT09IHl0KHQpLnBvc2l0aW9uKSByZXR1cm4gbnVsbDsgZm9yICh2YXIgaSA9IEF0KHQpOyBmdChpKSAmJiBbImh0bWwiLCAiYm9keSJdLmluZGV4T2YoaHQoaSkpIDwgMDspIHsgdmFyIG4gPSB5dChpKTsgaWYgKCJub25lIiAhPT0gbi50cmFuc2Zvcm0gfHwgIm5vbmUiICE9PSBuLnBlcnNwZWN0aXZlIHx8ICJwYWludCIgPT09IG4uY29udGFpbiB8fCAtMSAhPT0gWyJ0cmFuc2Zvcm0iLCAicGVyc3BlY3RpdmUiXS5pbmRleE9mKG4ud2lsbENoYW5nZSkgfHwgZSAmJiAiZmlsdGVyIiA9PT0gbi53aWxsQ2hhbmdlIHx8IGUgJiYgbi5maWx0ZXIgJiYgIm5vbmUiICE9PSBuLmZpbHRlcikgcmV0dXJuIGk7IGkgPSBpLnBhcmVudE5vZGUgfSByZXR1cm4gbnVsbCB9KHQpIHx8IGUgfSBmdW5jdGlvbiBDdCh0KSB7IHJldHVybiBbInRvcCIsICJib3R0b20iXS5pbmRleE9mKHQpID49IDAgPyAieCIgOiAieSIgfSB2YXIga3QgPSBNYXRoLm1heCwgTHQgPSBNYXRoLm1pbiwgeHQgPSBNYXRoLnJvdW5kOyBmdW5jdGlvbiBEdCh0LCBlLCBpKSB7IHJldHVybiBrdCh0LCBMdChlLCBpKSkgfSBmdW5jdGlvbiBTdCh0KSB7IHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB7IHRvcDogMCwgcmlnaHQ6IDAsIGJvdHRvbTogMCwgbGVmdDogMCB9LCB0KSB9IGZ1bmN0aW9uIEl0KHQsIGUpIHsgcmV0dXJuIGUucmVkdWNlKChmdW5jdGlvbiAoZSwgaSkgeyByZXR1cm4gZVtpXSA9IHQsIGUgfSksIHt9KSB9IHZhciBOdCA9IHsgbmFtZTogImFycm93IiwgZW5hYmxlZDogITAsIHBoYXNlOiAibWFpbiIsIGZuOiBmdW5jdGlvbiAodCkgeyB2YXIgZSwgaSA9IHQuc3RhdGUsIG4gPSB0Lm5hbWUsIHMgPSB0Lm9wdGlvbnMsIG8gPSBpLmVsZW1lbnRzLmFycm93LCByID0gaS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHMsIGEgPSBndChpLnBsYWNlbWVudCksIGwgPSBDdChhKSwgYyA9IFtvdCwgc3RdLmluZGV4T2YoYSkgPj0gMCA/ICJoZWlnaHQiIDogIndpZHRoIjsgaWYgKG8gJiYgcikgeyB2YXIgaCA9IGZ1bmN0aW9uICh0LCBlKSB7IHJldHVybiBTdCgibnVtYmVyIiAhPSB0eXBlb2YgKHQgPSAiZnVuY3Rpb24iID09IHR5cGVvZiB0ID8gdChPYmplY3QuYXNzaWduKHt9LCBlLnJlY3RzLCB7IHBsYWNlbWVudDogZS5wbGFjZW1lbnQgfSkpIDogdCkgPyB0IDogSXQodCwgcnQpKSB9KHMucGFkZGluZywgaSksIGQgPSBidChvKSwgdSA9ICJ5IiA9PT0gbCA/IGl0IDogb3QsIGYgPSAieSIgPT09IGwgPyBudCA6IHN0LCBwID0gaS5yZWN0cy5yZWZlcmVuY2VbY10gKyBpLnJlY3RzLnJlZmVyZW5jZVtsXSAtIHJbbF0gLSBpLnJlY3RzLnBvcHBlcltjXSwgbSA9IHJbbF0gLSBpLnJlY3RzLnJlZmVyZW5jZVtsXSwgZyA9IE90KG8pLCBfID0gZyA/ICJ5IiA9PT0gbCA/IGcuY2xpZW50SGVpZ2h0IHx8IDAgOiBnLmNsaWVudFdpZHRoIHx8IDAgOiAwLCBiID0gcCAvIDIgLSBtIC8gMiwgdiA9IGhbdV0sIHkgPSBfIC0gZFtjXSAtIGhbZl0sIHcgPSBfIC8gMiAtIGRbY10gLyAyICsgYiwgRSA9IER0KHYsIHcsIHkpLCBBID0gbDsgaS5tb2RpZmllcnNEYXRhW25dID0gKChlID0ge30pW0FdID0gRSwgZS5jZW50ZXJPZmZzZXQgPSBFIC0gdywgZSkgfSB9LCBlZmZlY3Q6IGZ1bmN0aW9uICh0KSB7IHZhciBlID0gdC5zdGF0ZSwgaSA9IHQub3B0aW9ucy5lbGVtZW50LCBuID0gdm9pZCAwID09PSBpID8gIltkYXRhLXBvcHBlci1hcnJvd10iIDogaTsgbnVsbCAhPSBuICYmICgic3RyaW5nIiAhPSB0eXBlb2YgbiB8fCAobiA9IGUuZWxlbWVudHMucG9wcGVyLnF1ZXJ5U2VsZWN0b3IobikpKSAmJiB2dChlLmVsZW1lbnRzLnBvcHBlciwgbikgJiYgKGUuZWxlbWVudHMuYXJyb3cgPSBuKSB9LCByZXF1aXJlczogWyJwb3BwZXJPZmZzZXRzIl0sIHJlcXVpcmVzSWZFeGlzdHM6IFsicHJldmVudE92ZXJmbG93Il0gfSwganQgPSB7IHRvcDogImF1dG8iLCByaWdodDogImF1dG8iLCBib3R0b206ICJhdXRvIiwgbGVmdDogImF1dG8iIH07IGZ1bmN0aW9uIE10KHQpIHsgdmFyIGUsIGkgPSB0LnBvcHBlciwgbiA9IHQucG9wcGVyUmVjdCwgcyA9IHQucGxhY2VtZW50LCBvID0gdC5vZmZzZXRzLCByID0gdC5wb3NpdGlvbiwgYSA9IHQuZ3B1QWNjZWxlcmF0aW9uLCBsID0gdC5hZGFwdGl2ZSwgYyA9IHQucm91bmRPZmZzZXRzLCBoID0gITAgPT09IGMgPyBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IHQueCwgaSA9IHQueSwgbiA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvIHx8IDE7IHJldHVybiB7IHg6IHh0KHh0KGUgKiBuKSAvIG4pIHx8IDAsIHk6IHh0KHh0KGkgKiBuKSAvIG4pIHx8IDAgfSB9KG8pIDogImZ1bmN0aW9uIiA9PSB0eXBlb2YgYyA/IGMobykgOiBvLCBkID0gaC54LCB1ID0gdm9pZCAwID09PSBkID8gMCA6IGQsIGYgPSBoLnksIHAgPSB2b2lkIDAgPT09IGYgPyAwIDogZiwgbSA9IG8uaGFzT3duUHJvcGVydHkoIngiKSwgZyA9IG8uaGFzT3duUHJvcGVydHkoInkiKSwgXyA9IG90LCBiID0gaXQsIHYgPSB3aW5kb3c7IGlmIChsKSB7IHZhciB5ID0gT3QoaSksIHcgPSAiY2xpZW50SGVpZ2h0IiwgRSA9ICJjbGllbnRXaWR0aCI7IHkgPT09IGR0KGkpICYmICJzdGF0aWMiICE9PSB5dCh5ID0gRXQoaSkpLnBvc2l0aW9uICYmICh3ID0gInNjcm9sbEhlaWdodCIsIEUgPSAic2Nyb2xsV2lkdGgiKSwgeSA9IHksIHMgPT09IGl0ICYmIChiID0gbnQsIHAgLT0geVt3XSAtIG4uaGVpZ2h0LCBwICo9IGEgPyAxIDogLTEpLCBzID09PSBvdCAmJiAoXyA9IHN0LCB1IC09IHlbRV0gLSBuLndpZHRoLCB1ICo9IGEgPyAxIDogLTEpIH0gdmFyIEEsIFQgPSBPYmplY3QuYXNzaWduKHsgcG9zaXRpb246IHIgfSwgbCAmJiBqdCk7IHJldHVybiBhID8gT2JqZWN0LmFzc2lnbih7fSwgVCwgKChBID0ge30pW2JdID0gZyA/ICIwIiA6ICIiLCBBW19dID0gbSA/ICIwIiA6ICIiLCBBLnRyYW5zZm9ybSA9ICh2LmRldmljZVBpeGVsUmF0aW8gfHwgMSkgPCAyID8gInRyYW5zbGF0ZSgiICsgdSArICJweCwgIiArIHAgKyAicHgpIiA6ICJ0cmFuc2xhdGUzZCgiICsgdSArICJweCwgIiArIHAgKyAicHgsIDApIiwgQSkpIDogT2JqZWN0LmFzc2lnbih7fSwgVCwgKChlID0ge30pW2JdID0gZyA/IHAgKyAicHgiIDogIiIsIGVbX10gPSBtID8gdSArICJweCIgOiAiIiwgZS50cmFuc2Zvcm0gPSAiIiwgZSkpIH0gdmFyIFB0ID0geyBuYW1lOiAiY29tcHV0ZVN0eWxlcyIsIGVuYWJsZWQ6ICEwLCBwaGFzZTogImJlZm9yZVdyaXRlIiwgZm46IGZ1bmN0aW9uICh0KSB7IHZhciBlID0gdC5zdGF0ZSwgaSA9IHQub3B0aW9ucywgbiA9IGkuZ3B1QWNjZWxlcmF0aW9uLCBzID0gdm9pZCAwID09PSBuIHx8IG4sIG8gPSBpLmFkYXB0aXZlLCByID0gdm9pZCAwID09PSBvIHx8IG8sIGEgPSBpLnJvdW5kT2Zmc2V0cywgbCA9IHZvaWQgMCA9PT0gYSB8fCBhLCBjID0geyBwbGFjZW1lbnQ6IGd0KGUucGxhY2VtZW50KSwgcG9wcGVyOiBlLmVsZW1lbnRzLnBvcHBlciwgcG9wcGVyUmVjdDogZS5yZWN0cy5wb3BwZXIsIGdwdUFjY2VsZXJhdGlvbjogcyB9OyBudWxsICE9IGUubW9kaWZpZXJzRGF0YS5wb3BwZXJPZmZzZXRzICYmIChlLnN0eWxlcy5wb3BwZXIgPSBPYmplY3QuYXNzaWduKHt9LCBlLnN0eWxlcy5wb3BwZXIsIE10KE9iamVjdC5hc3NpZ24oe30sIGMsIHsgb2Zmc2V0czogZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHMsIHBvc2l0aW9uOiBlLm9wdGlvbnMuc3RyYXRlZ3ksIGFkYXB0aXZlOiByLCByb3VuZE9mZnNldHM6IGwgfSkpKSksIG51bGwgIT0gZS5tb2RpZmllcnNEYXRhLmFycm93ICYmIChlLnN0eWxlcy5hcnJvdyA9IE9iamVjdC5hc3NpZ24oe30sIGUuc3R5bGVzLmFycm93LCBNdChPYmplY3QuYXNzaWduKHt9LCBjLCB7IG9mZnNldHM6IGUubW9kaWZpZXJzRGF0YS5hcnJvdywgcG9zaXRpb246ICJhYnNvbHV0ZSIsIGFkYXB0aXZlOiAhMSwgcm91bmRPZmZzZXRzOiBsIH0pKSkpLCBlLmF0dHJpYnV0ZXMucG9wcGVyID0gT2JqZWN0LmFzc2lnbih7fSwgZS5hdHRyaWJ1dGVzLnBvcHBlciwgeyAiZGF0YS1wb3BwZXItcGxhY2VtZW50IjogZS5wbGFjZW1lbnQgfSkgfSwgZGF0YToge30gfSwgSHQgPSB7IHBhc3NpdmU6ICEwIH0sIFJ0ID0geyBuYW1lOiAiZXZlbnRMaXN0ZW5lcnMiLCBlbmFibGVkOiAhMCwgcGhhc2U6ICJ3cml0ZSIsIGZuOiBmdW5jdGlvbiAoKSB7IH0sIGVmZmVjdDogZnVuY3Rpb24gKHQpIHsgdmFyIGUgPSB0LnN0YXRlLCBpID0gdC5pbnN0YW5jZSwgbiA9IHQub3B0aW9ucywgcyA9IG4uc2Nyb2xsLCBvID0gdm9pZCAwID09PSBzIHx8IHMsIHIgPSBuLnJlc2l6ZSwgYSA9IHZvaWQgMCA9PT0gciB8fCByLCBsID0gZHQoZS5lbGVtZW50cy5wb3BwZXIpLCBjID0gW10uY29uY2F0KGUuc2Nyb2xsUGFyZW50cy5yZWZlcmVuY2UsIGUuc2Nyb2xsUGFyZW50cy5wb3BwZXIpOyByZXR1cm4gbyAmJiBjLmZvckVhY2goKGZ1bmN0aW9uICh0KSB7IHQuYWRkRXZlbnRMaXN0ZW5lcigic2Nyb2xsIiwgaS51cGRhdGUsIEh0KSB9KSksIGEgJiYgbC5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCBpLnVwZGF0ZSwgSHQpLCBmdW5jdGlvbiAoKSB7IG8gJiYgYy5mb3JFYWNoKChmdW5jdGlvbiAodCkgeyB0LnJlbW92ZUV2ZW50TGlzdGVuZXIoInNjcm9sbCIsIGkudXBkYXRlLCBIdCkgfSkpLCBhICYmIGwucmVtb3ZlRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgaS51cGRhdGUsIEh0KSB9IH0sIGRhdGE6IHt9IH0sIEJ0ID0geyBsZWZ0OiAicmlnaHQiLCByaWdodDogImxlZnQiLCBib3R0b206ICJ0b3AiLCB0b3A6ICJib3R0b20iIH07IGZ1bmN0aW9uIFd0KHQpIHsgcmV0dXJuIHQucmVwbGFjZSgvbGVmdHxyaWdodHxib3R0b218dG9wL2csIChmdW5jdGlvbiAodCkgeyByZXR1cm4gQnRbdF0gfSkpIH0gdmFyIHF0ID0geyBzdGFydDogImVuZCIsIGVuZDogInN0YXJ0IiB9OyBmdW5jdGlvbiB6dCh0KSB7IHJldHVybiB0LnJlcGxhY2UoL3N0YXJ0fGVuZC9nLCAoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHF0W3RdIH0pKSB9IGZ1bmN0aW9uICR0KHQpIHsgdmFyIGUgPSBkdCh0KTsgcmV0dXJuIHsgc2Nyb2xsTGVmdDogZS5wYWdlWE9mZnNldCwgc2Nyb2xsVG9wOiBlLnBhZ2VZT2Zmc2V0IH0gfSBmdW5jdGlvbiBVdCh0KSB7IHJldHVybiBfdChFdCh0KSkubGVmdCArICR0KHQpLnNjcm9sbExlZnQgfSBmdW5jdGlvbiBGdCh0KSB7IHZhciBlID0geXQodCksIGkgPSBlLm92ZXJmbG93LCBuID0gZS5vdmVyZmxvd1gsIHMgPSBlLm92ZXJmbG93WTsgcmV0dXJuIC9hdXRvfHNjcm9sbHxvdmVybGF5fGhpZGRlbi8udGVzdChpICsgcyArIG4pIH0gZnVuY3Rpb24gVnQodCwgZSkgeyB2YXIgaTsgdm9pZCAwID09PSBlICYmIChlID0gW10pOyB2YXIgbiA9IGZ1bmN0aW9uIHQoZSkgeyByZXR1cm4gWyJodG1sIiwgImJvZHkiLCAiI2RvY3VtZW50Il0uaW5kZXhPZihodChlKSkgPj0gMCA/IGUub3duZXJEb2N1bWVudC5ib2R5IDogZnQoZSkgJiYgRnQoZSkgPyBlIDogdChBdChlKSkgfSh0KSwgcyA9IG4gPT09IChudWxsID09IChpID0gdC5vd25lckRvY3VtZW50KSA/IHZvaWQgMCA6IGkuYm9keSksIG8gPSBkdChuKSwgciA9IHMgPyBbb10uY29uY2F0KG8udmlzdWFsVmlld3BvcnQgfHwgW10sIEZ0KG4pID8gbiA6IFtdKSA6IG4sIGEgPSBlLmNvbmNhdChyKTsgcmV0dXJuIHMgPyBhIDogYS5jb25jYXQoVnQoQXQocikpKSB9IGZ1bmN0aW9uIEt0KHQpIHsgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHQsIHsgbGVmdDogdC54LCB0b3A6IHQueSwgcmlnaHQ6IHQueCArIHQud2lkdGgsIGJvdHRvbTogdC55ICsgdC5oZWlnaHQgfSkgfSBmdW5jdGlvbiBYdCh0LCBlKSB7IHJldHVybiAidmlld3BvcnQiID09PSBlID8gS3QoZnVuY3Rpb24gKHQpIHsgdmFyIGUgPSBkdCh0KSwgaSA9IEV0KHQpLCBuID0gZS52aXN1YWxWaWV3cG9ydCwgcyA9IGkuY2xpZW50V2lkdGgsIG8gPSBpLmNsaWVudEhlaWdodCwgciA9IDAsIGEgPSAwOyByZXR1cm4gbiAmJiAocyA9IG4ud2lkdGgsIG8gPSBuLmhlaWdodCwgL14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSB8fCAociA9IG4ub2Zmc2V0TGVmdCwgYSA9IG4ub2Zmc2V0VG9wKSksIHsgd2lkdGg6IHMsIGhlaWdodDogbywgeDogciArIFV0KHQpLCB5OiBhIH0gfSh0KSkgOiBmdChlKSA/IGZ1bmN0aW9uICh0KSB7IHZhciBlID0gX3QodCk7IHJldHVybiBlLnRvcCA9IGUudG9wICsgdC5jbGllbnRUb3AsIGUubGVmdCA9IGUubGVmdCArIHQuY2xpZW50TGVmdCwgZS5ib3R0b20gPSBlLnRvcCArIHQuY2xpZW50SGVpZ2h0LCBlLnJpZ2h0ID0gZS5sZWZ0ICsgdC5jbGllbnRXaWR0aCwgZS53aWR0aCA9IHQuY2xpZW50V2lkdGgsIGUuaGVpZ2h0ID0gdC5jbGllbnRIZWlnaHQsIGUueCA9IGUubGVmdCwgZS55ID0gZS50b3AsIGUgfShlKSA6IEt0KGZ1bmN0aW9uICh0KSB7IHZhciBlLCBpID0gRXQodCksIG4gPSAkdCh0KSwgcyA9IG51bGwgPT0gKGUgPSB0Lm93bmVyRG9jdW1lbnQpID8gdm9pZCAwIDogZS5ib2R5LCBvID0ga3QoaS5zY3JvbGxXaWR0aCwgaS5jbGllbnRXaWR0aCwgcyA/IHMuc2Nyb2xsV2lkdGggOiAwLCBzID8gcy5jbGllbnRXaWR0aCA6IDApLCByID0ga3QoaS5zY3JvbGxIZWlnaHQsIGkuY2xpZW50SGVpZ2h0LCBzID8gcy5zY3JvbGxIZWlnaHQgOiAwLCBzID8gcy5jbGllbnRIZWlnaHQgOiAwKSwgYSA9IC1uLnNjcm9sbExlZnQgKyBVdCh0KSwgbCA9IC1uLnNjcm9sbFRvcDsgcmV0dXJuICJydGwiID09PSB5dChzIHx8IGkpLmRpcmVjdGlvbiAmJiAoYSArPSBrdChpLmNsaWVudFdpZHRoLCBzID8gcy5jbGllbnRXaWR0aCA6IDApIC0gbyksIHsgd2lkdGg6IG8sIGhlaWdodDogciwgeDogYSwgeTogbCB9IH0oRXQodCkpKSB9IGZ1bmN0aW9uIFl0KHQpIHsgcmV0dXJuIHQuc3BsaXQoIi0iKVsxXSB9IGZ1bmN0aW9uIFF0KHQpIHsgdmFyIGUsIGkgPSB0LnJlZmVyZW5jZSwgbiA9IHQuZWxlbWVudCwgcyA9IHQucGxhY2VtZW50LCBvID0gcyA/IGd0KHMpIDogbnVsbCwgciA9IHMgPyBZdChzKSA6IG51bGwsIGEgPSBpLnggKyBpLndpZHRoIC8gMiAtIG4ud2lkdGggLyAyLCBsID0gaS55ICsgaS5oZWlnaHQgLyAyIC0gbi5oZWlnaHQgLyAyOyBzd2l0Y2ggKG8pIHsgY2FzZSBpdDogZSA9IHsgeDogYSwgeTogaS55IC0gbi5oZWlnaHQgfTsgYnJlYWs7IGNhc2UgbnQ6IGUgPSB7IHg6IGEsIHk6IGkueSArIGkuaGVpZ2h0IH07IGJyZWFrOyBjYXNlIHN0OiBlID0geyB4OiBpLnggKyBpLndpZHRoLCB5OiBsIH07IGJyZWFrOyBjYXNlIG90OiBlID0geyB4OiBpLnggLSBuLndpZHRoLCB5OiBsIH07IGJyZWFrOyBkZWZhdWx0OiBlID0geyB4OiBpLngsIHk6IGkueSB9IH12YXIgYyA9IG8gPyBDdChvKSA6IG51bGw7IGlmIChudWxsICE9IGMpIHsgdmFyIGggPSAieSIgPT09IGMgPyAiaGVpZ2h0IiA6ICJ3aWR0aCI7IHN3aXRjaCAocikgeyBjYXNlICJzdGFydCI6IGVbY10gPSBlW2NdIC0gKGlbaF0gLyAyIC0gbltoXSAvIDIpOyBicmVhazsgY2FzZSAiZW5kIjogZVtjXSA9IGVbY10gKyAoaVtoXSAvIDIgLSBuW2hdIC8gMikgfSB9IHJldHVybiBlIH0gZnVuY3Rpb24gR3QodCwgZSkgeyB2b2lkIDAgPT09IGUgJiYgKGUgPSB7fSk7IHZhciBpID0gZSwgbiA9IGkucGxhY2VtZW50LCBzID0gdm9pZCAwID09PSBuID8gdC5wbGFjZW1lbnQgOiBuLCBvID0gaS5ib3VuZGFyeSwgciA9IHZvaWQgMCA9PT0gbyA/ICJjbGlwcGluZ1BhcmVudHMiIDogbywgYSA9IGkucm9vdEJvdW5kYXJ5LCBsID0gdm9pZCAwID09PSBhID8gInZpZXdwb3J0IiA6IGEsIGMgPSBpLmVsZW1lbnRDb250ZXh0LCBoID0gdm9pZCAwID09PSBjID8gInBvcHBlciIgOiBjLCBkID0gaS5hbHRCb3VuZGFyeSwgdSA9IHZvaWQgMCAhPT0gZCAmJiBkLCBmID0gaS5wYWRkaW5nLCBwID0gdm9pZCAwID09PSBmID8gMCA6IGYsIG0gPSBTdCgibnVtYmVyIiAhPSB0eXBlb2YgcCA/IHAgOiBJdChwLCBydCkpLCBnID0gInBvcHBlciIgPT09IGggPyAicmVmZXJlbmNlIiA6ICJwb3BwZXIiLCBfID0gdC5lbGVtZW50cy5yZWZlcmVuY2UsIGIgPSB0LnJlY3RzLnBvcHBlciwgdiA9IHQuZWxlbWVudHNbdSA/IGcgOiBoXSwgeSA9IGZ1bmN0aW9uICh0LCBlLCBpKSB7IHZhciBuID0gImNsaXBwaW5nUGFyZW50cyIgPT09IGUgPyBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IFZ0KEF0KHQpKSwgaSA9IFsiYWJzb2x1dGUiLCAiZml4ZWQiXS5pbmRleE9mKHl0KHQpLnBvc2l0aW9uKSA+PSAwICYmIGZ0KHQpID8gT3QodCkgOiB0OyByZXR1cm4gdXQoaSkgPyBlLmZpbHRlcigoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHV0KHQpICYmIHZ0KHQsIGkpICYmICJib2R5IiAhPT0gaHQodCkgfSkpIDogW10gfSh0KSA6IFtdLmNvbmNhdChlKSwgcyA9IFtdLmNvbmNhdChuLCBbaV0pLCBvID0gc1swXSwgciA9IHMucmVkdWNlKChmdW5jdGlvbiAoZSwgaSkgeyB2YXIgbiA9IFh0KHQsIGkpOyByZXR1cm4gZS50b3AgPSBrdChuLnRvcCwgZS50b3ApLCBlLnJpZ2h0ID0gTHQobi5yaWdodCwgZS5yaWdodCksIGUuYm90dG9tID0gTHQobi5ib3R0b20sIGUuYm90dG9tKSwgZS5sZWZ0ID0ga3Qobi5sZWZ0LCBlLmxlZnQpLCBlIH0pLCBYdCh0LCBvKSk7IHJldHVybiByLndpZHRoID0gci5yaWdodCAtIHIubGVmdCwgci5oZWlnaHQgPSByLmJvdHRvbSAtIHIudG9wLCByLnggPSByLmxlZnQsIHIueSA9IHIudG9wLCByIH0odXQodikgPyB2IDogdi5jb250ZXh0RWxlbWVudCB8fCBFdCh0LmVsZW1lbnRzLnBvcHBlciksIHIsIGwpLCB3ID0gX3QoXyksIEUgPSBRdCh7IHJlZmVyZW5jZTogdywgZWxlbWVudDogYiwgc3RyYXRlZ3k6ICJhYnNvbHV0ZSIsIHBsYWNlbWVudDogcyB9KSwgQSA9IEt0KE9iamVjdC5hc3NpZ24oe30sIGIsIEUpKSwgVCA9ICJwb3BwZXIiID09PSBoID8gQSA6IHcsIE8gPSB7IHRvcDogeS50b3AgLSBULnRvcCArIG0udG9wLCBib3R0b206IFQuYm90dG9tIC0geS5ib3R0b20gKyBtLmJvdHRvbSwgbGVmdDogeS5sZWZ0IC0gVC5sZWZ0ICsgbS5sZWZ0LCByaWdodDogVC5yaWdodCAtIHkucmlnaHQgKyBtLnJpZ2h0IH0sIEMgPSB0Lm1vZGlmaWVyc0RhdGEub2Zmc2V0OyBpZiAoInBvcHBlciIgPT09IGggJiYgQykgeyB2YXIgayA9IENbc107IE9iamVjdC5rZXlzKE8pLmZvckVhY2goKGZ1bmN0aW9uICh0KSB7IHZhciBlID0gW3N0LCBudF0uaW5kZXhPZih0KSA+PSAwID8gMSA6IC0xLCBpID0gW2l0LCBudF0uaW5kZXhPZih0KSA+PSAwID8gInkiIDogIngiOyBPW3RdICs9IGtbaV0gKiBlIH0pKSB9IHJldHVybiBPIH0gZnVuY3Rpb24gWnQodCwgZSkgeyB2b2lkIDAgPT09IGUgJiYgKGUgPSB7fSk7IHZhciBpID0gZSwgbiA9IGkucGxhY2VtZW50LCBzID0gaS5ib3VuZGFyeSwgbyA9IGkucm9vdEJvdW5kYXJ5LCByID0gaS5wYWRkaW5nLCBhID0gaS5mbGlwVmFyaWF0aW9ucywgbCA9IGkuYWxsb3dlZEF1dG9QbGFjZW1lbnRzLCBjID0gdm9pZCAwID09PSBsID8gbHQgOiBsLCBoID0gWXQobiksIGQgPSBoID8gYSA/IGF0IDogYXQuZmlsdGVyKChmdW5jdGlvbiAodCkgeyByZXR1cm4gWXQodCkgPT09IGggfSkpIDogcnQsIHUgPSBkLmZpbHRlcigoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIGMuaW5kZXhPZih0KSA+PSAwIH0pKTsgMCA9PT0gdS5sZW5ndGggJiYgKHUgPSBkKTsgdmFyIGYgPSB1LnJlZHVjZSgoZnVuY3Rpb24gKGUsIGkpIHsgcmV0dXJuIGVbaV0gPSBHdCh0LCB7IHBsYWNlbWVudDogaSwgYm91bmRhcnk6IHMsIHJvb3RCb3VuZGFyeTogbywgcGFkZGluZzogciB9KVtndChpKV0sIGUgfSksIHt9KTsgcmV0dXJuIE9iamVjdC5rZXlzKGYpLnNvcnQoKGZ1bmN0aW9uICh0LCBlKSB7IHJldHVybiBmW3RdIC0gZltlXSB9KSkgfSB2YXIgSnQgPSB7IG5hbWU6ICJmbGlwIiwgZW5hYmxlZDogITAsIHBoYXNlOiAibWFpbiIsIGZuOiBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IHQuc3RhdGUsIGkgPSB0Lm9wdGlvbnMsIG4gPSB0Lm5hbWU7IGlmICghZS5tb2RpZmllcnNEYXRhW25dLl9za2lwKSB7IGZvciAodmFyIHMgPSBpLm1haW5BeGlzLCBvID0gdm9pZCAwID09PSBzIHx8IHMsIHIgPSBpLmFsdEF4aXMsIGEgPSB2b2lkIDAgPT09IHIgfHwgciwgbCA9IGkuZmFsbGJhY2tQbGFjZW1lbnRzLCBjID0gaS5wYWRkaW5nLCBoID0gaS5ib3VuZGFyeSwgZCA9IGkucm9vdEJvdW5kYXJ5LCB1ID0gaS5hbHRCb3VuZGFyeSwgZiA9IGkuZmxpcFZhcmlhdGlvbnMsIHAgPSB2b2lkIDAgPT09IGYgfHwgZiwgbSA9IGkuYWxsb3dlZEF1dG9QbGFjZW1lbnRzLCBnID0gZS5vcHRpb25zLnBsYWNlbWVudCwgXyA9IGd0KGcpLCBiID0gbCB8fCAoXyAhPT0gZyAmJiBwID8gZnVuY3Rpb24gKHQpIHsgaWYgKCJhdXRvIiA9PT0gZ3QodCkpIHJldHVybiBbXTsgdmFyIGUgPSBXdCh0KTsgcmV0dXJuIFt6dCh0KSwgZSwgenQoZSldIH0oZykgOiBbV3QoZyldKSwgdiA9IFtnXS5jb25jYXQoYikucmVkdWNlKChmdW5jdGlvbiAodCwgaSkgeyByZXR1cm4gdC5jb25jYXQoImF1dG8iID09PSBndChpKSA/IFp0KGUsIHsgcGxhY2VtZW50OiBpLCBib3VuZGFyeTogaCwgcm9vdEJvdW5kYXJ5OiBkLCBwYWRkaW5nOiBjLCBmbGlwVmFyaWF0aW9uczogcCwgYWxsb3dlZEF1dG9QbGFjZW1lbnRzOiBtIH0pIDogaSkgfSksIFtdKSwgeSA9IGUucmVjdHMucmVmZXJlbmNlLCB3ID0gZS5yZWN0cy5wb3BwZXIsIEUgPSBuZXcgTWFwLCBBID0gITAsIFQgPSB2WzBdLCBPID0gMDsgTyA8IHYubGVuZ3RoOyBPKyspIHsgdmFyIEMgPSB2W09dLCBrID0gZ3QoQyksIEwgPSAic3RhcnQiID09PSBZdChDKSwgeCA9IFtpdCwgbnRdLmluZGV4T2YoaykgPj0gMCwgRCA9IHggPyAid2lkdGgiIDogImhlaWdodCIsIFMgPSBHdChlLCB7IHBsYWNlbWVudDogQywgYm91bmRhcnk6IGgsIHJvb3RCb3VuZGFyeTogZCwgYWx0Qm91bmRhcnk6IHUsIHBhZGRpbmc6IGMgfSksIEkgPSB4ID8gTCA/IHN0IDogb3QgOiBMID8gbnQgOiBpdDsgeVtEXSA+IHdbRF0gJiYgKEkgPSBXdChJKSk7IHZhciBOID0gV3QoSSksIGogPSBbXTsgaWYgKG8gJiYgai5wdXNoKFNba10gPD0gMCksIGEgJiYgai5wdXNoKFNbSV0gPD0gMCwgU1tOXSA8PSAwKSwgai5ldmVyeSgoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQgfSkpKSB7IFQgPSBDLCBBID0gITE7IGJyZWFrIH0gRS5zZXQoQywgaikgfSBpZiAoQSkgZm9yICh2YXIgTSA9IGZ1bmN0aW9uICh0KSB7IHZhciBlID0gdi5maW5kKChmdW5jdGlvbiAoZSkgeyB2YXIgaSA9IEUuZ2V0KGUpOyBpZiAoaSkgcmV0dXJuIGkuc2xpY2UoMCwgdCkuZXZlcnkoKGZ1bmN0aW9uICh0KSB7IHJldHVybiB0IH0pKSB9KSk7IGlmIChlKSByZXR1cm4gVCA9IGUsICJicmVhayIgfSwgUCA9IHAgPyAzIDogMTsgUCA+IDAgJiYgImJyZWFrIiAhPT0gTShQKTsgUC0tKTsgZS5wbGFjZW1lbnQgIT09IFQgJiYgKGUubW9kaWZpZXJzRGF0YVtuXS5fc2tpcCA9ICEwLCBlLnBsYWNlbWVudCA9IFQsIGUucmVzZXQgPSAhMCkgfSB9LCByZXF1aXJlc0lmRXhpc3RzOiBbIm9mZnNldCJdLCBkYXRhOiB7IF9za2lwOiAhMSB9IH07IGZ1bmN0aW9uIHRlKHQsIGUsIGkpIHsgcmV0dXJuIHZvaWQgMCA9PT0gaSAmJiAoaSA9IHsgeDogMCwgeTogMCB9KSwgeyB0b3A6IHQudG9wIC0gZS5oZWlnaHQgLSBpLnksIHJpZ2h0OiB0LnJpZ2h0IC0gZS53aWR0aCArIGkueCwgYm90dG9tOiB0LmJvdHRvbSAtIGUuaGVpZ2h0ICsgaS55LCBsZWZ0OiB0LmxlZnQgLSBlLndpZHRoIC0gaS54IH0gfSBmdW5jdGlvbiBlZSh0KSB7IHJldHVybiBbaXQsIHN0LCBudCwgb3RdLnNvbWUoKGZ1bmN0aW9uIChlKSB7IHJldHVybiB0W2VdID49IDAgfSkpIH0gdmFyIGllID0geyBuYW1lOiAiaGlkZSIsIGVuYWJsZWQ6ICEwLCBwaGFzZTogIm1haW4iLCByZXF1aXJlc0lmRXhpc3RzOiBbInByZXZlbnRPdmVyZmxvdyJdLCBmbjogZnVuY3Rpb24gKHQpIHsgdmFyIGUgPSB0LnN0YXRlLCBpID0gdC5uYW1lLCBuID0gZS5yZWN0cy5yZWZlcmVuY2UsIHMgPSBlLnJlY3RzLnBvcHBlciwgbyA9IGUubW9kaWZpZXJzRGF0YS5wcmV2ZW50T3ZlcmZsb3csIHIgPSBHdChlLCB7IGVsZW1lbnRDb250ZXh0OiAicmVmZXJlbmNlIiB9KSwgYSA9IEd0KGUsIHsgYWx0Qm91bmRhcnk6ICEwIH0pLCBsID0gdGUociwgbiksIGMgPSB0ZShhLCBzLCBvKSwgaCA9IGVlKGwpLCBkID0gZWUoYyk7IGUubW9kaWZpZXJzRGF0YVtpXSA9IHsgcmVmZXJlbmNlQ2xpcHBpbmdPZmZzZXRzOiBsLCBwb3BwZXJFc2NhcGVPZmZzZXRzOiBjLCBpc1JlZmVyZW5jZUhpZGRlbjogaCwgaGFzUG9wcGVyRXNjYXBlZDogZCB9LCBlLmF0dHJpYnV0ZXMucG9wcGVyID0gT2JqZWN0LmFzc2lnbih7fSwgZS5hdHRyaWJ1dGVzLnBvcHBlciwgeyAiZGF0YS1wb3BwZXItcmVmZXJlbmNlLWhpZGRlbiI6IGgsICJkYXRhLXBvcHBlci1lc2NhcGVkIjogZCB9KSB9IH0sIG5lID0geyBuYW1lOiAib2Zmc2V0IiwgZW5hYmxlZDogITAsIHBoYXNlOiAibWFpbiIsIHJlcXVpcmVzOiBbInBvcHBlck9mZnNldHMiXSwgZm46IGZ1bmN0aW9uICh0KSB7IHZhciBlID0gdC5zdGF0ZSwgaSA9IHQub3B0aW9ucywgbiA9IHQubmFtZSwgcyA9IGkub2Zmc2V0LCBvID0gdm9pZCAwID09PSBzID8gWzAsIDBdIDogcywgciA9IGx0LnJlZHVjZSgoZnVuY3Rpb24gKHQsIGkpIHsgcmV0dXJuIHRbaV0gPSBmdW5jdGlvbiAodCwgZSwgaSkgeyB2YXIgbiA9IGd0KHQpLCBzID0gW290LCBpdF0uaW5kZXhPZihuKSA+PSAwID8gLTEgOiAxLCBvID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgaSA/IGkoT2JqZWN0LmFzc2lnbih7fSwgZSwgeyBwbGFjZW1lbnQ6IHQgfSkpIDogaSwgciA9IG9bMF0sIGEgPSBvWzFdOyByZXR1cm4gciA9IHIgfHwgMCwgYSA9IChhIHx8IDApICogcywgW290LCBzdF0uaW5kZXhPZihuKSA+PSAwID8geyB4OiBhLCB5OiByIH0gOiB7IHg6IHIsIHk6IGEgfSB9KGksIGUucmVjdHMsIG8pLCB0IH0pLCB7fSksIGEgPSByW2UucGxhY2VtZW50XSwgbCA9IGEueCwgYyA9IGEueTsgbnVsbCAhPSBlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cyAmJiAoZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHMueCArPSBsLCBlLm1vZGlmaWVyc0RhdGEucG9wcGVyT2Zmc2V0cy55ICs9IGMpLCBlLm1vZGlmaWVyc0RhdGFbbl0gPSByIH0gfSwgc2UgPSB7IG5hbWU6ICJwb3BwZXJPZmZzZXRzIiwgZW5hYmxlZDogITAsIHBoYXNlOiAicmVhZCIsIGZuOiBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IHQuc3RhdGUsIGkgPSB0Lm5hbWU7IGUubW9kaWZpZXJzRGF0YVtpXSA9IFF0KHsgcmVmZXJlbmNlOiBlLnJlY3RzLnJlZmVyZW5jZSwgZWxlbWVudDogZS5yZWN0cy5wb3BwZXIsIHN0cmF0ZWd5OiAiYWJzb2x1dGUiLCBwbGFjZW1lbnQ6IGUucGxhY2VtZW50IH0pIH0sIGRhdGE6IHt9IH0sIG9lID0geyBuYW1lOiAicHJldmVudE92ZXJmbG93IiwgZW5hYmxlZDogITAsIHBoYXNlOiAibWFpbiIsIGZuOiBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IHQuc3RhdGUsIGkgPSB0Lm9wdGlvbnMsIG4gPSB0Lm5hbWUsIHMgPSBpLm1haW5BeGlzLCBvID0gdm9pZCAwID09PSBzIHx8IHMsIHIgPSBpLmFsdEF4aXMsIGEgPSB2b2lkIDAgIT09IHIgJiYgciwgbCA9IGkuYm91bmRhcnksIGMgPSBpLnJvb3RCb3VuZGFyeSwgaCA9IGkuYWx0Qm91bmRhcnksIGQgPSBpLnBhZGRpbmcsIHUgPSBpLnRldGhlciwgZiA9IHZvaWQgMCA9PT0gdSB8fCB1LCBwID0gaS50ZXRoZXJPZmZzZXQsIG0gPSB2b2lkIDAgPT09IHAgPyAwIDogcCwgZyA9IEd0KGUsIHsgYm91bmRhcnk6IGwsIHJvb3RCb3VuZGFyeTogYywgcGFkZGluZzogZCwgYWx0Qm91bmRhcnk6IGggfSksIF8gPSBndChlLnBsYWNlbWVudCksIGIgPSBZdChlLnBsYWNlbWVudCksIHYgPSAhYiwgeSA9IEN0KF8pLCB3ID0gIngiID09PSB5ID8gInkiIDogIngiLCBFID0gZS5tb2RpZmllcnNEYXRhLnBvcHBlck9mZnNldHMsIEEgPSBlLnJlY3RzLnJlZmVyZW5jZSwgVCA9IGUucmVjdHMucG9wcGVyLCBPID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgbSA/IG0oT2JqZWN0LmFzc2lnbih7fSwgZS5yZWN0cywgeyBwbGFjZW1lbnQ6IGUucGxhY2VtZW50IH0pKSA6IG0sIEMgPSB7IHg6IDAsIHk6IDAgfTsgaWYgKEUpIHsgaWYgKG8gfHwgYSkgeyB2YXIgayA9ICJ5IiA9PT0geSA/IGl0IDogb3QsIEwgPSAieSIgPT09IHkgPyBudCA6IHN0LCB4ID0gInkiID09PSB5ID8gImhlaWdodCIgOiAid2lkdGgiLCBEID0gRVt5XSwgUyA9IEVbeV0gKyBnW2tdLCBJID0gRVt5XSAtIGdbTF0sIE4gPSBmID8gLVRbeF0gLyAyIDogMCwgaiA9ICJzdGFydCIgPT09IGIgPyBBW3hdIDogVFt4XSwgTSA9ICJzdGFydCIgPT09IGIgPyAtVFt4XSA6IC1BW3hdLCBQID0gZS5lbGVtZW50cy5hcnJvdywgSCA9IGYgJiYgUCA/IGJ0KFApIDogeyB3aWR0aDogMCwgaGVpZ2h0OiAwIH0sIFIgPSBlLm1vZGlmaWVyc0RhdGFbImFycm93I3BlcnNpc3RlbnQiXSA/IGUubW9kaWZpZXJzRGF0YVsiYXJyb3cjcGVyc2lzdGVudCJdLnBhZGRpbmcgOiB7IHRvcDogMCwgcmlnaHQ6IDAsIGJvdHRvbTogMCwgbGVmdDogMCB9LCBCID0gUltrXSwgVyA9IFJbTF0sIHEgPSBEdCgwLCBBW3hdLCBIW3hdKSwgeiA9IHYgPyBBW3hdIC8gMiAtIE4gLSBxIC0gQiAtIE8gOiBqIC0gcSAtIEIgLSBPLCAkID0gdiA/IC1BW3hdIC8gMiArIE4gKyBxICsgVyArIE8gOiBNICsgcSArIFcgKyBPLCBVID0gZS5lbGVtZW50cy5hcnJvdyAmJiBPdChlLmVsZW1lbnRzLmFycm93KSwgRiA9IFUgPyAieSIgPT09IHkgPyBVLmNsaWVudFRvcCB8fCAwIDogVS5jbGllbnRMZWZ0IHx8IDAgOiAwLCBWID0gZS5tb2RpZmllcnNEYXRhLm9mZnNldCA/IGUubW9kaWZpZXJzRGF0YS5vZmZzZXRbZS5wbGFjZW1lbnRdW3ldIDogMCwgSyA9IEVbeV0gKyB6IC0gViAtIEYsIFggPSBFW3ldICsgJCAtIFY7IGlmIChvKSB7IHZhciBZID0gRHQoZiA/IEx0KFMsIEspIDogUywgRCwgZiA/IGt0KEksIFgpIDogSSk7IEVbeV0gPSBZLCBDW3ldID0gWSAtIEQgfSBpZiAoYSkgeyB2YXIgUSA9ICJ4IiA9PT0geSA/IGl0IDogb3QsIEcgPSAieCIgPT09IHkgPyBudCA6IHN0LCBaID0gRVt3XSwgSiA9IFogKyBnW1FdLCB0dCA9IFogLSBnW0ddLCBldCA9IER0KGYgPyBMdChKLCBLKSA6IEosIFosIGYgPyBrdCh0dCwgWCkgOiB0dCk7IEVbd10gPSBldCwgQ1t3XSA9IGV0IC0gWiB9IH0gZS5tb2RpZmllcnNEYXRhW25dID0gQyB9IH0sIHJlcXVpcmVzSWZFeGlzdHM6IFsib2Zmc2V0Il0gfTsgZnVuY3Rpb24gcmUodCwgZSwgaSkgeyB2b2lkIDAgPT09IGkgJiYgKGkgPSAhMSk7IHZhciBuLCBzLCBvID0gRXQoZSksIHIgPSBfdCh0KSwgYSA9IGZ0KGUpLCBsID0geyBzY3JvbGxMZWZ0OiAwLCBzY3JvbGxUb3A6IDAgfSwgYyA9IHsgeDogMCwgeTogMCB9OyByZXR1cm4gKGEgfHwgIWEgJiYgIWkpICYmICgoImJvZHkiICE9PSBodChlKSB8fCBGdChvKSkgJiYgKGwgPSAobiA9IGUpICE9PSBkdChuKSAmJiBmdChuKSA/IHsgc2Nyb2xsTGVmdDogKHMgPSBuKS5zY3JvbGxMZWZ0LCBzY3JvbGxUb3A6IHMuc2Nyb2xsVG9wIH0gOiAkdChuKSksIGZ0KGUpID8gKChjID0gX3QoZSkpLnggKz0gZS5jbGllbnRMZWZ0LCBjLnkgKz0gZS5jbGllbnRUb3ApIDogbyAmJiAoYy54ID0gVXQobykpKSwgeyB4OiByLmxlZnQgKyBsLnNjcm9sbExlZnQgLSBjLngsIHk6IHIudG9wICsgbC5zY3JvbGxUb3AgLSBjLnksIHdpZHRoOiByLndpZHRoLCBoZWlnaHQ6IHIuaGVpZ2h0IH0gfSB2YXIgYWUgPSB7IHBsYWNlbWVudDogImJvdHRvbSIsIG1vZGlmaWVyczogW10sIHN0cmF0ZWd5OiAiYWJzb2x1dGUiIH07IGZ1bmN0aW9uIGxlKCkgeyBmb3IgKHZhciB0ID0gYXJndW1lbnRzLmxlbmd0aCwgZSA9IG5ldyBBcnJheSh0KSwgaSA9IDA7IGkgPCB0OyBpKyspZVtpXSA9IGFyZ3VtZW50c1tpXTsgcmV0dXJuICFlLnNvbWUoKGZ1bmN0aW9uICh0KSB7IHJldHVybiAhKHQgJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QpIH0pKSB9IGZ1bmN0aW9uIGNlKHQpIHsgdm9pZCAwID09PSB0ICYmICh0ID0ge30pOyB2YXIgZSA9IHQsIGkgPSBlLmRlZmF1bHRNb2RpZmllcnMsIG4gPSB2b2lkIDAgPT09IGkgPyBbXSA6IGksIHMgPSBlLmRlZmF1bHRPcHRpb25zLCBvID0gdm9pZCAwID09PSBzID8gYWUgOiBzOyByZXR1cm4gZnVuY3Rpb24gKHQsIGUsIGkpIHsgdm9pZCAwID09PSBpICYmIChpID0gbyk7IHZhciBzLCByLCBhID0geyBwbGFjZW1lbnQ6ICJib3R0b20iLCBvcmRlcmVkTW9kaWZpZXJzOiBbXSwgb3B0aW9uczogT2JqZWN0LmFzc2lnbih7fSwgYWUsIG8pLCBtb2RpZmllcnNEYXRhOiB7fSwgZWxlbWVudHM6IHsgcmVmZXJlbmNlOiB0LCBwb3BwZXI6IGUgfSwgYXR0cmlidXRlczoge30sIHN0eWxlczoge30gfSwgbCA9IFtdLCBjID0gITEsIGggPSB7IHN0YXRlOiBhLCBzZXRPcHRpb25zOiBmdW5jdGlvbiAoaSkgeyBkKCksIGEub3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG8sIGEub3B0aW9ucywgaSksIGEuc2Nyb2xsUGFyZW50cyA9IHsgcmVmZXJlbmNlOiB1dCh0KSA/IFZ0KHQpIDogdC5jb250ZXh0RWxlbWVudCA/IFZ0KHQuY29udGV4dEVsZW1lbnQpIDogW10sIHBvcHBlcjogVnQoZSkgfTsgdmFyIHMsIHIsIGMgPSBmdW5jdGlvbiAodCkgeyB2YXIgZSA9IGZ1bmN0aW9uICh0KSB7IHZhciBlID0gbmV3IE1hcCwgaSA9IG5ldyBTZXQsIG4gPSBbXTsgcmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24gKHQpIHsgZS5zZXQodC5uYW1lLCB0KSB9KSksIHQuZm9yRWFjaCgoZnVuY3Rpb24gKHQpIHsgaS5oYXModC5uYW1lKSB8fCBmdW5jdGlvbiB0KHMpIHsgaS5hZGQocy5uYW1lKSwgW10uY29uY2F0KHMucmVxdWlyZXMgfHwgW10sIHMucmVxdWlyZXNJZkV4aXN0cyB8fCBbXSkuZm9yRWFjaCgoZnVuY3Rpb24gKG4pIHsgaWYgKCFpLmhhcyhuKSkgeyB2YXIgcyA9IGUuZ2V0KG4pOyBzICYmIHQocykgfSB9KSksIG4ucHVzaChzKSB9KHQpIH0pKSwgbiB9KHQpOyByZXR1cm4gY3QucmVkdWNlKChmdW5jdGlvbiAodCwgaSkgeyByZXR1cm4gdC5jb25jYXQoZS5maWx0ZXIoKGZ1bmN0aW9uICh0KSB7IHJldHVybiB0LnBoYXNlID09PSBpIH0pKSkgfSksIFtdKSB9KChzID0gW10uY29uY2F0KG4sIGEub3B0aW9ucy5tb2RpZmllcnMpLCByID0gcy5yZWR1Y2UoKGZ1bmN0aW9uICh0LCBlKSB7IHZhciBpID0gdFtlLm5hbWVdOyByZXR1cm4gdFtlLm5hbWVdID0gaSA/IE9iamVjdC5hc3NpZ24oe30sIGksIGUsIHsgb3B0aW9uczogT2JqZWN0LmFzc2lnbih7fSwgaS5vcHRpb25zLCBlLm9wdGlvbnMpLCBkYXRhOiBPYmplY3QuYXNzaWduKHt9LCBpLmRhdGEsIGUuZGF0YSkgfSkgOiBlLCB0IH0pLCB7fSksIE9iamVjdC5rZXlzKHIpLm1hcCgoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHJbdF0gfSkpKSk7IHJldHVybiBhLm9yZGVyZWRNb2RpZmllcnMgPSBjLmZpbHRlcigoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIHQuZW5hYmxlZCB9KSksIGEub3JkZXJlZE1vZGlmaWVycy5mb3JFYWNoKChmdW5jdGlvbiAodCkgeyB2YXIgZSA9IHQubmFtZSwgaSA9IHQub3B0aW9ucywgbiA9IHZvaWQgMCA9PT0gaSA/IHt9IDogaSwgcyA9IHQuZWZmZWN0OyBpZiAoImZ1bmN0aW9uIiA9PSB0eXBlb2YgcykgeyB2YXIgbyA9IHMoeyBzdGF0ZTogYSwgbmFtZTogZSwgaW5zdGFuY2U6IGgsIG9wdGlvbnM6IG4gfSk7IGwucHVzaChvIHx8IGZ1bmN0aW9uICgpIHsgfSkgfSB9KSksIGgudXBkYXRlKCkgfSwgZm9yY2VVcGRhdGU6IGZ1bmN0aW9uICgpIHsgaWYgKCFjKSB7IHZhciB0ID0gYS5lbGVtZW50cywgZSA9IHQucmVmZXJlbmNlLCBpID0gdC5wb3BwZXI7IGlmIChsZShlLCBpKSkgeyBhLnJlY3RzID0geyByZWZlcmVuY2U6IHJlKGUsIE90KGkpLCAiZml4ZWQiID09PSBhLm9wdGlvbnMuc3RyYXRlZ3kpLCBwb3BwZXI6IGJ0KGkpIH0sIGEucmVzZXQgPSAhMSwgYS5wbGFjZW1lbnQgPSBhLm9wdGlvbnMucGxhY2VtZW50LCBhLm9yZGVyZWRNb2RpZmllcnMuZm9yRWFjaCgoZnVuY3Rpb24gKHQpIHsgcmV0dXJuIGEubW9kaWZpZXJzRGF0YVt0Lm5hbWVdID0gT2JqZWN0LmFzc2lnbih7fSwgdC5kYXRhKSB9KSk7IGZvciAodmFyIG4gPSAwOyBuIDwgYS5vcmRlcmVkTW9kaWZpZXJzLmxlbmd0aDsgbisrKWlmICghMCAhPT0gYS5yZXNldCkgeyB2YXIgcyA9IGEub3JkZXJlZE1vZGlmaWVyc1tuXSwgbyA9IHMuZm4sIHIgPSBzLm9wdGlvbnMsIGwgPSB2b2lkIDAgPT09IHIgPyB7fSA6IHIsIGQgPSBzLm5hbWU7ICJmdW5jdGlvbiIgPT0gdHlwZW9mIG8gJiYgKGEgPSBvKHsgc3RhdGU6IGEsIG9wdGlvbnM6IGwsIG5hbWU6IGQsIGluc3RhbmNlOiBoIH0pIHx8IGEpIH0gZWxzZSBhLnJlc2V0ID0gITEsIG4gPSAtMSB9IH0gfSwgdXBkYXRlOiAocyA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbiAodCkgeyBoLmZvcmNlVXBkYXRlKCksIHQoYSkgfSkpIH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHIgfHwgKHIgPSBuZXcgUHJvbWlzZSgoZnVuY3Rpb24gKHQpIHsgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoZnVuY3Rpb24gKCkgeyByID0gdm9pZCAwLCB0KHMoKSkgfSkpIH0pKSksIHIgfSksIGRlc3Ryb3k6IGZ1bmN0aW9uICgpIHsgZCgpLCBjID0gITAgfSB9OyBpZiAoIWxlKHQsIGUpKSByZXR1cm4gaDsgZnVuY3Rpb24gZCgpIHsgbC5mb3JFYWNoKChmdW5jdGlvbiAodCkgeyByZXR1cm4gdCgpIH0pKSwgbCA9IFtdIH0gcmV0dXJuIGguc2V0T3B0aW9ucyhpKS50aGVuKChmdW5jdGlvbiAodCkgeyAhYyAmJiBpLm9uRmlyc3RVcGRhdGUgJiYgaS5vbkZpcnN0VXBkYXRlKHQpIH0pKSwgaCB9IH0gdmFyIGhlID0gY2UoKSwgZGUgPSBjZSh7IGRlZmF1bHRNb2RpZmllcnM6IFtSdCwgc2UsIFB0LCBtdF0gfSksIHVlID0gY2UoeyBkZWZhdWx0TW9kaWZpZXJzOiBbUnQsIHNlLCBQdCwgbXQsIG5lLCBKdCwgb2UsIE50LCBpZV0gfSksIGZlID0gT2JqZWN0LmZyZWV6ZSh7IF9fcHJvdG9fXzogbnVsbCwgcG9wcGVyR2VuZXJhdG9yOiBjZSwgZGV0ZWN0T3ZlcmZsb3c6IEd0LCBjcmVhdGVQb3BwZXJCYXNlOiBoZSwgY3JlYXRlUG9wcGVyOiB1ZSwgY3JlYXRlUG9wcGVyTGl0ZTogZGUsIHRvcDogaXQsIGJvdHRvbTogbnQsIHJpZ2h0OiBzdCwgbGVmdDogb3QsIGF1dG86ICJhdXRvIiwgYmFzZVBsYWNlbWVudHM6IHJ0LCBzdGFydDogInN0YXJ0IiwgZW5kOiAiZW5kIiwgY2xpcHBpbmdQYXJlbnRzOiAiY2xpcHBpbmdQYXJlbnRzIiwgdmlld3BvcnQ6ICJ2aWV3cG9ydCIsIHBvcHBlcjogInBvcHBlciIsIHJlZmVyZW5jZTogInJlZmVyZW5jZSIsIHZhcmlhdGlvblBsYWNlbWVudHM6IGF0LCBwbGFjZW1lbnRzOiBsdCwgYmVmb3JlUmVhZDogImJlZm9yZVJlYWQiLCByZWFkOiAicmVhZCIsIGFmdGVyUmVhZDogImFmdGVyUmVhZCIsIGJlZm9yZU1haW46ICJiZWZvcmVNYWluIiwgbWFpbjogIm1haW4iLCBhZnRlck1haW46ICJhZnRlck1haW4iLCBiZWZvcmVXcml0ZTogImJlZm9yZVdyaXRlIiwgd3JpdGU6ICJ3cml0ZSIsIGFmdGVyV3JpdGU6ICJhZnRlcldyaXRlIiwgbW9kaWZpZXJQaGFzZXM6IGN0LCBhcHBseVN0eWxlczogbXQsIGFycm93OiBOdCwgY29tcHV0ZVN0eWxlczogUHQsIGV2ZW50TGlzdGVuZXJzOiBSdCwgZmxpcDogSnQsIGhpZGU6IGllLCBvZmZzZXQ6IG5lLCBwb3BwZXJPZmZzZXRzOiBzZSwgcHJldmVudE92ZXJmbG93OiBvZSB9KTsgY29uc3QgcGUgPSBuZXcgUmVnRXhwKCJBcnJvd1VwfEFycm93RG93bnxFc2NhcGUiKSwgbWUgPSBnKCkgPyAidG9wLWVuZCIgOiAidG9wLXN0YXJ0IiwgZ2UgPSBnKCkgPyAidG9wLXN0YXJ0IiA6ICJ0b3AtZW5kIiwgX2UgPSBnKCkgPyAiYm90dG9tLWVuZCIgOiAiYm90dG9tLXN0YXJ0IiwgYmUgPSBnKCkgPyAiYm90dG9tLXN0YXJ0IiA6ICJib3R0b20tZW5kIiwgdmUgPSBnKCkgPyAibGVmdC1zdGFydCIgOiAicmlnaHQtc3RhcnQiLCB5ZSA9IGcoKSA/ICJyaWdodC1zdGFydCIgOiAibGVmdC1zdGFydCIsIHdlID0geyBvZmZzZXQ6IFswLCAyXSwgYm91bmRhcnk6ICJjbGlwcGluZ1BhcmVudHMiLCByZWZlcmVuY2U6ICJ0b2dnbGUiLCBkaXNwbGF5OiAiZHluYW1pYyIsIHBvcHBlckNvbmZpZzogbnVsbCwgYXV0b0Nsb3NlOiAhMCB9LCBFZSA9IHsgb2Zmc2V0OiAiKGFycmF5fHN0cmluZ3xmdW5jdGlvbikiLCBib3VuZGFyeTogIihzdHJpbmd8ZWxlbWVudCkiLCByZWZlcmVuY2U6ICIoc3RyaW5nfGVsZW1lbnR8b2JqZWN0KSIsIGRpc3BsYXk6ICJzdHJpbmciLCBwb3BwZXJDb25maWc6ICIobnVsbHxvYmplY3R8ZnVuY3Rpb24pIiwgYXV0b0Nsb3NlOiAiKGJvb2xlYW58c3RyaW5nKSIgfTsgY2xhc3MgQWUgZXh0ZW5kcyBCIHsgY29uc3RydWN0b3IodCwgZSkgeyBzdXBlcih0KSwgdGhpcy5fcG9wcGVyID0gbnVsbCwgdGhpcy5fY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGUpLCB0aGlzLl9tZW51ID0gdGhpcy5fZ2V0TWVudUVsZW1lbnQoKSwgdGhpcy5faW5OYXZiYXIgPSB0aGlzLl9kZXRlY3ROYXZiYXIoKSwgdGhpcy5fYWRkRXZlbnRMaXN0ZW5lcnMoKSB9IHN0YXRpYyBnZXQgRGVmYXVsdCgpIHsgcmV0dXJuIHdlIH0gc3RhdGljIGdldCBEZWZhdWx0VHlwZSgpIHsgcmV0dXJuIEVlIH0gc3RhdGljIGdldCBOQU1FKCkgeyByZXR1cm4gImRyb3Bkb3duIiB9IHRvZ2dsZSgpIHsgaCh0aGlzLl9lbGVtZW50KSB8fCAodGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoInNob3ciKSA/IHRoaXMuaGlkZSgpIDogdGhpcy5zaG93KCkpIH0gc2hvdygpIHsgaWYgKGgodGhpcy5fZWxlbWVudCkgfHwgdGhpcy5fbWVudS5jbGFzc0xpc3QuY29udGFpbnMoInNob3ciKSkgcmV0dXJuOyBjb25zdCB0ID0gQWUuZ2V0UGFyZW50RnJvbUVsZW1lbnQodGhpcy5fZWxlbWVudCksIGUgPSB7IHJlbGF0ZWRUYXJnZXQ6IHRoaXMuX2VsZW1lbnQgfTsgaWYgKCFQLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgInNob3cuYnMuZHJvcGRvd24iLCBlKS5kZWZhdWx0UHJldmVudGVkKSB7IGlmICh0aGlzLl9pbk5hdmJhcikgVS5zZXREYXRhQXR0cmlidXRlKHRoaXMuX21lbnUsICJwb3BwZXIiLCAibm9uZSIpOyBlbHNlIHsgaWYgKHZvaWQgMCA9PT0gZmUpIHRocm93IG5ldyBUeXBlRXJyb3IoIkJvb3RzdHJhcCdzIGRyb3Bkb3ducyByZXF1aXJlIFBvcHBlciAoaHR0cHM6Ly9wb3BwZXIuanMub3JnKSIpOyBsZXQgZSA9IHRoaXMuX2VsZW1lbnQ7ICJwYXJlbnQiID09PSB0aGlzLl9jb25maWcucmVmZXJlbmNlID8gZSA9IHQgOiByKHRoaXMuX2NvbmZpZy5yZWZlcmVuY2UpID8gZSA9IGEodGhpcy5fY29uZmlnLnJlZmVyZW5jZSkgOiAib2JqZWN0IiA9PSB0eXBlb2YgdGhpcy5fY29uZmlnLnJlZmVyZW5jZSAmJiAoZSA9IHRoaXMuX2NvbmZpZy5yZWZlcmVuY2UpOyBjb25zdCBpID0gdGhpcy5fZ2V0UG9wcGVyQ29uZmlnKCksIG4gPSBpLm1vZGlmaWVycy5maW5kKHQgPT4gImFwcGx5U3R5bGVzIiA9PT0gdC5uYW1lICYmICExID09PSB0LmVuYWJsZWQpOyB0aGlzLl9wb3BwZXIgPSB1ZShlLCB0aGlzLl9tZW51LCBpKSwgbiAmJiBVLnNldERhdGFBdHRyaWJ1dGUodGhpcy5fbWVudSwgInBvcHBlciIsICJzdGF0aWMiKSB9ICJvbnRvdWNoc3RhcnQiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiAhdC5jbG9zZXN0KCIubmF2YmFyLW5hdiIpICYmIFtdLmNvbmNhdCguLi5kb2N1bWVudC5ib2R5LmNoaWxkcmVuKS5mb3JFYWNoKHQgPT4gUC5vbih0LCAibW91c2VvdmVyIiwgdSkpLCB0aGlzLl9lbGVtZW50LmZvY3VzKCksIHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCJhcmlhLWV4cGFuZGVkIiwgITApLCB0aGlzLl9tZW51LmNsYXNzTGlzdC50b2dnbGUoInNob3ciKSwgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCJzaG93IiksIFAudHJpZ2dlcih0aGlzLl9lbGVtZW50LCAic2hvd24uYnMuZHJvcGRvd24iLCBlKSB9IH0gaGlkZSgpIHsgaWYgKGgodGhpcy5fZWxlbWVudCkgfHwgIXRoaXMuX21lbnUuY2xhc3NMaXN0LmNvbnRhaW5zKCJzaG93IikpIHJldHVybjsgY29uc3QgdCA9IHsgcmVsYXRlZFRhcmdldDogdGhpcy5fZWxlbWVudCB9OyB0aGlzLl9jb21wbGV0ZUhpZGUodCkgfSBkaXNwb3NlKCkgeyB0aGlzLl9wb3BwZXIgJiYgdGhpcy5fcG9wcGVyLmRlc3Ryb3koKSwgc3VwZXIuZGlzcG9zZSgpIH0gdXBkYXRlKCkgeyB0aGlzLl9pbk5hdmJhciA9IHRoaXMuX2RldGVjdE5hdmJhcigpLCB0aGlzLl9wb3BwZXIgJiYgdGhpcy5fcG9wcGVyLnVwZGF0ZSgpIH0gX2FkZEV2ZW50TGlzdGVuZXJzKCkgeyBQLm9uKHRoaXMuX2VsZW1lbnQsICJjbGljay5icy5kcm9wZG93biIsIHQgPT4geyB0LnByZXZlbnREZWZhdWx0KCksIHRoaXMudG9nZ2xlKCkgfSkgfSBfY29tcGxldGVIaWRlKHQpIHsgUC50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsICJoaWRlLmJzLmRyb3Bkb3duIiwgdCkuZGVmYXVsdFByZXZlbnRlZCB8fCAoIm9udG91Y2hzdGFydCIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIFtdLmNvbmNhdCguLi5kb2N1bWVudC5ib2R5LmNoaWxkcmVuKS5mb3JFYWNoKHQgPT4gUC5vZmYodCwgIm1vdXNlb3ZlciIsIHUpKSwgdGhpcy5fcG9wcGVyICYmIHRoaXMuX3BvcHBlci5kZXN0cm95KCksIHRoaXMuX21lbnUuY2xhc3NMaXN0LnJlbW92ZSgic2hvdyIpLCB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoInNob3ciKSwgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoImFyaWEtZXhwYW5kZWQiLCAiZmFsc2UiKSwgVS5yZW1vdmVEYXRhQXR0cmlidXRlKHRoaXMuX21lbnUsICJwb3BwZXIiKSwgUC50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsICJoaWRkZW4uYnMuZHJvcGRvd24iLCB0KSkgfSBfZ2V0Q29uZmlnKHQpIHsgaWYgKHQgPSB7IC4uLnRoaXMuY29uc3RydWN0b3IuRGVmYXVsdCwgLi4uVS5nZXREYXRhQXR0cmlidXRlcyh0aGlzLl9lbGVtZW50KSwgLi4udCB9LCBsKCJkcm9wZG93biIsIHQsIHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdFR5cGUpLCAib2JqZWN0IiA9PSB0eXBlb2YgdC5yZWZlcmVuY2UgJiYgIXIodC5yZWZlcmVuY2UpICYmICJmdW5jdGlvbiIgIT0gdHlwZW9mIHQucmVmZXJlbmNlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCkgdGhyb3cgbmV3IFR5cGVFcnJvcigiZHJvcGRvd24iLnRvVXBwZXJDYXNlKCkgKyAnOiBPcHRpb24gInJlZmVyZW5jZSIgcHJvdmlkZWQgdHlwZSAib2JqZWN0IiB3aXRob3V0IGEgcmVxdWlyZWQgImdldEJvdW5kaW5nQ2xpZW50UmVjdCIgbWV0aG9kLicpOyByZXR1cm4gdCB9IF9nZXRNZW51RWxlbWVudCgpIHsgcmV0dXJuIHQubmV4dCh0aGlzLl9lbGVtZW50LCAiLmRyb3Bkb3duLW1lbnUiKVswXSB9IF9nZXRQbGFjZW1lbnQoKSB7IGNvbnN0IHQgPSB0aGlzLl9lbGVtZW50LnBhcmVudE5vZGU7IGlmICh0LmNsYXNzTGlzdC5jb250YWlucygiZHJvcGVuZCIpKSByZXR1cm4gdmU7IGlmICh0LmNsYXNzTGlzdC5jb250YWlucygiZHJvcHN0YXJ0IikpIHJldHVybiB5ZTsgY29uc3QgZSA9ICJlbmQiID09PSBnZXRDb21wdXRlZFN0eWxlKHRoaXMuX21lbnUpLmdldFByb3BlcnR5VmFsdWUoIi0tYnMtcG9zaXRpb24iKS50cmltKCk7IHJldHVybiB0LmNsYXNzTGlzdC5jb250YWlucygiZHJvcHVwIikgPyBlID8gZ2UgOiBtZSA6IGUgPyBiZSA6IF9lIH0gX2RldGVjdE5hdmJhcigpIHsgcmV0dXJuIG51bGwgIT09IHRoaXMuX2VsZW1lbnQuY2xvc2VzdCgiLm5hdmJhciIpIH0gX2dldE9mZnNldCgpIHsgY29uc3QgeyBvZmZzZXQ6IHQgfSA9IHRoaXMuX2NvbmZpZzsgcmV0dXJuICJzdHJpbmciID09IHR5cGVvZiB0ID8gdC5zcGxpdCgiLCIpLm1hcCh0ID0+IE51bWJlci5wYXJzZUludCh0LCAxMCkpIDogImZ1bmN0aW9uIiA9PSB0eXBlb2YgdCA/IGUgPT4gdChlLCB0aGlzLl9lbGVtZW50KSA6IHQgfSBfZ2V0UG9wcGVyQ29uZmlnKCkgeyBjb25zdCB0ID0geyBwbGFjZW1lbnQ6IHRoaXMuX2dldFBsYWNlbWVudCgpLCBtb2RpZmllcnM6IFt7IG5hbWU6ICJwcmV2ZW50T3ZlcmZsb3ciLCBvcHRpb25zOiB7IGJvdW5kYXJ5OiB0aGlzLl9jb25maWcuYm91bmRhcnkgfSB9LCB7IG5hbWU6ICJvZmZzZXQiLCBvcHRpb25zOiB7IG9mZnNldDogdGhpcy5fZ2V0T2Zmc2V0KCkgfSB9XSB9OyByZXR1cm4gInN0YXRpYyIgPT09IHRoaXMuX2NvbmZpZy5kaXNwbGF5ICYmICh0Lm1vZGlmaWVycyA9IFt7IG5hbWU6ICJhcHBseVN0eWxlcyIsIGVuYWJsZWQ6ICExIH1dKSwgeyAuLi50LCAuLi4iZnVuY3Rpb24iID09IHR5cGVvZiB0aGlzLl9jb25maWcucG9wcGVyQ29uZmlnID8gdGhpcy5fY29uZmlnLnBvcHBlckNvbmZpZyh0KSA6IHRoaXMuX2NvbmZpZy5wb3BwZXJDb25maWcgfSB9IF9zZWxlY3RNZW51SXRlbSh7IGtleTogZSwgdGFyZ2V0OiBpIH0pIHsgY29uc3QgbiA9IHQuZmluZCgiLmRyb3Bkb3duLW1lbnUgLmRyb3Bkb3duLWl0ZW06bm90KC5kaXNhYmxlZCk6bm90KDpkaXNhYmxlZCkiLCB0aGlzLl9tZW51KS5maWx0ZXIoYyk7IG4ubGVuZ3RoICYmIHkobiwgaSwgIkFycm93RG93biIgPT09IGUsICFuLmluY2x1ZGVzKGkpKS5mb2N1cygpIH0gc3RhdGljIGRyb3Bkb3duSW50ZXJmYWNlKHQsIGUpIHsgY29uc3QgaSA9IEFlLmdldE9yQ3JlYXRlSW5zdGFuY2UodCwgZSk7IGlmICgic3RyaW5nIiA9PSB0eXBlb2YgZSkgeyBpZiAodm9pZCAwID09PSBpW2VdKSB0aHJvdyBuZXcgVHlwZUVycm9yKGBObyBtZXRob2QgbmFtZWQgIiR7ZX0iYCk7IGlbZV0oKSB9IH0gc3RhdGljIGpRdWVyeUludGVyZmFjZSh0KSB7IHJldHVybiB0aGlzLmVhY2goKGZ1bmN0aW9uICgpIHsgQWUuZHJvcGRvd25JbnRlcmZhY2UodGhpcywgdCkgfSkpIH0gc3RhdGljIGNsZWFyTWVudXMoZSkgeyBpZiAoZSAmJiAoMiA9PT0gZS5idXR0b24gfHwgImtleXVwIiA9PT0gZS50eXBlICYmICJUYWIiICE9PSBlLmtleSkpIHJldHVybjsgY29uc3QgaSA9IHQuZmluZCgnW2RhdGEtYnMtdG9nZ2xlPSJkcm9wZG93biJdJyk7IGZvciAobGV0IHQgPSAwLCBuID0gaS5sZW5ndGg7IHQgPCBuOyB0KyspIHsgY29uc3QgbiA9IEFlLmdldEluc3RhbmNlKGlbdF0pOyBpZiAoIW4gfHwgITEgPT09IG4uX2NvbmZpZy5hdXRvQ2xvc2UpIGNvbnRpbnVlOyBpZiAoIW4uX2VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCJzaG93IikpIGNvbnRpbnVlOyBjb25zdCBzID0geyByZWxhdGVkVGFyZ2V0OiBuLl9lbGVtZW50IH07IGlmIChlKSB7IGNvbnN0IHQgPSBlLmNvbXBvc2VkUGF0aCgpLCBpID0gdC5pbmNsdWRlcyhuLl9tZW51KTsgaWYgKHQuaW5jbHVkZXMobi5fZWxlbWVudCkgfHwgImluc2lkZSIgPT09IG4uX2NvbmZpZy5hdXRvQ2xvc2UgJiYgIWkgfHwgIm91dHNpZGUiID09PSBuLl9jb25maWcuYXV0b0Nsb3NlICYmIGkpIGNvbnRpbnVlOyBpZiAobi5fbWVudS5jb250YWlucyhlLnRhcmdldCkgJiYgKCJrZXl1cCIgPT09IGUudHlwZSAmJiAiVGFiIiA9PT0gZS5rZXkgfHwgL2lucHV0fHNlbGVjdHxvcHRpb258dGV4dGFyZWF8Zm9ybS9pLnRlc3QoZS50YXJnZXQudGFnTmFtZSkpKSBjb250aW51ZTsgImNsaWNrIiA9PT0gZS50eXBlICYmIChzLmNsaWNrRXZlbnQgPSBlKSB9IG4uX2NvbXBsZXRlSGlkZShzKSB9IH0gc3RhdGljIGdldFBhcmVudEZyb21FbGVtZW50KHQpIHsgcmV0dXJuIHModCkgfHwgdC5wYXJlbnROb2RlIH0gc3RhdGljIGRhdGFBcGlLZXlkb3duSGFuZGxlcihlKSB7IGlmICgvaW5wdXR8dGV4dGFyZWEvaS50ZXN0KGUudGFyZ2V0LnRhZ05hbWUpID8gIlNwYWNlIiA9PT0gZS5rZXkgfHwgIkVzY2FwZSIgIT09IGUua2V5ICYmICgiQXJyb3dEb3duIiAhPT0gZS5rZXkgJiYgIkFycm93VXAiICE9PSBlLmtleSB8fCBlLnRhcmdldC5jbG9zZXN0KCIuZHJvcGRvd24tbWVudSIpKSA6ICFwZS50ZXN0KGUua2V5KSkgcmV0dXJuOyBjb25zdCBpID0gdGhpcy5jbGFzc0xpc3QuY29udGFpbnMoInNob3ciKTsgaWYgKCFpICYmICJFc2NhcGUiID09PSBlLmtleSkgcmV0dXJuOyBpZiAoZS5wcmV2ZW50RGVmYXVsdCgpLCBlLnN0b3BQcm9wYWdhdGlvbigpLCBoKHRoaXMpKSByZXR1cm47IGNvbnN0IG4gPSAoKSA9PiB0aGlzLm1hdGNoZXMoJ1tkYXRhLWJzLXRvZ2dsZT0iZHJvcGRvd24iXScpID8gdGhpcyA6IHQucHJldih0aGlzLCAnW2RhdGEtYnMtdG9nZ2xlPSJkcm9wZG93biJdJylbMF07IHJldHVybiAiRXNjYXBlIiA9PT0gZS5rZXkgPyAobigpLmZvY3VzKCksIHZvaWQgQWUuY2xlYXJNZW51cygpKSA6ICJBcnJvd1VwIiA9PT0gZS5rZXkgfHwgIkFycm93RG93biIgPT09IGUua2V5ID8gKGkgfHwgbigpLmNsaWNrKCksIHZvaWQgQWUuZ2V0SW5zdGFuY2UobigpKS5fc2VsZWN0TWVudUl0ZW0oZSkpIDogdm9pZCAoaSAmJiAiU3BhY2UiICE9PSBlLmtleSB8fCBBZS5jbGVhck1lbnVzKCkpIH0gfSBQLm9uKGRvY3VtZW50LCAia2V5ZG93bi5icy5kcm9wZG93bi5kYXRhLWFwaSIsICdbZGF0YS1icy10b2dnbGU9ImRyb3Bkb3duIl0nLCBBZS5kYXRhQXBpS2V5ZG93bkhhbmRsZXIpLCBQLm9uKGRvY3VtZW50LCAia2V5ZG93bi5icy5kcm9wZG93bi5kYXRhLWFwaSIsICIuZHJvcGRvd24tbWVudSIsIEFlLmRhdGFBcGlLZXlkb3duSGFuZGxlciksIFAub24oZG9jdW1lbnQsICJjbGljay5icy5kcm9wZG93bi5kYXRhLWFwaSIsIEFlLmNsZWFyTWVudXMpLCBQLm9uKGRvY3VtZW50LCAia2V5dXAuYnMuZHJvcGRvd24uZGF0YS1hcGkiLCBBZS5jbGVhck1lbnVzKSwgUC5vbihkb2N1bWVudCwgImNsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpIiwgJ1tkYXRhLWJzLXRvZ2dsZT0iZHJvcGRvd24iXScsIChmdW5jdGlvbiAodCkgeyB0LnByZXZlbnREZWZhdWx0KCksIEFlLmRyb3Bkb3duSW50ZXJmYWNlKHRoaXMpIH0pKSwgXyhBZSk7IGNsYXNzIFRlIHsgY29uc3RydWN0b3IoKSB7IHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5ib2R5IH0gZ2V0V2lkdGgoKSB7IGNvbnN0IHQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7IHJldHVybiBNYXRoLmFicyh3aW5kb3cuaW5uZXJXaWR0aCAtIHQpIH0gaGlkZSgpIHsgY29uc3QgdCA9IHRoaXMuZ2V0V2lkdGgoKTsgdGhpcy5fZGlzYWJsZU92ZXJGbG93KCksIHRoaXMuX3NldEVsZW1lbnRBdHRyaWJ1dGVzKHRoaXMuX2VsZW1lbnQsICJwYWRkaW5nUmlnaHQiLCBlID0+IGUgKyB0KSwgdGhpcy5fc2V0RWxlbWVudEF0dHJpYnV0ZXMoIi5maXhlZC10b3AsIC5maXhlZC1ib3R0b20sIC5pcy1maXhlZCwgLnN0aWNreS10b3AiLCAicGFkZGluZ1JpZ2h0IiwgZSA9PiBlICsgdCksIHRoaXMuX3NldEVsZW1lbnRBdHRyaWJ1dGVzKCIuc3RpY2t5LXRvcCIsICJtYXJnaW5SaWdodCIsIGUgPT4gZSAtIHQpIH0gX2Rpc2FibGVPdmVyRmxvdygpIHsgdGhpcy5fc2F2ZUluaXRpYWxBdHRyaWJ1dGUodGhpcy5fZWxlbWVudCwgIm92ZXJmbG93IiksIHRoaXMuX2VsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSAiaGlkZGVuIiB9IF9zZXRFbGVtZW50QXR0cmlidXRlcyh0LCBlLCBpKSB7IGNvbnN0IG4gPSB0aGlzLmdldFdpZHRoKCk7IHRoaXMuX2FwcGx5TWFuaXB1bGF0aW9uQ2FsbGJhY2sodCwgdCA9PiB7IGlmICh0ICE9PSB0aGlzLl9lbGVtZW50ICYmIHdpbmRvdy5pbm5lcldpZHRoID4gdC5jbGllbnRXaWR0aCArIG4pIHJldHVybjsgdGhpcy5fc2F2ZUluaXRpYWxBdHRyaWJ1dGUodCwgZSk7IGNvbnN0IHMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0KVtlXTsgdC5zdHlsZVtlXSA9IGkoTnVtYmVyLnBhcnNlRmxvYXQocykpICsgInB4IiB9KSB9IHJlc2V0KCkgeyB0aGlzLl9yZXNldEVsZW1lbnRBdHRyaWJ1dGVzKHRoaXMuX2VsZW1lbnQsICJvdmVyZmxvdyIpLCB0aGlzLl9yZXNldEVsZW1lbnRBdHRyaWJ1dGVzKHRoaXMuX2VsZW1lbnQsICJwYWRkaW5nUmlnaHQiKSwgdGhpcy5fcmVzZXRFbGVtZW50QXR0cmlidXRlcygiLmZpeGVkLXRvcCwgLmZpeGVkLWJvdHRvbSwgLmlzLWZpeGVkLCAuc3RpY2t5LXRvcCIsICJwYWRkaW5nUmlnaHQiKSwgdGhpcy5fcmVzZXRFbGVtZW50QXR0cmlidXRlcygiLnN0aWNreS10b3AiLCAibWFyZ2luUmlnaHQiKSB9IF9zYXZlSW5pdGlhbEF0dHJpYnV0ZSh0LCBlKSB7IGNvbnN0IGkgPSB0LnN0eWxlW2VdOyBpICYmIFUuc2V0RGF0YUF0dHJpYnV0ZSh0LCBlLCBpKSB9IF9yZXNldEVsZW1lbnRBdHRyaWJ1dGVzKHQsIGUpIHsgdGhpcy5fYXBwbHlNYW5pcHVsYXRpb25DYWxsYmFjayh0LCB0ID0+IHsgY29uc3QgaSA9IFUuZ2V0RGF0YUF0dHJpYnV0ZSh0LCBlKTsgdm9pZCAwID09PSBpID8gdC5zdHlsZS5yZW1vdmVQcm9wZXJ0eShlKSA6IChVLnJlbW92ZURhdGFBdHRyaWJ1dGUodCwgZSksIHQuc3R5bGVbZV0gPSBpKSB9KSB9IF9hcHBseU1hbmlwdWxhdGlvbkNhbGxiYWNrKGUsIGkpIHsgcihlKSA/IGkoZSkgOiB0LmZpbmQoZSwgdGhpcy5fZWxlbWVudCkuZm9yRWFjaChpKSB9IGlzT3ZlcmZsb3dpbmcoKSB7IHJldHVybiB0aGlzLmdldFdpZHRoKCkgPiAwIH0gfSBjb25zdCBPZSA9IHsgaXNWaXNpYmxlOiAhMCwgaXNBbmltYXRlZDogITEsIHJvb3RFbGVtZW50OiAiYm9keSIsIGNsaWNrQ2FsbGJhY2s6IG51bGwgfSwgQ2UgPSB7IGlzVmlzaWJsZTogImJvb2xlYW4iLCBpc0FuaW1hdGVkOiAiYm9vbGVhbiIsIHJvb3RFbGVtZW50OiAiKGVsZW1lbnR8c3RyaW5nKSIsIGNsaWNrQ2FsbGJhY2s6ICIoZnVuY3Rpb258bnVsbCkiIH07IGNsYXNzIGtlIHsgY29uc3RydWN0b3IodCkgeyB0aGlzLl9jb25maWcgPSB0aGlzLl9nZXRDb25maWcodCksIHRoaXMuX2lzQXBwZW5kZWQgPSAhMSwgdGhpcy5fZWxlbWVudCA9IG51bGwgfSBzaG93KHQpIHsgdGhpcy5fY29uZmlnLmlzVmlzaWJsZSA/ICh0aGlzLl9hcHBlbmQoKSwgdGhpcy5fY29uZmlnLmlzQW5pbWF0ZWQgJiYgZih0aGlzLl9nZXRFbGVtZW50KCkpLCB0aGlzLl9nZXRFbGVtZW50KCkuY2xhc3NMaXN0LmFkZCgic2hvdyIpLCB0aGlzLl9lbXVsYXRlQW5pbWF0aW9uKCgpID0+IHsgYih0KSB9KSkgOiBiKHQpIH0gaGlkZSh0KSB7IHRoaXMuX2NvbmZpZy5pc1Zpc2libGUgPyAodGhpcy5fZ2V0RWxlbWVudCgpLmNsYXNzTGlzdC5yZW1vdmUoInNob3ciKSwgdGhpcy5fZW11bGF0ZUFuaW1hdGlvbigoKSA9PiB7IHRoaXMuZGlzcG9zZSgpLCBiKHQpIH0pKSA6IGIodCkgfSBfZ2V0RWxlbWVudCgpIHsgaWYgKCF0aGlzLl9lbGVtZW50KSB7IGNvbnN0IHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsgdC5jbGFzc05hbWUgPSAibW9kYWwtYmFja2Ryb3AiLCB0aGlzLl9jb25maWcuaXNBbmltYXRlZCAmJiB0LmNsYXNzTGlzdC5hZGQoImZhZGUiKSwgdGhpcy5fZWxlbWVudCA9IHQgfSByZXR1cm4gdGhpcy5fZWxlbWVudCB9IF9nZXRDb25maWcodCkgeyByZXR1cm4gKHQgPSB7IC4uLk9lLCAuLi4ib2JqZWN0IiA9PSB0eXBlb2YgdCA/IHQgOiB7fSB9KS5yb290RWxlbWVudCA9IGEodC5yb290RWxlbWVudCksIGwoImJhY2tkcm9wIiwgdCwgQ2UpLCB0IH0gX2FwcGVuZCgpIHsgdGhpcy5faXNBcHBlbmRlZCB8fCAodGhpcy5fY29uZmlnLnJvb3RFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2dldEVsZW1lbnQoKSksIFAub24odGhpcy5fZ2V0RWxlbWVudCgpLCAibW91c2Vkb3duLmJzLmJhY2tkcm9wIiwgKCkgPT4geyBiKHRoaXMuX2NvbmZpZy5jbGlja0NhbGxiYWNrKSB9KSwgdGhpcy5faXNBcHBlbmRlZCA9ICEwKSB9IGRpc3Bvc2UoKSB7IHRoaXMuX2lzQXBwZW5kZWQgJiYgKFAub2ZmKHRoaXMuX2VsZW1lbnQsICJtb3VzZWRvd24uYnMuYmFja2Ryb3AiKSwgdGhpcy5fZWxlbWVudC5yZW1vdmUoKSwgdGhpcy5faXNBcHBlbmRlZCA9ICExKSB9IF9lbXVsYXRlQW5pbWF0aW9uKHQpIHsgdih0LCB0aGlzLl9nZXRFbGVtZW50KCksIHRoaXMuX2NvbmZpZy5pc0FuaW1hdGVkKSB9IH0gY29uc3QgTGUgPSB7IGJhY2tkcm9wOiAhMCwga2V5Ym9hcmQ6ICEwLCBmb2N1czogITAgfSwgeGUgPSB7IGJhY2tkcm9wOiAiKGJvb2xlYW58c3RyaW5nKSIsIGtleWJvYXJkOiAiYm9vbGVhbiIsIGZvY3VzOiAiYm9vbGVhbiIgfTsgY2xhc3MgRGUgZXh0ZW5kcyBCIHsgY29uc3RydWN0b3IoZSwgaSkgeyBzdXBlcihlKSwgdGhpcy5fY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGkpLCB0aGlzLl9kaWFsb2cgPSB0LmZpbmRPbmUoIi5tb2RhbC1kaWFsb2ciLCB0aGlzLl9lbGVtZW50KSwgdGhpcy5fYmFja2Ryb3AgPSB0aGlzLl9pbml0aWFsaXplQmFja0Ryb3AoKSwgdGhpcy5faXNTaG93biA9ICExLCB0aGlzLl9pZ25vcmVCYWNrZHJvcENsaWNrID0gITEsIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9ICExLCB0aGlzLl9zY3JvbGxCYXIgPSBuZXcgVGUgfSBzdGF0aWMgZ2V0IERlZmF1bHQoKSB7IHJldHVybiBMZSB9IHN0YXRpYyBnZXQgTkFNRSgpIHsgcmV0dXJuICJtb2RhbCIgfSB0b2dnbGUodCkgeyByZXR1cm4gdGhpcy5faXNTaG93biA/IHRoaXMuaGlkZSgpIDogdGhpcy5zaG93KHQpIH0gc2hvdyh0KSB7IHRoaXMuX2lzU2hvd24gfHwgdGhpcy5faXNUcmFuc2l0aW9uaW5nIHx8IFAudHJpZ2dlcih0aGlzLl9lbGVtZW50LCAic2hvdy5icy5tb2RhbCIsIHsgcmVsYXRlZFRhcmdldDogdCB9KS5kZWZhdWx0UHJldmVudGVkIHx8ICh0aGlzLl9pc1Nob3duID0gITAsIHRoaXMuX2lzQW5pbWF0ZWQoKSAmJiAodGhpcy5faXNUcmFuc2l0aW9uaW5nID0gITApLCB0aGlzLl9zY3JvbGxCYXIuaGlkZSgpLCBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoIm1vZGFsLW9wZW4iKSwgdGhpcy5fYWRqdXN0RGlhbG9nKCksIHRoaXMuX3NldEVzY2FwZUV2ZW50KCksIHRoaXMuX3NldFJlc2l6ZUV2ZW50KCksIFAub24odGhpcy5fZWxlbWVudCwgImNsaWNrLmRpc21pc3MuYnMubW9kYWwiLCAnW2RhdGEtYnMtZGlzbWlzcz0ibW9kYWwiXScsIHQgPT4gdGhpcy5oaWRlKHQpKSwgUC5vbih0aGlzLl9kaWFsb2csICJtb3VzZWRvd24uZGlzbWlzcy5icy5tb2RhbCIsICgpID0+IHsgUC5vbmUodGhpcy5fZWxlbWVudCwgIm1vdXNldXAuZGlzbWlzcy5icy5tb2RhbCIsIHQgPT4geyB0LnRhcmdldCA9PT0gdGhpcy5fZWxlbWVudCAmJiAodGhpcy5faWdub3JlQmFja2Ryb3BDbGljayA9ICEwKSB9KSB9KSwgdGhpcy5fc2hvd0JhY2tkcm9wKCgpID0+IHRoaXMuX3Nob3dFbGVtZW50KHQpKSkgfSBoaWRlKHQpIHsgaWYgKHQgJiYgWyJBIiwgIkFSRUEiXS5pbmNsdWRlcyh0LnRhcmdldC50YWdOYW1lKSAmJiB0LnByZXZlbnREZWZhdWx0KCksICF0aGlzLl9pc1Nob3duIHx8IHRoaXMuX2lzVHJhbnNpdGlvbmluZykgcmV0dXJuOyBpZiAoUC50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsICJoaWRlLmJzLm1vZGFsIikuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuOyB0aGlzLl9pc1Nob3duID0gITE7IGNvbnN0IGUgPSB0aGlzLl9pc0FuaW1hdGVkKCk7IGUgJiYgKHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9ICEwKSwgdGhpcy5fc2V0RXNjYXBlRXZlbnQoKSwgdGhpcy5fc2V0UmVzaXplRXZlbnQoKSwgUC5vZmYoZG9jdW1lbnQsICJmb2N1c2luLmJzLm1vZGFsIiksIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgic2hvdyIpLCBQLm9mZih0aGlzLl9lbGVtZW50LCAiY2xpY2suZGlzbWlzcy5icy5tb2RhbCIpLCBQLm9mZih0aGlzLl9kaWFsb2csICJtb3VzZWRvd24uZGlzbWlzcy5icy5tb2RhbCIpLCB0aGlzLl9xdWV1ZUNhbGxiYWNrKCgpID0+IHRoaXMuX2hpZGVNb2RhbCgpLCB0aGlzLl9lbGVtZW50LCBlKSB9IGRpc3Bvc2UoKSB7IFt3aW5kb3csIHRoaXMuX2RpYWxvZ10uZm9yRWFjaCh0ID0+IFAub2ZmKHQsICIuYnMubW9kYWwiKSksIHRoaXMuX2JhY2tkcm9wLmRpc3Bvc2UoKSwgc3VwZXIuZGlzcG9zZSgpLCBQLm9mZihkb2N1bWVudCwgImZvY3VzaW4uYnMubW9kYWwiKSB9IGhhbmRsZVVwZGF0ZSgpIHsgdGhpcy5fYWRqdXN0RGlhbG9nKCkgfSBfaW5pdGlhbGl6ZUJhY2tEcm9wKCkgeyByZXR1cm4gbmV3IGtlKHsgaXNWaXNpYmxlOiBCb29sZWFuKHRoaXMuX2NvbmZpZy5iYWNrZHJvcCksIGlzQW5pbWF0ZWQ6IHRoaXMuX2lzQW5pbWF0ZWQoKSB9KSB9IF9nZXRDb25maWcodCkgeyByZXR1cm4gdCA9IHsgLi4uTGUsIC4uLlUuZ2V0RGF0YUF0dHJpYnV0ZXModGhpcy5fZWxlbWVudCksIC4uLiJvYmplY3QiID09IHR5cGVvZiB0ID8gdCA6IHt9IH0sIGwoIm1vZGFsIiwgdCwgeGUpLCB0IH0gX3Nob3dFbGVtZW50KGUpIHsgY29uc3QgaSA9IHRoaXMuX2lzQW5pbWF0ZWQoKSwgbiA9IHQuZmluZE9uZSgiLm1vZGFsLWJvZHkiLCB0aGlzLl9kaWFsb2cpOyB0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUgJiYgdGhpcy5fZWxlbWVudC5wYXJlbnROb2RlLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSB8fCBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuX2VsZW1lbnQpLCB0aGlzLl9lbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siLCB0aGlzLl9lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iKSwgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoImFyaWEtbW9kYWwiLCAhMCksIHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCJyb2xlIiwgImRpYWxvZyIpLCB0aGlzLl9lbGVtZW50LnNjcm9sbFRvcCA9IDAsIG4gJiYgKG4uc2Nyb2xsVG9wID0gMCksIGkgJiYgZih0aGlzLl9lbGVtZW50KSwgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJzaG93IiksIHRoaXMuX2NvbmZpZy5mb2N1cyAmJiB0aGlzLl9lbmZvcmNlRm9jdXMoKSwgdGhpcy5fcXVldWVDYWxsYmFjaygoKSA9PiB7IHRoaXMuX2NvbmZpZy5mb2N1cyAmJiB0aGlzLl9lbGVtZW50LmZvY3VzKCksIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9ICExLCBQLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgInNob3duLmJzLm1vZGFsIiwgeyByZWxhdGVkVGFyZ2V0OiBlIH0pIH0sIHRoaXMuX2RpYWxvZywgaSkgfSBfZW5mb3JjZUZvY3VzKCkgeyBQLm9mZihkb2N1bWVudCwgImZvY3VzaW4uYnMubW9kYWwiKSwgUC5vbihkb2N1bWVudCwgImZvY3VzaW4uYnMubW9kYWwiLCB0ID0+IHsgZG9jdW1lbnQgPT09IHQudGFyZ2V0IHx8IHRoaXMuX2VsZW1lbnQgPT09IHQudGFyZ2V0IHx8IHRoaXMuX2VsZW1lbnQuY29udGFpbnModC50YXJnZXQpIHx8IHRoaXMuX2VsZW1lbnQuZm9jdXMoKSB9KSB9IF9zZXRFc2NhcGVFdmVudCgpIHsgdGhpcy5faXNTaG93biA/IFAub24odGhpcy5fZWxlbWVudCwgImtleWRvd24uZGlzbWlzcy5icy5tb2RhbCIsIHQgPT4geyB0aGlzLl9jb25maWcua2V5Ym9hcmQgJiYgIkVzY2FwZSIgPT09IHQua2V5ID8gKHQucHJldmVudERlZmF1bHQoKSwgdGhpcy5oaWRlKCkpIDogdGhpcy5fY29uZmlnLmtleWJvYXJkIHx8ICJFc2NhcGUiICE9PSB0LmtleSB8fCB0aGlzLl90cmlnZ2VyQmFja2Ryb3BUcmFuc2l0aW9uKCkgfSkgOiBQLm9mZih0aGlzLl9lbGVtZW50LCAia2V5ZG93bi5kaXNtaXNzLmJzLm1vZGFsIikgfSBfc2V0UmVzaXplRXZlbnQoKSB7IHRoaXMuX2lzU2hvd24gPyBQLm9uKHdpbmRvdywgInJlc2l6ZS5icy5tb2RhbCIsICgpID0+IHRoaXMuX2FkanVzdERpYWxvZygpKSA6IFAub2ZmKHdpbmRvdywgInJlc2l6ZS5icy5tb2RhbCIpIH0gX2hpZGVNb2RhbCgpIHsgdGhpcy5fZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiLCB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iLCAhMCksIHRoaXMuX2VsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCJhcmlhLW1vZGFsIiksIHRoaXMuX2VsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCJyb2xlIiksIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9ICExLCB0aGlzLl9iYWNrZHJvcC5oaWRlKCgpID0+IHsgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCJtb2RhbC1vcGVuIiksIHRoaXMuX3Jlc2V0QWRqdXN0bWVudHMoKSwgdGhpcy5fc2Nyb2xsQmFyLnJlc2V0KCksIFAudHJpZ2dlcih0aGlzLl9lbGVtZW50LCAiaGlkZGVuLmJzLm1vZGFsIikgfSkgfSBfc2hvd0JhY2tkcm9wKHQpIHsgUC5vbih0aGlzLl9lbGVtZW50LCAiY2xpY2suZGlzbWlzcy5icy5tb2RhbCIsIHQgPT4geyB0aGlzLl9pZ25vcmVCYWNrZHJvcENsaWNrID8gdGhpcy5faWdub3JlQmFja2Ryb3BDbGljayA9ICExIDogdC50YXJnZXQgPT09IHQuY3VycmVudFRhcmdldCAmJiAoITAgPT09IHRoaXMuX2NvbmZpZy5iYWNrZHJvcCA/IHRoaXMuaGlkZSgpIDogInN0YXRpYyIgPT09IHRoaXMuX2NvbmZpZy5iYWNrZHJvcCAmJiB0aGlzLl90cmlnZ2VyQmFja2Ryb3BUcmFuc2l0aW9uKCkpIH0pLCB0aGlzLl9iYWNrZHJvcC5zaG93KHQpIH0gX2lzQW5pbWF0ZWQoKSB7IHJldHVybiB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygiZmFkZSIpIH0gX3RyaWdnZXJCYWNrZHJvcFRyYW5zaXRpb24oKSB7IGlmIChQLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgImhpZGVQcmV2ZW50ZWQuYnMubW9kYWwiKS5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47IGNvbnN0IHsgY2xhc3NMaXN0OiB0LCBzY3JvbGxIZWlnaHQ6IGUsIHN0eWxlOiBpIH0gPSB0aGlzLl9lbGVtZW50LCBuID0gZSA+IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQ7ICFuICYmICJoaWRkZW4iID09PSBpLm92ZXJmbG93WSB8fCB0LmNvbnRhaW5zKCJtb2RhbC1zdGF0aWMiKSB8fCAobiB8fCAoaS5vdmVyZmxvd1kgPSAiaGlkZGVuIiksIHQuYWRkKCJtb2RhbC1zdGF0aWMiKSwgdGhpcy5fcXVldWVDYWxsYmFjaygoKSA9PiB7IHQucmVtb3ZlKCJtb2RhbC1zdGF0aWMiKSwgbiB8fCB0aGlzLl9xdWV1ZUNhbGxiYWNrKCgpID0+IHsgaS5vdmVyZmxvd1kgPSAiIiB9LCB0aGlzLl9kaWFsb2cpIH0sIHRoaXMuX2RpYWxvZyksIHRoaXMuX2VsZW1lbnQuZm9jdXMoKSkgfSBfYWRqdXN0RGlhbG9nKCkgeyBjb25zdCB0ID0gdGhpcy5fZWxlbWVudC5zY3JvbGxIZWlnaHQgPiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0LCBlID0gdGhpcy5fc2Nyb2xsQmFyLmdldFdpZHRoKCksIGkgPSBlID4gMDsgKCFpICYmIHQgJiYgIWcoKSB8fCBpICYmICF0ICYmIGcoKSkgJiYgKHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ0xlZnQgPSBlICsgInB4IiksIChpICYmICF0ICYmICFnKCkgfHwgIWkgJiYgdCAmJiBnKCkpICYmICh0aGlzLl9lbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodCA9IGUgKyAicHgiKSB9IF9yZXNldEFkanVzdG1lbnRzKCkgeyB0aGlzLl9lbGVtZW50LnN0eWxlLnBhZGRpbmdMZWZ0ID0gIiIsIHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gIiIgfSBzdGF0aWMgalF1ZXJ5SW50ZXJmYWNlKHQsIGUpIHsgcmV0dXJuIHRoaXMuZWFjaCgoZnVuY3Rpb24gKCkgeyBjb25zdCBpID0gRGUuZ2V0T3JDcmVhdGVJbnN0YW5jZSh0aGlzLCB0KTsgaWYgKCJzdHJpbmciID09IHR5cGVvZiB0KSB7IGlmICh2b2lkIDAgPT09IGlbdF0pIHRocm93IG5ldyBUeXBlRXJyb3IoYE5vIG1ldGhvZCBuYW1lZCAiJHt0fSJgKTsgaVt0XShlKSB9IH0pKSB9IH0gUC5vbihkb2N1bWVudCwgImNsaWNrLmJzLm1vZGFsLmRhdGEtYXBpIiwgJ1tkYXRhLWJzLXRvZ2dsZT0ibW9kYWwiXScsIChmdW5jdGlvbiAodCkgeyBjb25zdCBlID0gcyh0aGlzKTtbIkEiLCAiQVJFQSJdLmluY2x1ZGVzKHRoaXMudGFnTmFtZSkgJiYgdC5wcmV2ZW50RGVmYXVsdCgpLCBQLm9uZShlLCAic2hvdy5icy5tb2RhbCIsIHQgPT4geyB0LmRlZmF1bHRQcmV2ZW50ZWQgfHwgUC5vbmUoZSwgImhpZGRlbi5icy5tb2RhbCIsICgpID0+IHsgYyh0aGlzKSAmJiB0aGlzLmZvY3VzKCkgfSkgfSksIERlLmdldE9yQ3JlYXRlSW5zdGFuY2UoZSkudG9nZ2xlKHRoaXMpIH0pKSwgXyhEZSk7IGNvbnN0IFNlID0geyBiYWNrZHJvcDogITAsIGtleWJvYXJkOiAhMCwgc2Nyb2xsOiAhMSB9LCBJZSA9IHsgYmFja2Ryb3A6ICJib29sZWFuIiwga2V5Ym9hcmQ6ICJib29sZWFuIiwgc2Nyb2xsOiAiYm9vbGVhbiIgfTsgY2xhc3MgTmUgZXh0ZW5kcyBCIHsgY29uc3RydWN0b3IodCwgZSkgeyBzdXBlcih0KSwgdGhpcy5fY29uZmlnID0gdGhpcy5fZ2V0Q29uZmlnKGUpLCB0aGlzLl9pc1Nob3duID0gITEsIHRoaXMuX2JhY2tkcm9wID0gdGhpcy5faW5pdGlhbGl6ZUJhY2tEcm9wKCksIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCkgfSBzdGF0aWMgZ2V0IE5BTUUoKSB7IHJldHVybiAib2ZmY2FudmFzIiB9IHN0YXRpYyBnZXQgRGVmYXVsdCgpIHsgcmV0dXJuIFNlIH0gdG9nZ2xlKHQpIHsgcmV0dXJuIHRoaXMuX2lzU2hvd24gPyB0aGlzLmhpZGUoKSA6IHRoaXMuc2hvdyh0KSB9IHNob3codCkgeyB0aGlzLl9pc1Nob3duIHx8IFAudHJpZ2dlcih0aGlzLl9lbGVtZW50LCAic2hvdy5icy5vZmZjYW52YXMiLCB7IHJlbGF0ZWRUYXJnZXQ6IHQgfSkuZGVmYXVsdFByZXZlbnRlZCB8fCAodGhpcy5faXNTaG93biA9ICEwLCB0aGlzLl9lbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAidmlzaWJsZSIsIHRoaXMuX2JhY2tkcm9wLnNob3coKSwgdGhpcy5fY29uZmlnLnNjcm9sbCB8fCAoKG5ldyBUZSkuaGlkZSgpLCB0aGlzLl9lbmZvcmNlRm9jdXNPbkVsZW1lbnQodGhpcy5fZWxlbWVudCkpLCB0aGlzLl9lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iKSwgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoImFyaWEtbW9kYWwiLCAhMCksIHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCJyb2xlIiwgImRpYWxvZyIpLCB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoInNob3ciKSwgdGhpcy5fcXVldWVDYWxsYmFjaygoKSA9PiB7IFAudHJpZ2dlcih0aGlzLl9lbGVtZW50LCAic2hvd24uYnMub2ZmY2FudmFzIiwgeyByZWxhdGVkVGFyZ2V0OiB0IH0pIH0sIHRoaXMuX2VsZW1lbnQsICEwKSkgfSBoaWRlKCkgeyB0aGlzLl9pc1Nob3duICYmIChQLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgImhpZGUuYnMub2ZmY2FudmFzIikuZGVmYXVsdFByZXZlbnRlZCB8fCAoUC5vZmYoZG9jdW1lbnQsICJmb2N1c2luLmJzLm9mZmNhbnZhcyIpLCB0aGlzLl9lbGVtZW50LmJsdXIoKSwgdGhpcy5faXNTaG93biA9ICExLCB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoInNob3ciKSwgdGhpcy5fYmFja2Ryb3AuaGlkZSgpLCB0aGlzLl9xdWV1ZUNhbGxiYWNrKCgpID0+IHsgdGhpcy5fZWxlbWVudC5zZXRBdHRyaWJ1dGUoImFyaWEtaGlkZGVuIiwgITApLCB0aGlzLl9lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgiYXJpYS1tb2RhbCIpLCB0aGlzLl9lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgicm9sZSIpLCB0aGlzLl9lbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAiaGlkZGVuIiwgdGhpcy5fY29uZmlnLnNjcm9sbCB8fCAobmV3IFRlKS5yZXNldCgpLCBQLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgImhpZGRlbi5icy5vZmZjYW52YXMiKSB9LCB0aGlzLl9lbGVtZW50LCAhMCkpKSB9IGRpc3Bvc2UoKSB7IHRoaXMuX2JhY2tkcm9wLmRpc3Bvc2UoKSwgc3VwZXIuZGlzcG9zZSgpLCBQLm9mZihkb2N1bWVudCwgImZvY3VzaW4uYnMub2ZmY2FudmFzIikgfSBfZ2V0Q29uZmlnKHQpIHsgcmV0dXJuIHQgPSB7IC4uLlNlLCAuLi5VLmdldERhdGFBdHRyaWJ1dGVzKHRoaXMuX2VsZW1lbnQpLCAuLi4ib2JqZWN0IiA9PSB0eXBlb2YgdCA/IHQgOiB7fSB9LCBsKCJvZmZjYW52YXMiLCB0LCBJZSksIHQgfSBfaW5pdGlhbGl6ZUJhY2tEcm9wKCkgeyByZXR1cm4gbmV3IGtlKHsgaXNWaXNpYmxlOiB0aGlzLl9jb25maWcuYmFja2Ryb3AsIGlzQW5pbWF0ZWQ6ICEwLCByb290RWxlbWVudDogdGhpcy5fZWxlbWVudC5wYXJlbnROb2RlLCBjbGlja0NhbGxiYWNrOiAoKSA9PiB0aGlzLmhpZGUoKSB9KSB9IF9lbmZvcmNlRm9jdXNPbkVsZW1lbnQodCkgeyBQLm9mZihkb2N1bWVudCwgImZvY3VzaW4uYnMub2ZmY2FudmFzIiksIFAub24oZG9jdW1lbnQsICJmb2N1c2luLmJzLm9mZmNhbnZhcyIsIGUgPT4geyBkb2N1bWVudCA9PT0gZS50YXJnZXQgfHwgdCA9PT0gZS50YXJnZXQgfHwgdC5jb250YWlucyhlLnRhcmdldCkgfHwgdC5mb2N1cygpIH0pLCB0LmZvY3VzKCkgfSBfYWRkRXZlbnRMaXN0ZW5lcnMoKSB7IFAub24odGhpcy5fZWxlbWVudCwgImNsaWNrLmRpc21pc3MuYnMub2ZmY2FudmFzIiwgJ1tkYXRhLWJzLWRpc21pc3M9Im9mZmNhbnZhcyJdJywgKCkgPT4gdGhpcy5oaWRlKCkpLCBQLm9uKHRoaXMuX2VsZW1lbnQsICJrZXlkb3duLmRpc21pc3MuYnMub2ZmY2FudmFzIiwgdCA9PiB7IHRoaXMuX2NvbmZpZy5rZXlib2FyZCAmJiAiRXNjYXBlIiA9PT0gdC5rZXkgJiYgdGhpcy5oaWRlKCkgfSkgfSBzdGF0aWMgalF1ZXJ5SW50ZXJmYWNlKHQpIHsgcmV0dXJuIHRoaXMuZWFjaCgoZnVuY3Rpb24gKCkgeyBjb25zdCBlID0gTmUuZ2V0T3JDcmVhdGVJbnN0YW5jZSh0aGlzLCB0KTsgaWYgKCJzdHJpbmciID09IHR5cGVvZiB0KSB7IGlmICh2b2lkIDAgPT09IGVbdF0gfHwgdC5zdGFydHNXaXRoKCJfIikgfHwgImNvbnN0cnVjdG9yIiA9PT0gdCkgdGhyb3cgbmV3IFR5cGVFcnJvcihgTm8gbWV0aG9kIG5hbWVkICIke3R9ImApOyBlW3RdKHRoaXMpIH0gfSkpIH0gfSBQLm9uKGRvY3VtZW50LCAiY2xpY2suYnMub2ZmY2FudmFzLmRhdGEtYXBpIiwgJ1tkYXRhLWJzLXRvZ2dsZT0ib2ZmY2FudmFzIl0nLCAoZnVuY3Rpb24gKGUpIHsgY29uc3QgaSA9IHModGhpcyk7IGlmIChbIkEiLCAiQVJFQSJdLmluY2x1ZGVzKHRoaXMudGFnTmFtZSkgJiYgZS5wcmV2ZW50RGVmYXVsdCgpLCBoKHRoaXMpKSByZXR1cm47IFAub25lKGksICJoaWRkZW4uYnMub2ZmY2FudmFzIiwgKCkgPT4geyBjKHRoaXMpICYmIHRoaXMuZm9jdXMoKSB9KTsgY29uc3QgbiA9IHQuZmluZE9uZSgiLm9mZmNhbnZhcy5zaG93Iik7IG4gJiYgbiAhPT0gaSAmJiBOZS5nZXRJbnN0YW5jZShuKS5oaWRlKCksIE5lLmdldE9yQ3JlYXRlSW5zdGFuY2UoaSkudG9nZ2xlKHRoaXMpIH0pKSwgUC5vbih3aW5kb3csICJsb2FkLmJzLm9mZmNhbnZhcy5kYXRhLWFwaSIsICgpID0+IHQuZmluZCgiLm9mZmNhbnZhcy5zaG93IikuZm9yRWFjaCh0ID0+IE5lLmdldE9yQ3JlYXRlSW5zdGFuY2UodCkuc2hvdygpKSksIF8oTmUpOyBjb25zdCBqZSA9IG5ldyBTZXQoWyJiYWNrZ3JvdW5kIiwgImNpdGUiLCAiaHJlZiIsICJpdGVtdHlwZSIsICJsb25nZGVzYyIsICJwb3N0ZXIiLCAic3JjIiwgInhsaW5rOmhyZWYiXSksIE1lID0gL14oPzooPzpodHRwcz98bWFpbHRvfGZ0cHx0ZWx8ZmlsZSk6fFteIyYvOj9dKig/OlsjLz9dfCQpKS9pLCBQZSA9IC9eZGF0YTooPzppbWFnZVwvKD86Ym1wfGdpZnxqcGVnfGpwZ3xwbmd8dGlmZnx3ZWJwKXx2aWRlb1wvKD86bXBlZ3xtcDR8b2dnfHdlYm0pfGF1ZGlvXC8oPzptcDN8b2dhfG9nZ3xvcHVzKSk7YmFzZTY0LFtcZCsvYS16XSs9KiQvaSwgSGUgPSAodCwgZSkgPT4geyBjb25zdCBpID0gdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpOyBpZiAoZS5pbmNsdWRlcyhpKSkgcmV0dXJuICFqZS5oYXMoaSkgfHwgQm9vbGVhbihNZS50ZXN0KHQubm9kZVZhbHVlKSB8fCBQZS50ZXN0KHQubm9kZVZhbHVlKSk7IGNvbnN0IG4gPSBlLmZpbHRlcih0ID0+IHQgaW5zdGFuY2VvZiBSZWdFeHApOyBmb3IgKGxldCB0ID0gMCwgZSA9IG4ubGVuZ3RoOyB0IDwgZTsgdCsrKWlmIChuW3RdLnRlc3QoaSkpIHJldHVybiAhMDsgcmV0dXJuICExIH07IGZ1bmN0aW9uIFJlKHQsIGUsIGkpIHsgaWYgKCF0Lmxlbmd0aCkgcmV0dXJuIHQ7IGlmIChpICYmICJmdW5jdGlvbiIgPT0gdHlwZW9mIGkpIHJldHVybiBpKHQpOyBjb25zdCBuID0gKG5ldyB3aW5kb3cuRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcodCwgInRleHQvaHRtbCIpLCBzID0gT2JqZWN0LmtleXMoZSksIG8gPSBbXS5jb25jYXQoLi4ubi5ib2R5LnF1ZXJ5U2VsZWN0b3JBbGwoIioiKSk7IGZvciAobGV0IHQgPSAwLCBpID0gby5sZW5ndGg7IHQgPCBpOyB0KyspIHsgY29uc3QgaSA9IG9bdF0sIG4gPSBpLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7IGlmICghcy5pbmNsdWRlcyhuKSkgeyBpLnJlbW92ZSgpOyBjb250aW51ZSB9IGNvbnN0IHIgPSBbXS5jb25jYXQoLi4uaS5hdHRyaWJ1dGVzKSwgYSA9IFtdLmNvbmNhdChlWyIqIl0gfHwgW10sIGVbbl0gfHwgW10pOyByLmZvckVhY2godCA9PiB7IEhlKHQsIGEpIHx8IGkucmVtb3ZlQXR0cmlidXRlKHQubm9kZU5hbWUpIH0pIH0gcmV0dXJuIG4uYm9keS5pbm5lckhUTUwgfSBjb25zdCBCZSA9IG5ldyBSZWdFeHAoIihefFxccylicy10b29sdGlwXFxTKyIsICJnIiksIFdlID0gbmV3IFNldChbInNhbml0aXplIiwgImFsbG93TGlzdCIsICJzYW5pdGl6ZUZuIl0pLCBxZSA9IHsgYW5pbWF0aW9uOiAiYm9vbGVhbiIsIHRlbXBsYXRlOiAic3RyaW5nIiwgdGl0bGU6ICIoc3RyaW5nfGVsZW1lbnR8ZnVuY3Rpb24pIiwgdHJpZ2dlcjogInN0cmluZyIsIGRlbGF5OiAiKG51bWJlcnxvYmplY3QpIiwgaHRtbDogImJvb2xlYW4iLCBzZWxlY3RvcjogIihzdHJpbmd8Ym9vbGVhbikiLCBwbGFjZW1lbnQ6ICIoc3RyaW5nfGZ1bmN0aW9uKSIsIG9mZnNldDogIihhcnJheXxzdHJpbmd8ZnVuY3Rpb24pIiwgY29udGFpbmVyOiAiKHN0cmluZ3xlbGVtZW50fGJvb2xlYW4pIiwgZmFsbGJhY2tQbGFjZW1lbnRzOiAiYXJyYXkiLCBib3VuZGFyeTogIihzdHJpbmd8ZWxlbWVudCkiLCBjdXN0b21DbGFzczogIihzdHJpbmd8ZnVuY3Rpb24pIiwgc2FuaXRpemU6ICJib29sZWFuIiwgc2FuaXRpemVGbjogIihudWxsfGZ1bmN0aW9uKSIsIGFsbG93TGlzdDogIm9iamVjdCIsIHBvcHBlckNvbmZpZzogIihudWxsfG9iamVjdHxmdW5jdGlvbikiIH0sIHplID0geyBBVVRPOiAiYXV0byIsIFRPUDogInRvcCIsIFJJR0hUOiBnKCkgPyAibGVmdCIgOiAicmlnaHQiLCBCT1RUT006ICJib3R0b20iLCBMRUZUOiBnKCkgPyAicmlnaHQiIDogImxlZnQiIH0sICRlID0geyBhbmltYXRpb246ICEwLCB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9InRvb2x0aXAiIHJvbGU9InRvb2x0aXAiPjxkaXYgY2xhc3M9InRvb2x0aXAtYXJyb3ciPjwvZGl2PjxkaXYgY2xhc3M9InRvb2x0aXAtaW5uZXIiPjwvZGl2PjwvZGl2PicsIHRyaWdnZXI6ICJob3ZlciBmb2N1cyIsIHRpdGxlOiAiIiwgZGVsYXk6IDAsIGh0bWw6ICExLCBzZWxlY3RvcjogITEsIHBsYWNlbWVudDogInRvcCIsIG9mZnNldDogWzAsIDBdLCBjb250YWluZXI6ICExLCBmYWxsYmFja1BsYWNlbWVudHM6IFsidG9wIiwgInJpZ2h0IiwgImJvdHRvbSIsICJsZWZ0Il0sIGJvdW5kYXJ5OiAiY2xpcHBpbmdQYXJlbnRzIiwgY3VzdG9tQ2xhc3M6ICIiLCBzYW5pdGl6ZTogITAsIHNhbml0aXplRm46IG51bGwsIGFsbG93TGlzdDogeyAiKiI6IFsiY2xhc3MiLCAiZGlyIiwgImlkIiwgImxhbmciLCAicm9sZSIsIC9eYXJpYS1bXHctXSokL2ldLCBhOiBbInRhcmdldCIsICJocmVmIiwgInRpdGxlIiwgInJlbCJdLCBhcmVhOiBbXSwgYjogW10sIGJyOiBbXSwgY29sOiBbXSwgY29kZTogW10sIGRpdjogW10sIGVtOiBbXSwgaHI6IFtdLCBoMTogW10sIGgyOiBbXSwgaDM6IFtdLCBoNDogW10sIGg1OiBbXSwgaDY6IFtdLCBpOiBbXSwgaW1nOiBbInNyYyIsICJzcmNzZXQiLCAiYWx0IiwgInRpdGxlIiwgIndpZHRoIiwgImhlaWdodCJdLCBsaTogW10sIG9sOiBbXSwgcDogW10sIHByZTogW10sIHM6IFtdLCBzbWFsbDogW10sIHNwYW46IFtdLCBzdWI6IFtdLCBzdXA6IFtdLCBzdHJvbmc6IFtdLCB1OiBbXSwgdWw6IFtdIH0sIHBvcHBlckNvbmZpZzogbnVsbCB9LCBVZSA9IHsgSElERTogImhpZGUuYnMudG9vbHRpcCIsIEhJRERFTjogImhpZGRlbi5icy50b29sdGlwIiwgU0hPVzogInNob3cuYnMudG9vbHRpcCIsIFNIT1dOOiAic2hvd24uYnMudG9vbHRpcCIsIElOU0VSVEVEOiAiaW5zZXJ0ZWQuYnMudG9vbHRpcCIsIENMSUNLOiAiY2xpY2suYnMudG9vbHRpcCIsIEZPQ1VTSU46ICJmb2N1c2luLmJzLnRvb2x0aXAiLCBGT0NVU09VVDogImZvY3Vzb3V0LmJzLnRvb2x0aXAiLCBNT1VTRUVOVEVSOiAibW91c2VlbnRlci5icy50b29sdGlwIiwgTU9VU0VMRUFWRTogIm1vdXNlbGVhdmUuYnMudG9vbHRpcCIgfTsgY2xhc3MgRmUgZXh0ZW5kcyBCIHsgY29uc3RydWN0b3IodCwgZSkgeyBpZiAodm9pZCAwID09PSBmZSkgdGhyb3cgbmV3IFR5cGVFcnJvcigiQm9vdHN0cmFwJ3MgdG9vbHRpcHMgcmVxdWlyZSBQb3BwZXIgKGh0dHBzOi8vcG9wcGVyLmpzLm9yZykiKTsgc3VwZXIodCksIHRoaXMuX2lzRW5hYmxlZCA9ICEwLCB0aGlzLl90aW1lb3V0ID0gMCwgdGhpcy5faG92ZXJTdGF0ZSA9ICIiLCB0aGlzLl9hY3RpdmVUcmlnZ2VyID0ge30sIHRoaXMuX3BvcHBlciA9IG51bGwsIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhlKSwgdGhpcy50aXAgPSBudWxsLCB0aGlzLl9zZXRMaXN0ZW5lcnMoKSB9IHN0YXRpYyBnZXQgRGVmYXVsdCgpIHsgcmV0dXJuICRlIH0gc3RhdGljIGdldCBOQU1FKCkgeyByZXR1cm4gInRvb2x0aXAiIH0gc3RhdGljIGdldCBFdmVudCgpIHsgcmV0dXJuIFVlIH0gc3RhdGljIGdldCBEZWZhdWx0VHlwZSgpIHsgcmV0dXJuIHFlIH0gZW5hYmxlKCkgeyB0aGlzLl9pc0VuYWJsZWQgPSAhMCB9IGRpc2FibGUoKSB7IHRoaXMuX2lzRW5hYmxlZCA9ICExIH0gdG9nZ2xlRW5hYmxlZCgpIHsgdGhpcy5faXNFbmFibGVkID0gIXRoaXMuX2lzRW5hYmxlZCB9IHRvZ2dsZSh0KSB7IGlmICh0aGlzLl9pc0VuYWJsZWQpIGlmICh0KSB7IGNvbnN0IGUgPSB0aGlzLl9pbml0aWFsaXplT25EZWxlZ2F0ZWRUYXJnZXQodCk7IGUuX2FjdGl2ZVRyaWdnZXIuY2xpY2sgPSAhZS5fYWN0aXZlVHJpZ2dlci5jbGljaywgZS5faXNXaXRoQWN0aXZlVHJpZ2dlcigpID8gZS5fZW50ZXIobnVsbCwgZSkgOiBlLl9sZWF2ZShudWxsLCBlKSB9IGVsc2UgeyBpZiAodGhpcy5nZXRUaXBFbGVtZW50KCkuY2xhc3NMaXN0LmNvbnRhaW5zKCJzaG93IikpIHJldHVybiB2b2lkIHRoaXMuX2xlYXZlKG51bGwsIHRoaXMpOyB0aGlzLl9lbnRlcihudWxsLCB0aGlzKSB9IH0gZGlzcG9zZSgpIHsgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXQpLCBQLm9mZih0aGlzLl9lbGVtZW50LmNsb3Nlc3QoIi5tb2RhbCIpLCAiaGlkZS5icy5tb2RhbCIsIHRoaXMuX2hpZGVNb2RhbEhhbmRsZXIpLCB0aGlzLnRpcCAmJiB0aGlzLnRpcC5yZW1vdmUoKSwgdGhpcy5fcG9wcGVyICYmIHRoaXMuX3BvcHBlci5kZXN0cm95KCksIHN1cGVyLmRpc3Bvc2UoKSB9IHNob3coKSB7IGlmICgibm9uZSIgPT09IHRoaXMuX2VsZW1lbnQuc3R5bGUuZGlzcGxheSkgdGhyb3cgbmV3IEVycm9yKCJQbGVhc2UgdXNlIHNob3cgb24gdmlzaWJsZSBlbGVtZW50cyIpOyBpZiAoIXRoaXMuaXNXaXRoQ29udGVudCgpIHx8ICF0aGlzLl9pc0VuYWJsZWQpIHJldHVybjsgY29uc3QgdCA9IFAudHJpZ2dlcih0aGlzLl9lbGVtZW50LCB0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LlNIT1cpLCBpID0gZCh0aGlzLl9lbGVtZW50KSwgbiA9IG51bGwgPT09IGkgPyB0aGlzLl9lbGVtZW50Lm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zKHRoaXMuX2VsZW1lbnQpIDogaS5jb250YWlucyh0aGlzLl9lbGVtZW50KTsgaWYgKHQuZGVmYXVsdFByZXZlbnRlZCB8fCAhbikgcmV0dXJuOyBjb25zdCBzID0gdGhpcy5nZXRUaXBFbGVtZW50KCksIG8gPSBlKHRoaXMuY29uc3RydWN0b3IuTkFNRSk7IHMuc2V0QXR0cmlidXRlKCJpZCIsIG8pLCB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgiYXJpYS1kZXNjcmliZWRieSIsIG8pLCB0aGlzLnNldENvbnRlbnQoKSwgdGhpcy5fY29uZmlnLmFuaW1hdGlvbiAmJiBzLmNsYXNzTGlzdC5hZGQoImZhZGUiKTsgY29uc3QgciA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIHRoaXMuX2NvbmZpZy5wbGFjZW1lbnQgPyB0aGlzLl9jb25maWcucGxhY2VtZW50LmNhbGwodGhpcywgcywgdGhpcy5fZWxlbWVudCkgOiB0aGlzLl9jb25maWcucGxhY2VtZW50LCBhID0gdGhpcy5fZ2V0QXR0YWNobWVudChyKTsgdGhpcy5fYWRkQXR0YWNobWVudENsYXNzKGEpOyBjb25zdCB7IGNvbnRhaW5lcjogbCB9ID0gdGhpcy5fY29uZmlnOyBSLnNldChzLCB0aGlzLmNvbnN0cnVjdG9yLkRBVEFfS0VZLCB0aGlzKSwgdGhpcy5fZWxlbWVudC5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyh0aGlzLnRpcCkgfHwgKGwuYXBwZW5kQ2hpbGQocyksIFAudHJpZ2dlcih0aGlzLl9lbGVtZW50LCB0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LklOU0VSVEVEKSksIHRoaXMuX3BvcHBlciA/IHRoaXMuX3BvcHBlci51cGRhdGUoKSA6IHRoaXMuX3BvcHBlciA9IHVlKHRoaXMuX2VsZW1lbnQsIHMsIHRoaXMuX2dldFBvcHBlckNvbmZpZyhhKSksIHMuY2xhc3NMaXN0LmFkZCgic2hvdyIpOyBjb25zdCBjID0gImZ1bmN0aW9uIiA9PSB0eXBlb2YgdGhpcy5fY29uZmlnLmN1c3RvbUNsYXNzID8gdGhpcy5fY29uZmlnLmN1c3RvbUNsYXNzKCkgOiB0aGlzLl9jb25maWcuY3VzdG9tQ2xhc3M7IGMgJiYgcy5jbGFzc0xpc3QuYWRkKC4uLmMuc3BsaXQoIiAiKSksICJvbnRvdWNoc3RhcnQiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBbXS5jb25jYXQoLi4uZG9jdW1lbnQuYm9keS5jaGlsZHJlbikuZm9yRWFjaCh0ID0+IHsgUC5vbih0LCAibW91c2VvdmVyIiwgdSkgfSk7IGNvbnN0IGggPSB0aGlzLnRpcC5jbGFzc0xpc3QuY29udGFpbnMoImZhZGUiKTsgdGhpcy5fcXVldWVDYWxsYmFjaygoKSA9PiB7IGNvbnN0IHQgPSB0aGlzLl9ob3ZlclN0YXRlOyB0aGlzLl9ob3ZlclN0YXRlID0gbnVsbCwgUC50cmlnZ2VyKHRoaXMuX2VsZW1lbnQsIHRoaXMuY29uc3RydWN0b3IuRXZlbnQuU0hPV04pLCAib3V0IiA9PT0gdCAmJiB0aGlzLl9sZWF2ZShudWxsLCB0aGlzKSB9LCB0aGlzLnRpcCwgaCkgfSBoaWRlKCkgeyBpZiAoIXRoaXMuX3BvcHBlcikgcmV0dXJuOyBjb25zdCB0ID0gdGhpcy5nZXRUaXBFbGVtZW50KCk7IGlmIChQLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgdGhpcy5jb25zdHJ1Y3Rvci5FdmVudC5ISURFKS5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47IHQuY2xhc3NMaXN0LnJlbW92ZSgic2hvdyIpLCAib250b3VjaHN0YXJ0IiBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgW10uY29uY2F0KC4uLmRvY3VtZW50LmJvZHkuY2hpbGRyZW4pLmZvckVhY2godCA9PiBQLm9mZih0LCAibW91c2VvdmVyIiwgdSkpLCB0aGlzLl9hY3RpdmVUcmlnZ2VyLmNsaWNrID0gITEsIHRoaXMuX2FjdGl2ZVRyaWdnZXIuZm9jdXMgPSAhMSwgdGhpcy5fYWN0aXZlVHJpZ2dlci5ob3ZlciA9ICExOyBjb25zdCBlID0gdGhpcy50aXAuY2xhc3NMaXN0LmNvbnRhaW5zKCJmYWRlIik7IHRoaXMuX3F1ZXVlQ2FsbGJhY2soKCkgPT4geyB0aGlzLl9pc1dpdGhBY3RpdmVUcmlnZ2VyKCkgfHwgKCJzaG93IiAhPT0gdGhpcy5faG92ZXJTdGF0ZSAmJiB0LnJlbW92ZSgpLCB0aGlzLl9jbGVhblRpcENsYXNzKCksIHRoaXMuX2VsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCJhcmlhLWRlc2NyaWJlZGJ5IiksIFAudHJpZ2dlcih0aGlzLl9lbGVtZW50LCB0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LkhJRERFTiksIHRoaXMuX3BvcHBlciAmJiAodGhpcy5fcG9wcGVyLmRlc3Ryb3koKSwgdGhpcy5fcG9wcGVyID0gbnVsbCkpIH0sIHRoaXMudGlwLCBlKSwgdGhpcy5faG92ZXJTdGF0ZSA9ICIiIH0gdXBkYXRlKCkgeyBudWxsICE9PSB0aGlzLl9wb3BwZXIgJiYgdGhpcy5fcG9wcGVyLnVwZGF0ZSgpIH0gaXNXaXRoQ29udGVudCgpIHsgcmV0dXJuIEJvb2xlYW4odGhpcy5nZXRUaXRsZSgpKSB9IGdldFRpcEVsZW1lbnQoKSB7IGlmICh0aGlzLnRpcCkgcmV0dXJuIHRoaXMudGlwOyBjb25zdCB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7IHJldHVybiB0LmlubmVySFRNTCA9IHRoaXMuX2NvbmZpZy50ZW1wbGF0ZSwgdGhpcy50aXAgPSB0LmNoaWxkcmVuWzBdLCB0aGlzLnRpcCB9IHNldENvbnRlbnQoKSB7IGNvbnN0IGUgPSB0aGlzLmdldFRpcEVsZW1lbnQoKTsgdGhpcy5zZXRFbGVtZW50Q29udGVudCh0LmZpbmRPbmUoIi50b29sdGlwLWlubmVyIiwgZSksIHRoaXMuZ2V0VGl0bGUoKSksIGUuY2xhc3NMaXN0LnJlbW92ZSgiZmFkZSIsICJzaG93IikgfSBzZXRFbGVtZW50Q29udGVudCh0LCBlKSB7IGlmIChudWxsICE9PSB0KSByZXR1cm4gcihlKSA/IChlID0gYShlKSwgdm9pZCAodGhpcy5fY29uZmlnLmh0bWwgPyBlLnBhcmVudE5vZGUgIT09IHQgJiYgKHQuaW5uZXJIVE1MID0gIiIsIHQuYXBwZW5kQ2hpbGQoZSkpIDogdC50ZXh0Q29udGVudCA9IGUudGV4dENvbnRlbnQpKSA6IHZvaWQgKHRoaXMuX2NvbmZpZy5odG1sID8gKHRoaXMuX2NvbmZpZy5zYW5pdGl6ZSAmJiAoZSA9IFJlKGUsIHRoaXMuX2NvbmZpZy5hbGxvd0xpc3QsIHRoaXMuX2NvbmZpZy5zYW5pdGl6ZUZuKSksIHQuaW5uZXJIVE1MID0gZSkgOiB0LnRleHRDb250ZW50ID0gZSkgfSBnZXRUaXRsZSgpIHsgbGV0IHQgPSB0aGlzLl9lbGVtZW50LmdldEF0dHJpYnV0ZSgiZGF0YS1icy1vcmlnaW5hbC10aXRsZSIpOyByZXR1cm4gdCB8fCAodCA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIHRoaXMuX2NvbmZpZy50aXRsZSA/IHRoaXMuX2NvbmZpZy50aXRsZS5jYWxsKHRoaXMuX2VsZW1lbnQpIDogdGhpcy5fY29uZmlnLnRpdGxlKSwgdCB9IHVwZGF0ZUF0dGFjaG1lbnQodCkgeyByZXR1cm4gInJpZ2h0IiA9PT0gdCA/ICJlbmQiIDogImxlZnQiID09PSB0ID8gInN0YXJ0IiA6IHQgfSBfaW5pdGlhbGl6ZU9uRGVsZWdhdGVkVGFyZ2V0KHQsIGUpIHsgY29uc3QgaSA9IHRoaXMuY29uc3RydWN0b3IuREFUQV9LRVk7IHJldHVybiAoZSA9IGUgfHwgUi5nZXQodC5kZWxlZ2F0ZVRhcmdldCwgaSkpIHx8IChlID0gbmV3IHRoaXMuY29uc3RydWN0b3IodC5kZWxlZ2F0ZVRhcmdldCwgdGhpcy5fZ2V0RGVsZWdhdGVDb25maWcoKSksIFIuc2V0KHQuZGVsZWdhdGVUYXJnZXQsIGksIGUpKSwgZSB9IF9nZXRPZmZzZXQoKSB7IGNvbnN0IHsgb2Zmc2V0OiB0IH0gPSB0aGlzLl9jb25maWc7IHJldHVybiAic3RyaW5nIiA9PSB0eXBlb2YgdCA/IHQuc3BsaXQoIiwiKS5tYXAodCA9PiBOdW1iZXIucGFyc2VJbnQodCwgMTApKSA6ICJmdW5jdGlvbiIgPT0gdHlwZW9mIHQgPyBlID0+IHQoZSwgdGhpcy5fZWxlbWVudCkgOiB0IH0gX2dldFBvcHBlckNvbmZpZyh0KSB7IGNvbnN0IGUgPSB7IHBsYWNlbWVudDogdCwgbW9kaWZpZXJzOiBbeyBuYW1lOiAiZmxpcCIsIG9wdGlvbnM6IHsgZmFsbGJhY2tQbGFjZW1lbnRzOiB0aGlzLl9jb25maWcuZmFsbGJhY2tQbGFjZW1lbnRzIH0gfSwgeyBuYW1lOiAib2Zmc2V0Iiwgb3B0aW9uczogeyBvZmZzZXQ6IHRoaXMuX2dldE9mZnNldCgpIH0gfSwgeyBuYW1lOiAicHJldmVudE92ZXJmbG93Iiwgb3B0aW9uczogeyBib3VuZGFyeTogdGhpcy5fY29uZmlnLmJvdW5kYXJ5IH0gfSwgeyBuYW1lOiAiYXJyb3ciLCBvcHRpb25zOiB7IGVsZW1lbnQ6IGAuJHt0aGlzLmNvbnN0cnVjdG9yLk5BTUV9LWFycm93YCB9IH0sIHsgbmFtZTogIm9uQ2hhbmdlIiwgZW5hYmxlZDogITAsIHBoYXNlOiAiYWZ0ZXJXcml0ZSIsIGZuOiB0ID0+IHRoaXMuX2hhbmRsZVBvcHBlclBsYWNlbWVudENoYW5nZSh0KSB9XSwgb25GaXJzdFVwZGF0ZTogdCA9PiB7IHQub3B0aW9ucy5wbGFjZW1lbnQgIT09IHQucGxhY2VtZW50ICYmIHRoaXMuX2hhbmRsZVBvcHBlclBsYWNlbWVudENoYW5nZSh0KSB9IH07IHJldHVybiB7IC4uLmUsIC4uLiJmdW5jdGlvbiIgPT0gdHlwZW9mIHRoaXMuX2NvbmZpZy5wb3BwZXJDb25maWcgPyB0aGlzLl9jb25maWcucG9wcGVyQ29uZmlnKGUpIDogdGhpcy5fY29uZmlnLnBvcHBlckNvbmZpZyB9IH0gX2FkZEF0dGFjaG1lbnRDbGFzcyh0KSB7IHRoaXMuZ2V0VGlwRWxlbWVudCgpLmNsYXNzTGlzdC5hZGQoImJzLXRvb2x0aXAtIiArIHRoaXMudXBkYXRlQXR0YWNobWVudCh0KSkgfSBfZ2V0QXR0YWNobWVudCh0KSB7IHJldHVybiB6ZVt0LnRvVXBwZXJDYXNlKCldIH0gX3NldExpc3RlbmVycygpIHsgdGhpcy5fY29uZmlnLnRyaWdnZXIuc3BsaXQoIiAiKS5mb3JFYWNoKHQgPT4geyBpZiAoImNsaWNrIiA9PT0gdCkgUC5vbih0aGlzLl9lbGVtZW50LCB0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LkNMSUNLLCB0aGlzLl9jb25maWcuc2VsZWN0b3IsIHQgPT4gdGhpcy50b2dnbGUodCkpOyBlbHNlIGlmICgibWFudWFsIiAhPT0gdCkgeyBjb25zdCBlID0gImhvdmVyIiA9PT0gdCA/IHRoaXMuY29uc3RydWN0b3IuRXZlbnQuTU9VU0VFTlRFUiA6IHRoaXMuY29uc3RydWN0b3IuRXZlbnQuRk9DVVNJTiwgaSA9ICJob3ZlciIgPT09IHQgPyB0aGlzLmNvbnN0cnVjdG9yLkV2ZW50Lk1PVVNFTEVBVkUgOiB0aGlzLmNvbnN0cnVjdG9yLkV2ZW50LkZPQ1VTT1VUOyBQLm9uKHRoaXMuX2VsZW1lbnQsIGUsIHRoaXMuX2NvbmZpZy5zZWxlY3RvciwgdCA9PiB0aGlzLl9lbnRlcih0KSksIFAub24odGhpcy5fZWxlbWVudCwgaSwgdGhpcy5fY29uZmlnLnNlbGVjdG9yLCB0ID0+IHRoaXMuX2xlYXZlKHQpKSB9IH0pLCB0aGlzLl9oaWRlTW9kYWxIYW5kbGVyID0gKCkgPT4geyB0aGlzLl9lbGVtZW50ICYmIHRoaXMuaGlkZSgpIH0sIFAub24odGhpcy5fZWxlbWVudC5jbG9zZXN0KCIubW9kYWwiKSwgImhpZGUuYnMubW9kYWwiLCB0aGlzLl9oaWRlTW9kYWxIYW5kbGVyKSwgdGhpcy5fY29uZmlnLnNlbGVjdG9yID8gdGhpcy5fY29uZmlnID0geyAuLi50aGlzLl9jb25maWcsIHRyaWdnZXI6ICJtYW51YWwiLCBzZWxlY3RvcjogIiIgfSA6IHRoaXMuX2ZpeFRpdGxlKCkgfSBfZml4VGl0bGUoKSB7IGNvbnN0IHQgPSB0aGlzLl9lbGVtZW50LmdldEF0dHJpYnV0ZSgidGl0bGUiKSwgZSA9IHR5cGVvZiB0aGlzLl9lbGVtZW50LmdldEF0dHJpYnV0ZSgiZGF0YS1icy1vcmlnaW5hbC10aXRsZSIpOyAodCB8fCAic3RyaW5nIiAhPT0gZSkgJiYgKHRoaXMuX2VsZW1lbnQuc2V0QXR0cmlidXRlKCJkYXRhLWJzLW9yaWdpbmFsLXRpdGxlIiwgdCB8fCAiIiksICF0IHx8IHRoaXMuX2VsZW1lbnQuZ2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIikgfHwgdGhpcy5fZWxlbWVudC50ZXh0Q29udGVudCB8fCB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgiYXJpYS1sYWJlbCIsIHQpLCB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgidGl0bGUiLCAiIikpIH0gX2VudGVyKHQsIGUpIHsgZSA9IHRoaXMuX2luaXRpYWxpemVPbkRlbGVnYXRlZFRhcmdldCh0LCBlKSwgdCAmJiAoZS5fYWN0aXZlVHJpZ2dlclsiZm9jdXNpbiIgPT09IHQudHlwZSA/ICJmb2N1cyIgOiAiaG92ZXIiXSA9ICEwKSwgZS5nZXRUaXBFbGVtZW50KCkuY2xhc3NMaXN0LmNvbnRhaW5zKCJzaG93IikgfHwgInNob3ciID09PSBlLl9ob3ZlclN0YXRlID8gZS5faG92ZXJTdGF0ZSA9ICJzaG93IiA6IChjbGVhclRpbWVvdXQoZS5fdGltZW91dCksIGUuX2hvdmVyU3RhdGUgPSAic2hvdyIsIGUuX2NvbmZpZy5kZWxheSAmJiBlLl9jb25maWcuZGVsYXkuc2hvdyA/IGUuX3RpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHsgInNob3ciID09PSBlLl9ob3ZlclN0YXRlICYmIGUuc2hvdygpIH0sIGUuX2NvbmZpZy5kZWxheS5zaG93KSA6IGUuc2hvdygpKSB9IF9sZWF2ZSh0LCBlKSB7IGUgPSB0aGlzLl9pbml0aWFsaXplT25EZWxlZ2F0ZWRUYXJnZXQodCwgZSksIHQgJiYgKGUuX2FjdGl2ZVRyaWdnZXJbImZvY3Vzb3V0IiA9PT0gdC50eXBlID8gImZvY3VzIiA6ICJob3ZlciJdID0gZS5fZWxlbWVudC5jb250YWlucyh0LnJlbGF0ZWRUYXJnZXQpKSwgZS5faXNXaXRoQWN0aXZlVHJpZ2dlcigpIHx8IChjbGVhclRpbWVvdXQoZS5fdGltZW91dCksIGUuX2hvdmVyU3RhdGUgPSAib3V0IiwgZS5fY29uZmlnLmRlbGF5ICYmIGUuX2NvbmZpZy5kZWxheS5oaWRlID8gZS5fdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4geyAib3V0IiA9PT0gZS5faG92ZXJTdGF0ZSAmJiBlLmhpZGUoKSB9LCBlLl9jb25maWcuZGVsYXkuaGlkZSkgOiBlLmhpZGUoKSkgfSBfaXNXaXRoQWN0aXZlVHJpZ2dlcigpIHsgZm9yIChjb25zdCB0IGluIHRoaXMuX2FjdGl2ZVRyaWdnZXIpIGlmICh0aGlzLl9hY3RpdmVUcmlnZ2VyW3RdKSByZXR1cm4gITA7IHJldHVybiAhMSB9IF9nZXRDb25maWcodCkgeyBjb25zdCBlID0gVS5nZXREYXRhQXR0cmlidXRlcyh0aGlzLl9lbGVtZW50KTsgcmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2godCA9PiB7IFdlLmhhcyh0KSAmJiBkZWxldGUgZVt0XSB9KSwgKHQgPSB7IC4uLnRoaXMuY29uc3RydWN0b3IuRGVmYXVsdCwgLi4uZSwgLi4uIm9iamVjdCIgPT0gdHlwZW9mIHQgJiYgdCA/IHQgOiB7fSB9KS5jb250YWluZXIgPSAhMSA9PT0gdC5jb250YWluZXIgPyBkb2N1bWVudC5ib2R5IDogYSh0LmNvbnRhaW5lciksICJudW1iZXIiID09IHR5cGVvZiB0LmRlbGF5ICYmICh0LmRlbGF5ID0geyBzaG93OiB0LmRlbGF5LCBoaWRlOiB0LmRlbGF5IH0pLCAibnVtYmVyIiA9PSB0eXBlb2YgdC50aXRsZSAmJiAodC50aXRsZSA9IHQudGl0bGUudG9TdHJpbmcoKSksICJudW1iZXIiID09IHR5cGVvZiB0LmNvbnRlbnQgJiYgKHQuY29udGVudCA9IHQuY29udGVudC50b1N0cmluZygpKSwgbCgidG9vbHRpcCIsIHQsIHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdFR5cGUpLCB0LnNhbml0aXplICYmICh0LnRlbXBsYXRlID0gUmUodC50ZW1wbGF0ZSwgdC5hbGxvd0xpc3QsIHQuc2FuaXRpemVGbikpLCB0IH0gX2dldERlbGVnYXRlQ29uZmlnKCkgeyBjb25zdCB0ID0ge307IGlmICh0aGlzLl9jb25maWcpIGZvciAoY29uc3QgZSBpbiB0aGlzLl9jb25maWcpIHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdFtlXSAhPT0gdGhpcy5fY29uZmlnW2VdICYmICh0W2VdID0gdGhpcy5fY29uZmlnW2VdKTsgcmV0dXJuIHQgfSBfY2xlYW5UaXBDbGFzcygpIHsgY29uc3QgdCA9IHRoaXMuZ2V0VGlwRWxlbWVudCgpLCBlID0gdC5nZXRBdHRyaWJ1dGUoImNsYXNzIikubWF0Y2goQmUpOyBudWxsICE9PSBlICYmIGUubGVuZ3RoID4gMCAmJiBlLm1hcCh0ID0+IHQudHJpbSgpKS5mb3JFYWNoKGUgPT4gdC5jbGFzc0xpc3QucmVtb3ZlKGUpKSB9IF9oYW5kbGVQb3BwZXJQbGFjZW1lbnRDaGFuZ2UodCkgeyBjb25zdCB7IHN0YXRlOiBlIH0gPSB0OyBlICYmICh0aGlzLnRpcCA9IGUuZWxlbWVudHMucG9wcGVyLCB0aGlzLl9jbGVhblRpcENsYXNzKCksIHRoaXMuX2FkZEF0dGFjaG1lbnRDbGFzcyh0aGlzLl9nZXRBdHRhY2htZW50KGUucGxhY2VtZW50KSkpIH0gc3RhdGljIGpRdWVyeUludGVyZmFjZSh0KSB7IHJldHVybiB0aGlzLmVhY2goKGZ1bmN0aW9uICgpIHsgY29uc3QgZSA9IEZlLmdldE9yQ3JlYXRlSW5zdGFuY2UodGhpcywgdCk7IGlmICgic3RyaW5nIiA9PSB0eXBlb2YgdCkgeyBpZiAodm9pZCAwID09PSBlW3RdKSB0aHJvdyBuZXcgVHlwZUVycm9yKGBObyBtZXRob2QgbmFtZWQgIiR7dH0iYCk7IGVbdF0oKSB9IH0pKSB9IH0gXyhGZSk7IGNvbnN0IFZlID0gbmV3IFJlZ0V4cCgiKF58XFxzKWJzLXBvcG92ZXJcXFMrIiwgImciKSwgS2UgPSB7IC4uLkZlLkRlZmF1bHQsIHBsYWNlbWVudDogInJpZ2h0Iiwgb2Zmc2V0OiBbMCwgOF0sIHRyaWdnZXI6ICJjbGljayIsIGNvbnRlbnQ6ICIiLCB0ZW1wbGF0ZTogJzxkaXYgY2xhc3M9InBvcG92ZXIiIHJvbGU9InRvb2x0aXAiPjxkaXYgY2xhc3M9InBvcG92ZXItYXJyb3ciPjwvZGl2PjxoMyBjbGFzcz0icG9wb3Zlci1oZWFkZXIiPjwvaDM+PGRpdiBjbGFzcz0icG9wb3Zlci1ib2R5Ij48L2Rpdj48L2Rpdj4nIH0sIFhlID0geyAuLi5GZS5EZWZhdWx0VHlwZSwgY29udGVudDogIihzdHJpbmd8ZWxlbWVudHxmdW5jdGlvbikiIH0sIFllID0geyBISURFOiAiaGlkZS5icy5wb3BvdmVyIiwgSElEREVOOiAiaGlkZGVuLmJzLnBvcG92ZXIiLCBTSE9XOiAic2hvdy5icy5wb3BvdmVyIiwgU0hPV046ICJzaG93bi5icy5wb3BvdmVyIiwgSU5TRVJURUQ6ICJpbnNlcnRlZC5icy5wb3BvdmVyIiwgQ0xJQ0s6ICJjbGljay5icy5wb3BvdmVyIiwgRk9DVVNJTjogImZvY3VzaW4uYnMucG9wb3ZlciIsIEZPQ1VTT1VUOiAiZm9jdXNvdXQuYnMucG9wb3ZlciIsIE1PVVNFRU5URVI6ICJtb3VzZWVudGVyLmJzLnBvcG92ZXIiLCBNT1VTRUxFQVZFOiAibW91c2VsZWF2ZS5icy5wb3BvdmVyIiB9OyBjbGFzcyBRZSBleHRlbmRzIEZlIHsgc3RhdGljIGdldCBEZWZhdWx0KCkgeyByZXR1cm4gS2UgfSBzdGF0aWMgZ2V0IE5BTUUoKSB7IHJldHVybiAicG9wb3ZlciIgfSBzdGF0aWMgZ2V0IEV2ZW50KCkgeyByZXR1cm4gWWUgfSBzdGF0aWMgZ2V0IERlZmF1bHRUeXBlKCkgeyByZXR1cm4gWGUgfSBpc1dpdGhDb250ZW50KCkgeyByZXR1cm4gdGhpcy5nZXRUaXRsZSgpIHx8IHRoaXMuX2dldENvbnRlbnQoKSB9IGdldFRpcEVsZW1lbnQoKSB7IHJldHVybiB0aGlzLnRpcCB8fCAodGhpcy50aXAgPSBzdXBlci5nZXRUaXBFbGVtZW50KCksIHRoaXMuZ2V0VGl0bGUoKSB8fCB0LmZpbmRPbmUoIi5wb3BvdmVyLWhlYWRlciIsIHRoaXMudGlwKS5yZW1vdmUoKSwgdGhpcy5fZ2V0Q29udGVudCgpIHx8IHQuZmluZE9uZSgiLnBvcG92ZXItYm9keSIsIHRoaXMudGlwKS5yZW1vdmUoKSksIHRoaXMudGlwIH0gc2V0Q29udGVudCgpIHsgY29uc3QgZSA9IHRoaXMuZ2V0VGlwRWxlbWVudCgpOyB0aGlzLnNldEVsZW1lbnRDb250ZW50KHQuZmluZE9uZSgiLnBvcG92ZXItaGVhZGVyIiwgZSksIHRoaXMuZ2V0VGl0bGUoKSk7IGxldCBpID0gdGhpcy5fZ2V0Q29udGVudCgpOyAiZnVuY3Rpb24iID09IHR5cGVvZiBpICYmIChpID0gaS5jYWxsKHRoaXMuX2VsZW1lbnQpKSwgdGhpcy5zZXRFbGVtZW50Q29udGVudCh0LmZpbmRPbmUoIi5wb3BvdmVyLWJvZHkiLCBlKSwgaSksIGUuY2xhc3NMaXN0LnJlbW92ZSgiZmFkZSIsICJzaG93IikgfSBfYWRkQXR0YWNobWVudENsYXNzKHQpIHsgdGhpcy5nZXRUaXBFbGVtZW50KCkuY2xhc3NMaXN0LmFkZCgiYnMtcG9wb3Zlci0iICsgdGhpcy51cGRhdGVBdHRhY2htZW50KHQpKSB9IF9nZXRDb250ZW50KCkgeyByZXR1cm4gdGhpcy5fZWxlbWVudC5nZXRBdHRyaWJ1dGUoImRhdGEtYnMtY29udGVudCIpIHx8IHRoaXMuX2NvbmZpZy5jb250ZW50IH0gX2NsZWFuVGlwQ2xhc3MoKSB7IGNvbnN0IHQgPSB0aGlzLmdldFRpcEVsZW1lbnQoKSwgZSA9IHQuZ2V0QXR0cmlidXRlKCJjbGFzcyIpLm1hdGNoKFZlKTsgbnVsbCAhPT0gZSAmJiBlLmxlbmd0aCA+IDAgJiYgZS5tYXAodCA9PiB0LnRyaW0oKSkuZm9yRWFjaChlID0+IHQuY2xhc3NMaXN0LnJlbW92ZShlKSkgfSBzdGF0aWMgalF1ZXJ5SW50ZXJmYWNlKHQpIHsgcmV0dXJuIHRoaXMuZWFjaCgoZnVuY3Rpb24gKCkgeyBjb25zdCBlID0gUWUuZ2V0T3JDcmVhdGVJbnN0YW5jZSh0aGlzLCB0KTsgaWYgKCJzdHJpbmciID09IHR5cGVvZiB0KSB7IGlmICh2b2lkIDAgPT09IGVbdF0pIHRocm93IG5ldyBUeXBlRXJyb3IoYE5vIG1ldGhvZCBuYW1lZCAiJHt0fSJgKTsgZVt0XSgpIH0gfSkpIH0gfSBfKFFlKTsgY29uc3QgR2UgPSB7IG9mZnNldDogMTAsIG1ldGhvZDogImF1dG8iLCB0YXJnZXQ6ICIiIH0sIFplID0geyBvZmZzZXQ6ICJudW1iZXIiLCBtZXRob2Q6ICJzdHJpbmciLCB0YXJnZXQ6ICIoc3RyaW5nfGVsZW1lbnQpIiB9OyBjbGFzcyBKZSBleHRlbmRzIEIgeyBjb25zdHJ1Y3Rvcih0LCBlKSB7IHN1cGVyKHQpLCB0aGlzLl9zY3JvbGxFbGVtZW50ID0gIkJPRFkiID09PSB0aGlzLl9lbGVtZW50LnRhZ05hbWUgPyB3aW5kb3cgOiB0aGlzLl9lbGVtZW50LCB0aGlzLl9jb25maWcgPSB0aGlzLl9nZXRDb25maWcoZSksIHRoaXMuX3NlbGVjdG9yID0gYCR7dGhpcy5fY29uZmlnLnRhcmdldH0gLm5hdi1saW5rLCAke3RoaXMuX2NvbmZpZy50YXJnZXR9IC5saXN0LWdyb3VwLWl0ZW0sICR7dGhpcy5fY29uZmlnLnRhcmdldH0gLmRyb3Bkb3duLWl0ZW1gLCB0aGlzLl9vZmZzZXRzID0gW10sIHRoaXMuX3RhcmdldHMgPSBbXSwgdGhpcy5fYWN0aXZlVGFyZ2V0ID0gbnVsbCwgdGhpcy5fc2Nyb2xsSGVpZ2h0ID0gMCwgUC5vbih0aGlzLl9zY3JvbGxFbGVtZW50LCAic2Nyb2xsLmJzLnNjcm9sbHNweSIsICgpID0+IHRoaXMuX3Byb2Nlc3MoKSksIHRoaXMucmVmcmVzaCgpLCB0aGlzLl9wcm9jZXNzKCkgfSBzdGF0aWMgZ2V0IERlZmF1bHQoKSB7IHJldHVybiBHZSB9IHN0YXRpYyBnZXQgTkFNRSgpIHsgcmV0dXJuICJzY3JvbGxzcHkiIH0gcmVmcmVzaCgpIHsgY29uc3QgZSA9IHRoaXMuX3Njcm9sbEVsZW1lbnQgPT09IHRoaXMuX3Njcm9sbEVsZW1lbnQud2luZG93ID8gIm9mZnNldCIgOiAicG9zaXRpb24iLCBpID0gImF1dG8iID09PSB0aGlzLl9jb25maWcubWV0aG9kID8gZSA6IHRoaXMuX2NvbmZpZy5tZXRob2QsIHMgPSAicG9zaXRpb24iID09PSBpID8gdGhpcy5fZ2V0U2Nyb2xsVG9wKCkgOiAwOyB0aGlzLl9vZmZzZXRzID0gW10sIHRoaXMuX3RhcmdldHMgPSBbXSwgdGhpcy5fc2Nyb2xsSGVpZ2h0ID0gdGhpcy5fZ2V0U2Nyb2xsSGVpZ2h0KCksIHQuZmluZCh0aGlzLl9zZWxlY3RvcikubWFwKGUgPT4geyBjb25zdCBvID0gbihlKSwgciA9IG8gPyB0LmZpbmRPbmUobykgOiBudWxsOyBpZiAocikgeyBjb25zdCB0ID0gci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsgaWYgKHQud2lkdGggfHwgdC5oZWlnaHQpIHJldHVybiBbVVtpXShyKS50b3AgKyBzLCBvXSB9IHJldHVybiBudWxsIH0pLmZpbHRlcih0ID0+IHQpLnNvcnQoKHQsIGUpID0+IHRbMF0gLSBlWzBdKS5mb3JFYWNoKHQgPT4geyB0aGlzLl9vZmZzZXRzLnB1c2godFswXSksIHRoaXMuX3RhcmdldHMucHVzaCh0WzFdKSB9KSB9IGRpc3Bvc2UoKSB7IFAub2ZmKHRoaXMuX3Njcm9sbEVsZW1lbnQsICIuYnMuc2Nyb2xsc3B5IiksIHN1cGVyLmRpc3Bvc2UoKSB9IF9nZXRDb25maWcodCkgeyBpZiAoInN0cmluZyIgIT0gdHlwZW9mICh0ID0geyAuLi5HZSwgLi4uVS5nZXREYXRhQXR0cmlidXRlcyh0aGlzLl9lbGVtZW50KSwgLi4uIm9iamVjdCIgPT0gdHlwZW9mIHQgJiYgdCA/IHQgOiB7fSB9KS50YXJnZXQgJiYgcih0LnRhcmdldCkpIHsgbGV0IHsgaWQ6IGkgfSA9IHQudGFyZ2V0OyBpIHx8IChpID0gZSgic2Nyb2xsc3B5IiksIHQudGFyZ2V0LmlkID0gaSksIHQudGFyZ2V0ID0gIiMiICsgaSB9IHJldHVybiBsKCJzY3JvbGxzcHkiLCB0LCBaZSksIHQgfSBfZ2V0U2Nyb2xsVG9wKCkgeyByZXR1cm4gdGhpcy5fc2Nyb2xsRWxlbWVudCA9PT0gd2luZG93ID8gdGhpcy5fc2Nyb2xsRWxlbWVudC5wYWdlWU9mZnNldCA6IHRoaXMuX3Njcm9sbEVsZW1lbnQuc2Nyb2xsVG9wIH0gX2dldFNjcm9sbEhlaWdodCgpIHsgcmV0dXJuIHRoaXMuX3Njcm9sbEVsZW1lbnQuc2Nyb2xsSGVpZ2h0IHx8IE1hdGgubWF4KGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0LCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KSB9IF9nZXRPZmZzZXRIZWlnaHQoKSB7IHJldHVybiB0aGlzLl9zY3JvbGxFbGVtZW50ID09PSB3aW5kb3cgPyB3aW5kb3cuaW5uZXJIZWlnaHQgOiB0aGlzLl9zY3JvbGxFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodCB9IF9wcm9jZXNzKCkgeyBjb25zdCB0ID0gdGhpcy5fZ2V0U2Nyb2xsVG9wKCkgKyB0aGlzLl9jb25maWcub2Zmc2V0LCBlID0gdGhpcy5fZ2V0U2Nyb2xsSGVpZ2h0KCksIGkgPSB0aGlzLl9jb25maWcub2Zmc2V0ICsgZSAtIHRoaXMuX2dldE9mZnNldEhlaWdodCgpOyBpZiAodGhpcy5fc2Nyb2xsSGVpZ2h0ICE9PSBlICYmIHRoaXMucmVmcmVzaCgpLCB0ID49IGkpIHsgY29uc3QgdCA9IHRoaXMuX3RhcmdldHNbdGhpcy5fdGFyZ2V0cy5sZW5ndGggLSAxXTsgdGhpcy5fYWN0aXZlVGFyZ2V0ICE9PSB0ICYmIHRoaXMuX2FjdGl2YXRlKHQpIH0gZWxzZSB7IGlmICh0aGlzLl9hY3RpdmVUYXJnZXQgJiYgdCA8IHRoaXMuX29mZnNldHNbMF0gJiYgdGhpcy5fb2Zmc2V0c1swXSA+IDApIHJldHVybiB0aGlzLl9hY3RpdmVUYXJnZXQgPSBudWxsLCB2b2lkIHRoaXMuX2NsZWFyKCk7IGZvciAobGV0IGUgPSB0aGlzLl9vZmZzZXRzLmxlbmd0aDsgZS0tOyl0aGlzLl9hY3RpdmVUYXJnZXQgIT09IHRoaXMuX3RhcmdldHNbZV0gJiYgdCA+PSB0aGlzLl9vZmZzZXRzW2VdICYmICh2b2lkIDAgPT09IHRoaXMuX29mZnNldHNbZSArIDFdIHx8IHQgPCB0aGlzLl9vZmZzZXRzW2UgKyAxXSkgJiYgdGhpcy5fYWN0aXZhdGUodGhpcy5fdGFyZ2V0c1tlXSkgfSB9IF9hY3RpdmF0ZShlKSB7IHRoaXMuX2FjdGl2ZVRhcmdldCA9IGUsIHRoaXMuX2NsZWFyKCk7IGNvbnN0IGkgPSB0aGlzLl9zZWxlY3Rvci5zcGxpdCgiLCIpLm1hcCh0ID0+IGAke3R9W2RhdGEtYnMtdGFyZ2V0PSIke2V9Il0sJHt0fVtocmVmPSIke2V9Il1gKSwgbiA9IHQuZmluZE9uZShpLmpvaW4oIiwiKSk7IG4uY2xhc3NMaXN0LmNvbnRhaW5zKCJkcm9wZG93bi1pdGVtIikgPyAodC5maW5kT25lKCIuZHJvcGRvd24tdG9nZ2xlIiwgbi5jbG9zZXN0KCIuZHJvcGRvd24iKSkuY2xhc3NMaXN0LmFkZCgiYWN0aXZlIiksIG4uY2xhc3NMaXN0LmFkZCgiYWN0aXZlIikpIDogKG4uY2xhc3NMaXN0LmFkZCgiYWN0aXZlIiksIHQucGFyZW50cyhuLCAiLm5hdiwgLmxpc3QtZ3JvdXAiKS5mb3JFYWNoKGUgPT4geyB0LnByZXYoZSwgIi5uYXYtbGluaywgLmxpc3QtZ3JvdXAtaXRlbSIpLmZvckVhY2godCA9PiB0LmNsYXNzTGlzdC5hZGQoImFjdGl2ZSIpKSwgdC5wcmV2KGUsICIubmF2LWl0ZW0iKS5mb3JFYWNoKGUgPT4geyB0LmNoaWxkcmVuKGUsICIubmF2LWxpbmsiKS5mb3JFYWNoKHQgPT4gdC5jbGFzc0xpc3QuYWRkKCJhY3RpdmUiKSkgfSkgfSkpLCBQLnRyaWdnZXIodGhpcy5fc2Nyb2xsRWxlbWVudCwgImFjdGl2YXRlLmJzLnNjcm9sbHNweSIsIHsgcmVsYXRlZFRhcmdldDogZSB9KSB9IF9jbGVhcigpIHsgdC5maW5kKHRoaXMuX3NlbGVjdG9yKS5maWx0ZXIodCA9PiB0LmNsYXNzTGlzdC5jb250YWlucygiYWN0aXZlIikpLmZvckVhY2godCA9PiB0LmNsYXNzTGlzdC5yZW1vdmUoImFjdGl2ZSIpKSB9IHN0YXRpYyBqUXVlcnlJbnRlcmZhY2UodCkgeyByZXR1cm4gdGhpcy5lYWNoKChmdW5jdGlvbiAoKSB7IGNvbnN0IGUgPSBKZS5nZXRPckNyZWF0ZUluc3RhbmNlKHRoaXMsIHQpOyBpZiAoInN0cmluZyIgPT0gdHlwZW9mIHQpIHsgaWYgKHZvaWQgMCA9PT0gZVt0XSkgdGhyb3cgbmV3IFR5cGVFcnJvcihgTm8gbWV0aG9kIG5hbWVkICIke3R9ImApOyBlW3RdKCkgfSB9KSkgfSB9IFAub24od2luZG93LCAibG9hZC5icy5zY3JvbGxzcHkuZGF0YS1hcGkiLCAoKSA9PiB7IHQuZmluZCgnW2RhdGEtYnMtc3B5PSJzY3JvbGwiXScpLmZvckVhY2godCA9PiBuZXcgSmUodCkpIH0pLCBfKEplKTsgY2xhc3MgdGkgZXh0ZW5kcyBCIHsgc3RhdGljIGdldCBOQU1FKCkgeyByZXR1cm4gInRhYiIgfSBzaG93KCkgeyBpZiAodGhpcy5fZWxlbWVudC5wYXJlbnROb2RlICYmIHRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgJiYgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoImFjdGl2ZSIpKSByZXR1cm47IGxldCBlOyBjb25zdCBpID0gcyh0aGlzLl9lbGVtZW50KSwgbiA9IHRoaXMuX2VsZW1lbnQuY2xvc2VzdCgiLm5hdiwgLmxpc3QtZ3JvdXAiKTsgaWYgKG4pIHsgY29uc3QgaSA9ICJVTCIgPT09IG4ubm9kZU5hbWUgfHwgIk9MIiA9PT0gbi5ub2RlTmFtZSA/ICI6c2NvcGUgPiBsaSA+IC5hY3RpdmUiIDogIi5hY3RpdmUiOyBlID0gdC5maW5kKGksIG4pLCBlID0gZVtlLmxlbmd0aCAtIDFdIH0gY29uc3QgbyA9IGUgPyBQLnRyaWdnZXIoZSwgImhpZGUuYnMudGFiIiwgeyByZWxhdGVkVGFyZ2V0OiB0aGlzLl9lbGVtZW50IH0pIDogbnVsbDsgaWYgKFAudHJpZ2dlcih0aGlzLl9lbGVtZW50LCAic2hvdy5icy50YWIiLCB7IHJlbGF0ZWRUYXJnZXQ6IGUgfSkuZGVmYXVsdFByZXZlbnRlZCB8fCBudWxsICE9PSBvICYmIG8uZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuOyB0aGlzLl9hY3RpdmF0ZSh0aGlzLl9lbGVtZW50LCBuKTsgY29uc3QgciA9ICgpID0+IHsgUC50cmlnZ2VyKGUsICJoaWRkZW4uYnMudGFiIiwgeyByZWxhdGVkVGFyZ2V0OiB0aGlzLl9lbGVtZW50IH0pLCBQLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgInNob3duLmJzLnRhYiIsIHsgcmVsYXRlZFRhcmdldDogZSB9KSB9OyBpID8gdGhpcy5fYWN0aXZhdGUoaSwgaS5wYXJlbnROb2RlLCByKSA6IHIoKSB9IF9hY3RpdmF0ZShlLCBpLCBuKSB7IGNvbnN0IHMgPSAoIWkgfHwgIlVMIiAhPT0gaS5ub2RlTmFtZSAmJiAiT0wiICE9PSBpLm5vZGVOYW1lID8gdC5jaGlsZHJlbihpLCAiLmFjdGl2ZSIpIDogdC5maW5kKCI6c2NvcGUgPiBsaSA+IC5hY3RpdmUiLCBpKSlbMF0sIG8gPSBuICYmIHMgJiYgcy5jbGFzc0xpc3QuY29udGFpbnMoImZhZGUiKSwgciA9ICgpID0+IHRoaXMuX3RyYW5zaXRpb25Db21wbGV0ZShlLCBzLCBuKTsgcyAmJiBvID8gKHMuY2xhc3NMaXN0LnJlbW92ZSgic2hvdyIpLCB0aGlzLl9xdWV1ZUNhbGxiYWNrKHIsIGUsICEwKSkgOiByKCkgfSBfdHJhbnNpdGlvbkNvbXBsZXRlKGUsIGksIG4pIHsgaWYgKGkpIHsgaS5jbGFzc0xpc3QucmVtb3ZlKCJhY3RpdmUiKTsgY29uc3QgZSA9IHQuZmluZE9uZSgiOnNjb3BlID4gLmRyb3Bkb3duLW1lbnUgLmFjdGl2ZSIsIGkucGFyZW50Tm9kZSk7IGUgJiYgZS5jbGFzc0xpc3QucmVtb3ZlKCJhY3RpdmUiKSwgInRhYiIgPT09IGkuZ2V0QXR0cmlidXRlKCJyb2xlIikgJiYgaS5zZXRBdHRyaWJ1dGUoImFyaWEtc2VsZWN0ZWQiLCAhMSkgfSBlLmNsYXNzTGlzdC5hZGQoImFjdGl2ZSIpLCAidGFiIiA9PT0gZS5nZXRBdHRyaWJ1dGUoInJvbGUiKSAmJiBlLnNldEF0dHJpYnV0ZSgiYXJpYS1zZWxlY3RlZCIsICEwKSwgZihlKSwgZS5jbGFzc0xpc3QuY29udGFpbnMoImZhZGUiKSAmJiBlLmNsYXNzTGlzdC5hZGQoInNob3ciKTsgbGV0IHMgPSBlLnBhcmVudE5vZGU7IGlmIChzICYmICJMSSIgPT09IHMubm9kZU5hbWUgJiYgKHMgPSBzLnBhcmVudE5vZGUpLCBzICYmIHMuY2xhc3NMaXN0LmNvbnRhaW5zKCJkcm9wZG93bi1tZW51IikpIHsgY29uc3QgaSA9IGUuY2xvc2VzdCgiLmRyb3Bkb3duIik7IGkgJiYgdC5maW5kKCIuZHJvcGRvd24tdG9nZ2xlIiwgaSkuZm9yRWFjaCh0ID0+IHQuY2xhc3NMaXN0LmFkZCgiYWN0aXZlIikpLCBlLnNldEF0dHJpYnV0ZSgiYXJpYS1leHBhbmRlZCIsICEwKSB9IG4gJiYgbigpIH0gc3RhdGljIGpRdWVyeUludGVyZmFjZSh0KSB7IHJldHVybiB0aGlzLmVhY2goKGZ1bmN0aW9uICgpIHsgY29uc3QgZSA9IHRpLmdldE9yQ3JlYXRlSW5zdGFuY2UodGhpcyk7IGlmICgic3RyaW5nIiA9PSB0eXBlb2YgdCkgeyBpZiAodm9pZCAwID09PSBlW3RdKSB0aHJvdyBuZXcgVHlwZUVycm9yKGBObyBtZXRob2QgbmFtZWQgIiR7dH0iYCk7IGVbdF0oKSB9IH0pKSB9IH0gUC5vbihkb2N1bWVudCwgImNsaWNrLmJzLnRhYi5kYXRhLWFwaSIsICdbZGF0YS1icy10b2dnbGU9InRhYiJdLCBbZGF0YS1icy10b2dnbGU9InBpbGwiXSwgW2RhdGEtYnMtdG9nZ2xlPSJsaXN0Il0nLCAoZnVuY3Rpb24gKHQpIHsgWyJBIiwgIkFSRUEiXS5pbmNsdWRlcyh0aGlzLnRhZ05hbWUpICYmIHQucHJldmVudERlZmF1bHQoKSwgaCh0aGlzKSB8fCB0aS5nZXRPckNyZWF0ZUluc3RhbmNlKHRoaXMpLnNob3coKSB9KSksIF8odGkpOyBjb25zdCBlaSA9IHsgYW5pbWF0aW9uOiAiYm9vbGVhbiIsIGF1dG9oaWRlOiAiYm9vbGVhbiIsIGRlbGF5OiAibnVtYmVyIiB9LCBpaSA9IHsgYW5pbWF0aW9uOiAhMCwgYXV0b2hpZGU6ICEwLCBkZWxheTogNWUzIH07IGNsYXNzIG5pIGV4dGVuZHMgQiB7IGNvbnN0cnVjdG9yKHQsIGUpIHsgc3VwZXIodCksIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhlKSwgdGhpcy5fdGltZW91dCA9IG51bGwsIHRoaXMuX2hhc01vdXNlSW50ZXJhY3Rpb24gPSAhMSwgdGhpcy5faGFzS2V5Ym9hcmRJbnRlcmFjdGlvbiA9ICExLCB0aGlzLl9zZXRMaXN0ZW5lcnMoKSB9IHN0YXRpYyBnZXQgRGVmYXVsdFR5cGUoKSB7IHJldHVybiBlaSB9IHN0YXRpYyBnZXQgRGVmYXVsdCgpIHsgcmV0dXJuIGlpIH0gc3RhdGljIGdldCBOQU1FKCkgeyByZXR1cm4gInRvYXN0IiB9IHNob3coKSB7IFAudHJpZ2dlcih0aGlzLl9lbGVtZW50LCAic2hvdy5icy50b2FzdCIpLmRlZmF1bHRQcmV2ZW50ZWQgfHwgKHRoaXMuX2NsZWFyVGltZW91dCgpLCB0aGlzLl9jb25maWcuYW5pbWF0aW9uICYmIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZCgiZmFkZSIpLCB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoImhpZGUiKSwgZih0aGlzLl9lbGVtZW50KSwgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJzaG93aW5nIiksIHRoaXMuX3F1ZXVlQ2FsbGJhY2soKCkgPT4geyB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoInNob3dpbmciKSwgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJzaG93IiksIFAudHJpZ2dlcih0aGlzLl9lbGVtZW50LCAic2hvd24uYnMudG9hc3QiKSwgdGhpcy5fbWF5YmVTY2hlZHVsZUhpZGUoKSB9LCB0aGlzLl9lbGVtZW50LCB0aGlzLl9jb25maWcuYW5pbWF0aW9uKSkgfSBoaWRlKCkgeyB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygic2hvdyIpICYmIChQLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgImhpZGUuYnMudG9hc3QiKS5kZWZhdWx0UHJldmVudGVkIHx8ICh0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoInNob3ciKSwgdGhpcy5fcXVldWVDYWxsYmFjaygoKSA9PiB7IHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZCgiaGlkZSIpLCBQLnRyaWdnZXIodGhpcy5fZWxlbWVudCwgImhpZGRlbi5icy50b2FzdCIpIH0sIHRoaXMuX2VsZW1lbnQsIHRoaXMuX2NvbmZpZy5hbmltYXRpb24pKSkgfSBkaXNwb3NlKCkgeyB0aGlzLl9jbGVhclRpbWVvdXQoKSwgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoInNob3ciKSAmJiB0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoInNob3ciKSwgc3VwZXIuZGlzcG9zZSgpIH0gX2dldENvbmZpZyh0KSB7IHJldHVybiB0ID0geyAuLi5paSwgLi4uVS5nZXREYXRhQXR0cmlidXRlcyh0aGlzLl9lbGVtZW50KSwgLi4uIm9iamVjdCIgPT0gdHlwZW9mIHQgJiYgdCA/IHQgOiB7fSB9LCBsKCJ0b2FzdCIsIHQsIHRoaXMuY29uc3RydWN0b3IuRGVmYXVsdFR5cGUpLCB0IH0gX21heWJlU2NoZWR1bGVIaWRlKCkgeyB0aGlzLl9jb25maWcuYXV0b2hpZGUgJiYgKHRoaXMuX2hhc01vdXNlSW50ZXJhY3Rpb24gfHwgdGhpcy5faGFzS2V5Ym9hcmRJbnRlcmFjdGlvbiB8fCAodGhpcy5fdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLmhpZGUoKSB9LCB0aGlzLl9jb25maWcuZGVsYXkpKSkgfSBfb25JbnRlcmFjdGlvbih0LCBlKSB7IHN3aXRjaCAodC50eXBlKSB7IGNhc2UgIm1vdXNlb3ZlciI6IGNhc2UgIm1vdXNlb3V0IjogdGhpcy5faGFzTW91c2VJbnRlcmFjdGlvbiA9IGU7IGJyZWFrOyBjYXNlICJmb2N1c2luIjogY2FzZSAiZm9jdXNvdXQiOiB0aGlzLl9oYXNLZXlib2FyZEludGVyYWN0aW9uID0gZSB9aWYgKGUpIHJldHVybiB2b2lkIHRoaXMuX2NsZWFyVGltZW91dCgpOyBjb25zdCBpID0gdC5yZWxhdGVkVGFyZ2V0OyB0aGlzLl9lbGVtZW50ID09PSBpIHx8IHRoaXMuX2VsZW1lbnQuY29udGFpbnMoaSkgfHwgdGhpcy5fbWF5YmVTY2hlZHVsZUhpZGUoKSB9IF9zZXRMaXN0ZW5lcnMoKSB7IFAub24odGhpcy5fZWxlbWVudCwgImNsaWNrLmRpc21pc3MuYnMudG9hc3QiLCAnW2RhdGEtYnMtZGlzbWlzcz0idG9hc3QiXScsICgpID0+IHRoaXMuaGlkZSgpKSwgUC5vbih0aGlzLl9lbGVtZW50LCAibW91c2VvdmVyLmJzLnRvYXN0IiwgdCA9PiB0aGlzLl9vbkludGVyYWN0aW9uKHQsICEwKSksIFAub24odGhpcy5fZWxlbWVudCwgIm1vdXNlb3V0LmJzLnRvYXN0IiwgdCA9PiB0aGlzLl9vbkludGVyYWN0aW9uKHQsICExKSksIFAub24odGhpcy5fZWxlbWVudCwgImZvY3VzaW4uYnMudG9hc3QiLCB0ID0+IHRoaXMuX29uSW50ZXJhY3Rpb24odCwgITApKSwgUC5vbih0aGlzLl9lbGVtZW50LCAiZm9jdXNvdXQuYnMudG9hc3QiLCB0ID0+IHRoaXMuX29uSW50ZXJhY3Rpb24odCwgITEpKSB9IF9jbGVhclRpbWVvdXQoKSB7IGNsZWFyVGltZW91dCh0aGlzLl90aW1lb3V0KSwgdGhpcy5fdGltZW91dCA9IG51bGwgfSBzdGF0aWMgalF1ZXJ5SW50ZXJmYWNlKHQpIHsgcmV0dXJuIHRoaXMuZWFjaCgoZnVuY3Rpb24gKCkgeyBjb25zdCBlID0gbmkuZ2V0T3JDcmVhdGVJbnN0YW5jZSh0aGlzLCB0KTsgaWYgKCJzdHJpbmciID09IHR5cGVvZiB0KSB7IGlmICh2b2lkIDAgPT09IGVbdF0pIHRocm93IG5ldyBUeXBlRXJyb3IoYE5vIG1ldGhvZCBuYW1lZCAiJHt0fSJgKTsgZVt0XSh0aGlzKSB9IH0pKSB9IH0gcmV0dXJuIF8obmkpLCB7IEFsZXJ0OiBXLCBCdXR0b246IHEsIENhcm91c2VsOiBaLCBDb2xsYXBzZTogZXQsIERyb3Bkb3duOiBBZSwgTW9kYWw6IERlLCBPZmZjYW52YXM6IE5lLCBQb3BvdmVyOiBRZSwgU2Nyb2xsU3B5OiBKZSwgVGFiOiB0aSwgVG9hc3Q6IG5pLCBUb29sdGlwOiBGZSB9IH0pKTsNCi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJvb3RzdHJhcC5idW5kbGUubWluLmpzLm1hcA0KLyoqDQogKiBib290Ym94LmpzIDUuNC4wDQogKg0KICogaHR0cDovL2Jvb3Rib3hqcy5jb20vbGljZW5zZS50eHQNCiAqLw0KIWZ1bmN0aW9uKHQsZSl7J3VzZSBzdHJpY3QnOydmdW5jdGlvbic9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFsnanF1ZXJ5J10sZSk6J29iamVjdCc9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWUocmVxdWlyZSgnanF1ZXJ5JykpOnQuYm9vdGJveD1lKHQualF1ZXJ5KX0odGhpcyxmdW5jdGlvbiBlKHAsdSl7J3VzZSBzdHJpY3QnO3ZhciByLG4saSxsO09iamVjdC5rZXlzfHwoT2JqZWN0LmtleXM9KHI9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxuPSF7dG9TdHJpbmc6bnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyksbD0oaT1bJ3RvU3RyaW5nJywndG9Mb2NhbGVTdHJpbmcnLCd2YWx1ZU9mJywnaGFzT3duUHJvcGVydHknLCdpc1Byb3RvdHlwZU9mJywncHJvcGVydHlJc0VudW1lcmFibGUnLCdjb25zdHJ1Y3RvciddKS5sZW5ndGgsZnVuY3Rpb24odCl7aWYoJ2Z1bmN0aW9uJyE9dHlwZW9mIHQmJignb2JqZWN0JyE9dHlwZW9mIHR8fG51bGw9PT10KSl0aHJvdyBuZXcgVHlwZUVycm9yKCdPYmplY3Qua2V5cyBjYWxsZWQgb24gbm9uLW9iamVjdCcpO3ZhciBlLG8sYT1bXTtmb3IoZSBpbiB0KXIuY2FsbCh0LGUpJiZhLnB1c2goZSk7aWYobilmb3Iobz0wO288bDtvKyspci5jYWxsKHQsaVtvXSkmJmEucHVzaChpW29dKTtyZXR1cm4gYX0pKTt2YXIgZD17fTtkLlZFUlNJT049JzUuMC4wJzt2YXIgYj17ZW46e09LOidPSycsQ0FOQ0VMOidDYW5jZWwnLENPTkZJUk06J09LJ319LGY9e2RpYWxvZzoiPGRpdiBjbGFzcz1cImJvb3Rib3ggbW9kYWxcIiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIj48ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPjxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+PGRpdiBjbGFzcz1cImJvb3Rib3gtYm9keVwiPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PiIsaGVhZGVyOiI8ZGl2IGNsYXNzPVwibW9kYWwtaGVhZGVyXCI+PGg1IGNsYXNzPVwibW9kYWwtdGl0bGVcIj48L2g1PjwvZGl2PiIsZm9vdGVyOic8ZGl2IGNsYXNzPSJtb2RhbC1mb290ZXIiPjwvZGl2PicsY2xvc2VCdXR0b246JzxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYm9vdGJveC1jbG9zZS1idXR0b24gYnRuLWNsb3NlIiBhcmlhLWhpZGRlbj0idHJ1ZSI+PC9idXR0b24+Jyxmb3JtOic8Zm9ybSBjbGFzcz0iYm9vdGJveC1mb3JtIj48L2Zvcm0+JyxidXR0b246JzxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0iYnRuIj48L2J1dHRvbj4nLG9wdGlvbjonPG9wdGlvbj48L29wdGlvbj4nLHByb21wdE1lc3NhZ2U6JzxkaXYgY2xhc3M9ImJvb3Rib3gtcHJvbXB0LW1lc3NhZ2UiPjwvZGl2PicsaW5wdXRzOnt0ZXh0Oic8aW5wdXQgY2xhc3M9ImJvb3Rib3gtaW5wdXQgYm9vdGJveC1pbnB1dC10ZXh0IGZvcm0tY29udHJvbCIgYXV0b2NvbXBsZXRlPSJvZmYiIHR5cGU9InRleHQiIC8+Jyx0ZXh0YXJlYTonPHRleHRhcmVhIGNsYXNzPSJib290Ym94LWlucHV0IGJvb3Rib3gtaW5wdXQtdGV4dGFyZWEgZm9ybS1jb250cm9sIj48L3RleHRhcmVhPicsZW1haWw6JzxpbnB1dCBjbGFzcz0iYm9vdGJveC1pbnB1dCBib290Ym94LWlucHV0LWVtYWlsIGZvcm0tY29udHJvbCIgYXV0b2NvbXBsZXRlPSJvZmYiIHR5cGU9ImVtYWlsIiAvPicsc2VsZWN0Oic8c2VsZWN0IGNsYXNzPSJib290Ym94LWlucHV0IGJvb3Rib3gtaW5wdXQtc2VsZWN0IGZvcm0tY29udHJvbCI+PC9zZWxlY3Q+JyxjaGVja2JveDonPGRpdiBjbGFzcz0iZm9ybS1jaGVjayBjaGVja2JveCI+PGxhYmVsIGNsYXNzPSJmb3JtLWNoZWNrLWxhYmVsIj48aW5wdXQgY2xhc3M9ImZvcm0tY2hlY2staW5wdXQgYm9vdGJveC1pbnB1dCBib290Ym94LWlucHV0LWNoZWNrYm94IiB0eXBlPSJjaGVja2JveCIgLz48L2xhYmVsPjwvZGl2PicscmFkaW86JzxkaXYgY2xhc3M9ImZvcm0tY2hlY2sgcmFkaW8iPjxsYWJlbCBjbGFzcz0iZm9ybS1jaGVjay1sYWJlbCI+PGlucHV0IGNsYXNzPSJmb3JtLWNoZWNrLWlucHV0IGJvb3Rib3gtaW5wdXQgYm9vdGJveC1pbnB1dC1yYWRpbyIgdHlwZT0icmFkaW8iIG5hbWU9ImJvb3Rib3gtcmFkaW8iIC8+PC9sYWJlbD48L2Rpdj4nLGRhdGU6JzxpbnB1dCBjbGFzcz0iYm9vdGJveC1pbnB1dCBib290Ym94LWlucHV0LWRhdGUgZm9ybS1jb250cm9sIiBhdXRvY29tcGxldGU9Im9mZiIgdHlwZT0iZGF0ZSIgLz4nLHRpbWU6JzxpbnB1dCBjbGFzcz0iYm9vdGJveC1pbnB1dCBib290Ym94LWlucHV0LXRpbWUgZm9ybS1jb250cm9sIiBhdXRvY29tcGxldGU9Im9mZiIgdHlwZT0idGltZSIgLz4nLG51bWJlcjonPGlucHV0IGNsYXNzPSJib290Ym94LWlucHV0IGJvb3Rib3gtaW5wdXQtbnVtYmVyIGZvcm0tY29udHJvbCIgYXV0b2NvbXBsZXRlPSJvZmYiIHR5cGU9Im51bWJlciIgLz4nLHBhc3N3b3JkOic8aW5wdXQgY2xhc3M9ImJvb3Rib3gtaW5wdXQgYm9vdGJveC1pbnB1dC1wYXNzd29yZCBmb3JtLWNvbnRyb2wiIGF1dG9jb21wbGV0ZT0ib2ZmIiB0eXBlPSJwYXNzd29yZCIgLz4nLHJhbmdlOic8aW5wdXQgY2xhc3M9ImJvb3Rib3gtaW5wdXQgYm9vdGJveC1pbnB1dC1yYW5nZSBmb3JtLWNvbnRyb2wtcmFuZ2UiIGF1dG9jb21wbGV0ZT0ib2ZmIiB0eXBlPSJyYW5nZSIgLz4nfX0sbT17bG9jYWxlOidlbicsYmFja2Ryb3A6J3N0YXRpYycsYW5pbWF0ZTohMCxjbGFzc05hbWU6bnVsbCxjbG9zZUJ1dHRvbjohMCxzaG93OiEwLGNvbnRhaW5lcjonYm9keScsdmFsdWU6JycsaW5wdXRUeXBlOid0ZXh0Jyxzd2FwQnV0dG9uT3JkZXI6ITEsY2VudGVyVmVydGljYWw6ITEsbXVsdGlwbGU6ITEsc2Nyb2xsYWJsZTohMX07ZnVuY3Rpb24gYyh0LGUsbyl7cmV0dXJuIHAuZXh0ZW5kKCEwLHt9LHQsZnVuY3Rpb24odCxlKXt2YXIgbz10Lmxlbmd0aCxhPXt9O2lmKG88MXx8MjxvKXRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudCBsZW5ndGgnKTtyZXR1cm4gMj09PW98fCdzdHJpbmcnPT10eXBlb2YgdFswXT8oYVtlWzBdXT10WzBdLGFbZVsxXV09dFsxXSk6YT10WzBdLGF9KGUsbykpfWZ1bmN0aW9uIGgodCxlLG8sYSl7dmFyIHI7YSYmYVswXSYmKHI9YVswXS5sb2NhbGV8fG0ubG9jYWxlLChhWzBdLnN3YXBCdXR0b25PcmRlcnx8bS5zd2FwQnV0dG9uT3JkZXIpJiYoZT1lLnJldmVyc2UoKSkpO3ZhciBuLGksbCxzPXtjbGFzc05hbWU6J2Jvb3Rib3gtJyt0LGJ1dHRvbnM6ZnVuY3Rpb24odCxlKXtmb3IodmFyIG89e30sYT0wLHI9dC5sZW5ndGg7YTxyO2ErKyl7dmFyIG49dFthXSxpPW4udG9Mb3dlckNhc2UoKSxsPW4udG9VcHBlckNhc2UoKTtvW2ldPXtsYWJlbDoocz1sLGM9ZSxwPWJbY10scD9wW3NdOmIuZW5bc10pfX12YXIgcyxjLHA7cmV0dXJuIG99KGUscil9O3JldHVybiBuPWMocyxhLG8pLGw9e30sdihpPWUsZnVuY3Rpb24odCxlKXtsW2VdPSEwfSksdihuLmJ1dHRvbnMsZnVuY3Rpb24odCl7aWYobFt0XT09PXUpdGhyb3cgbmV3IEVycm9yKCdidXR0b24ga2V5ICInK3QrJyIgaXMgbm90IGFsbG93ZWQgKG9wdGlvbnMgYXJlICcraS5qb2luKCcgJykrJyknKX0pLG59ZnVuY3Rpb24gdyh0KXtyZXR1cm4gT2JqZWN0LmtleXModCkubGVuZ3RofWZ1bmN0aW9uIHYodCxvKXt2YXIgYT0wO3AuZWFjaCh0LGZ1bmN0aW9uKHQsZSl7byh0LGUsYSsrKX0pfWZ1bmN0aW9uIGcodCl7dC5kYXRhLmRpYWxvZy5maW5kKCcuYm9vdGJveC1hY2NlcHQnKS5maXJzdCgpLnRyaWdnZXIoJ2ZvY3VzJyl9ZnVuY3Rpb24geSh0KXt0LnRhcmdldD09PXQuZGF0YS5kaWFsb2dbMF0mJnQuZGF0YS5kaWFsb2cucmVtb3ZlKCl9ZnVuY3Rpb24geCh0KXt0LnRhcmdldD09PXQuZGF0YS5kaWFsb2dbMF0mJih0LmRhdGEuZGlhbG9nLm9mZignZXNjYXBlLmNsb3NlLmJiJyksdC5kYXRhLmRpYWxvZy5vZmYoJ2NsaWNrJykpfWZ1bmN0aW9uIGsodCxlLG8pe3Quc3RvcFByb3BhZ2F0aW9uKCksdC5wcmV2ZW50RGVmYXVsdCgpLHAuaXNGdW5jdGlvbihvKSYmITE9PT1vLmNhbGwoZSx0KXx8ZS5tb2RhbCgnaGlkZScpfWZ1bmN0aW9uIEUodCl7cmV0dXJuLyhbMDFdWzAtOV18MlswLTNdKTpbMC01XVswLTldPzpbMC01XVswLTldLy50ZXN0KHQpfWZ1bmN0aW9uIE8odCl7cmV0dXJuLyhcZHs0fSktKFxkezJ9KS0oXGR7Mn0pLy50ZXN0KHQpfXJldHVybiBkLmxvY2FsZXM9ZnVuY3Rpb24odCl7cmV0dXJuIHQ/Ylt0XTpifSxkLmFkZExvY2FsZT1mdW5jdGlvbih0LG8pe3JldHVybiBwLmVhY2goWydPSycsJ0NBTkNFTCcsJ0NPTkZJUk0nXSxmdW5jdGlvbih0LGUpe2lmKCFvW2VdKXRocm93IG5ldyBFcnJvcignUGxlYXNlIHN1cHBseSBhIHRyYW5zbGF0aW9uIGZvciAiJytlKyciJyl9KSxiW3RdPXtPSzpvLk9LLENBTkNFTDpvLkNBTkNFTCxDT05GSVJNOm8uQ09ORklSTX0sZH0sZC5yZW1vdmVMb2NhbGU9ZnVuY3Rpb24odCl7aWYoJ2VuJz09PXQpdGhyb3cgbmV3IEVycm9yKCciZW4iIGlzIHVzZWQgYXMgdGhlIGRlZmF1bHQgYW5kIGZhbGxiYWNrIGxvY2FsZSBhbmQgY2Fubm90IGJlIHJlbW92ZWQuJyk7cmV0dXJuIGRlbGV0ZSBiW3RdLGR9LGQuc2V0TG9jYWxlPWZ1bmN0aW9uKHQpe3JldHVybiBkLnNldERlZmF1bHRzKCdsb2NhbGUnLHQpfSxkLnNldERlZmF1bHRzPWZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIDI9PT1hcmd1bWVudHMubGVuZ3RoP3RbYXJndW1lbnRzWzBdXT1hcmd1bWVudHNbMV06dD1hcmd1bWVudHNbMF0scC5leHRlbmQobSx0KSxkfSxkLmhpZGVBbGw9ZnVuY3Rpb24oKXtyZXR1cm4gcCgnLmJvb3Rib3gnKS5tb2RhbCgnaGlkZScpLGR9LGQuaW5pdD1mdW5jdGlvbih0KXtyZXR1cm4gZSh0fHxwKX0sZC5kaWFsb2c9ZnVuY3Rpb24odCl7aWYocC5mbi5tb2RhbD09PXUpdGhyb3cgbmV3IEVycm9yKCJcIiQuZm4ubW9kYWxcIiBpcyBub3QgZGVmaW5lZDsgcGxlYXNlIGRvdWJsZSBjaGVjayB5b3UgaGF2ZSBpbmNsdWRlZCB0aGUgQm9vdHN0cmFwIEphdmFTY3JpcHQgbGlicmFyeS4gU2VlIGh0dHBzOi8vZ2V0Ym9vdHN0cmFwLmNvbS9kb2NzLzQuNC9nZXR0aW5nLXN0YXJ0ZWQvamF2YXNjcmlwdC8gZm9yIG1vcmUgZGV0YWlscy4iKTtpZih0PWZ1bmN0aW9uKHIpe3ZhciBuLGk7aWYoJ29iamVjdCchPXR5cGVvZiByKXRocm93IG5ldyBFcnJvcignUGxlYXNlIHN1cHBseSBhbiBvYmplY3Qgb2Ygb3B0aW9ucycpO2lmKCFyLm1lc3NhZ2UpdGhyb3cgbmV3IEVycm9yKCcibWVzc2FnZSIgb3B0aW9uIG11c3Qgbm90IGJlIG51bGwgb3IgYW4gZW1wdHkgc3RyaW5nLicpOyhyPXAuZXh0ZW5kKHt9LG0scikpLmJ1dHRvbnN8fChyLmJ1dHRvbnM9e30pO3JldHVybiBuPXIuYnV0dG9ucyxpPXcobiksdihuLGZ1bmN0aW9uKHQsZSxvKXtpZihwLmlzRnVuY3Rpb24oZSkmJihlPW5bdF09e2NhbGxiYWNrOmV9KSwnb2JqZWN0JyE9PXAudHlwZShlKSl0aHJvdyBuZXcgRXJyb3IoJ2J1dHRvbiB3aXRoIGtleSAiJyt0KyciIG11c3QgYmUgYW4gb2JqZWN0Jyk7aWYoZS5sYWJlbHx8KGUubGFiZWw9dCksIWUuY2xhc3NOYW1lKXt2YXIgYT0hMTthPXIuc3dhcEJ1dHRvbk9yZGVyPzA9PT1vOm89PT1pLTEsZS5jbGFzc05hbWU9aTw9MiYmYT8nYnRuLXByaW1hcnknOididG4tc2Vjb25kYXJ5IGJ0bi1kZWZhdWx0J319KSxyfSh0KSxwLmZuLm1vZGFsLkNvbnN0cnVjdG9yLlZFUlNJT04pe3QuZnVsbEJvb3RzdHJhcFZlcnNpb249cC5mbi5tb2RhbC5Db25zdHJ1Y3Rvci5WRVJTSU9OO3ZhciBlPXQuZnVsbEJvb3RzdHJhcFZlcnNpb24uaW5kZXhPZignLicpO3QuYm9vdHN0cmFwPXQuZnVsbEJvb3RzdHJhcFZlcnNpb24uc3Vic3RyaW5nKDAsZSl9ZWxzZSB0LmJvb3RzdHJhcD0nMicsdC5mdWxsQm9vdHN0cmFwVmVyc2lvbj0nMi4zLjInLGNvbnNvbGUud2FybignQm9vdGJveCB3aWxsICptb3N0bHkqIHdvcmsgd2l0aCBCb290c3RyYXAgMiwgYnV0IHdlIGRvIG5vdCBvZmZpY2lhbGx5IHN1cHBvcnQgaXQuIFBsZWFzZSB1cGdyYWRlLCBpZiBwb3NzaWJsZS4nKTt2YXIgbz1wKGYuZGlhbG9nKSxhPW8uZmluZCgnLm1vZGFsLWRpYWxvZycpLHI9by5maW5kKCcubW9kYWwtYm9keScpLG49cChmLmhlYWRlciksaT1wKGYuZm9vdGVyKSxsPXQuYnV0dG9ucyxzPXtvbkVzY2FwZTp0Lm9uRXNjYXBlfTtpZihyLmZpbmQoJy5ib290Ym94LWJvZHknKS5odG1sKHQubWVzc2FnZSksMDx3KHQuYnV0dG9ucykmJih2KGwsZnVuY3Rpb24odCxlKXt2YXIgbz1wKGYuYnV0dG9uKTtzd2l0Y2goby5kYXRhKCdiYi1oYW5kbGVyJyx0KSxvLmFkZENsYXNzKGUuY2xhc3NOYW1lKSx0KXtjYXNlJ29rJzpjYXNlJ2NvbmZpcm0nOm8uYWRkQ2xhc3MoJ2Jvb3Rib3gtYWNjZXB0Jyk7YnJlYWs7Y2FzZSdjYW5jZWwnOm8uYWRkQ2xhc3MoJ2Jvb3Rib3gtY2FuY2VsJyl9by5odG1sKGUubGFiZWwpLGkuYXBwZW5kKG8pLHNbdF09ZS5jYWxsYmFja30pLHIuYWZ0ZXIoaSkpLCEwPT09dC5hbmltYXRlJiZvLmFkZENsYXNzKCdmYWRlJyksdC5jbGFzc05hbWUmJm8uYWRkQ2xhc3ModC5jbGFzc05hbWUpLHQuc2l6ZSlzd2l0Y2godC5mdWxsQm9vdHN0cmFwVmVyc2lvbi5zdWJzdHJpbmcoMCwzKTwnMy4xJyYmY29uc29sZS53YXJuKCcic2l6ZSIgcmVxdWlyZXMgQm9vdHN0cmFwIDMuMS4wIG9yIGhpZ2hlci4gWW91IGFwcGVhciB0byBiZSB1c2luZyAnK3QuZnVsbEJvb3RzdHJhcFZlcnNpb24rJy4gUGxlYXNlIHVwZ3JhZGUgdG8gdXNlIHRoaXMgb3B0aW9uLicpLHQuc2l6ZSl7Y2FzZSdzbWFsbCc6Y2FzZSdzbSc6YS5hZGRDbGFzcygnbW9kYWwtc20nKTticmVhaztjYXNlJ2xhcmdlJzpjYXNlJ2xnJzphLmFkZENsYXNzKCdtb2RhbC1sZycpO2JyZWFrO2Nhc2UnZXh0cmEtbGFyZ2UnOmNhc2UneGwnOmEuYWRkQ2xhc3MoJ21vZGFsLXhsJyksdC5mdWxsQm9vdHN0cmFwVmVyc2lvbi5zdWJzdHJpbmcoMCwzKTwnNC4yJyYmY29uc29sZS53YXJuKCdVc2luZyBzaXplICJ4bCIvImV4dHJhLWxhcmdlIiByZXF1aXJlcyBCb290c3RyYXAgNC4yLjAgb3IgaGlnaGVyLiBZb3UgYXBwZWFyIHRvIGJlIHVzaW5nICcrdC5mdWxsQm9vdHN0cmFwVmVyc2lvbisnLiBQbGVhc2UgdXBncmFkZSB0byB1c2UgdGhpcyBvcHRpb24uJyl9aWYodC5zY3JvbGxhYmxlJiYoYS5hZGRDbGFzcygnbW9kYWwtZGlhbG9nLXNjcm9sbGFibGUnKSx0LmZ1bGxCb290c3RyYXBWZXJzaW9uLnN1YnN0cmluZygwLDMpPCc0LjMnJiZjb25zb2xlLndhcm4oJ1VzaW5nICJzY3JvbGxhYmxlIiByZXF1aXJlcyBCb290c3RyYXAgNC4zLjAgb3IgaGlnaGVyLiBZb3UgYXBwZWFyIHRvIGJlIHVzaW5nICcrdC5mdWxsQm9vdHN0cmFwVmVyc2lvbisnLiBQbGVhc2UgdXBncmFkZSB0byB1c2UgdGhpcyBvcHRpb24uJykpLHQudGl0bGUmJihyLmJlZm9yZShuKSxvLmZpbmQoJy5tb2RhbC10aXRsZScpLmh0bWwodC50aXRsZSkpLHQuY2xvc2VCdXR0b24pe3ZhciBjPXAoZi5jbG9zZUJ1dHRvbik7dC50aXRsZT8zPHQuYm9vdHN0cmFwP28uZmluZCgnLm1vZGFsLWhlYWRlcicpLmFwcGVuZChjKTpvLmZpbmQoJy5tb2RhbC1oZWFkZXInKS5wcmVwZW5kKGMpOmMucHJlcGVuZFRvKHIpfWlmKHQuY2VudGVyVmVydGljYWwmJihhLmFkZENsYXNzKCdtb2RhbC1kaWFsb2ctY2VudGVyZWQnKSx0LmZ1bGxCb290c3RyYXBWZXJzaW9uPCc0LjAuMCcmJmNvbnNvbGUud2FybignImNlbnRlclZlcnRpY2FsIiByZXF1aXJlcyBCb290c3RyYXAgNC4wLjAtYmV0YS4zIG9yIGhpZ2hlci4gWW91IGFwcGVhciB0byBiZSB1c2luZyAnK3QuZnVsbEJvb3RzdHJhcFZlcnNpb24rJy4gUGxlYXNlIHVwZ3JhZGUgdG8gdXNlIHRoaXMgb3B0aW9uLicpKSxvLm9uZSgnaGlkZS5icy5tb2RhbCcse2RpYWxvZzpvfSx4KSx0Lm9uSGlkZSl7aWYoIXAuaXNGdW5jdGlvbih0Lm9uSGlkZSkpdGhyb3cgbmV3IEVycm9yKCdBcmd1bWVudCBzdXBwbGllZCB0byAib25IaWRlIiBtdXN0IGJlIGEgZnVuY3Rpb24nKTtvLm9uKCdoaWRlLmJzLm1vZGFsJyx0Lm9uSGlkZSl9aWYoby5vbmUoJ2hpZGRlbi5icy5tb2RhbCcse2RpYWxvZzpvfSx5KSx0Lm9uSGlkZGVuKXtpZighcC5pc0Z1bmN0aW9uKHQub25IaWRkZW4pKXRocm93IG5ldyBFcnJvcignQXJndW1lbnQgc3VwcGxpZWQgdG8gIm9uSGlkZGVuIiBtdXN0IGJlIGEgZnVuY3Rpb24nKTtvLm9uKCdoaWRkZW4uYnMubW9kYWwnLHQub25IaWRkZW4pfWlmKHQub25TaG93KXtpZighcC5pc0Z1bmN0aW9uKHQub25TaG93KSl0aHJvdyBuZXcgRXJyb3IoJ0FyZ3VtZW50IHN1cHBsaWVkIHRvICJvblNob3ciIG11c3QgYmUgYSBmdW5jdGlvbicpO28ub24oJ3Nob3cuYnMubW9kYWwnLHQub25TaG93KX1pZihvLm9uZSgnc2hvd24uYnMubW9kYWwnLHtkaWFsb2c6b30sZyksdC5vblNob3duKXtpZighcC5pc0Z1bmN0aW9uKHQub25TaG93bikpdGhyb3cgbmV3IEVycm9yKCdBcmd1bWVudCBzdXBwbGllZCB0byAib25TaG93biIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7by5vbignc2hvd24uYnMubW9kYWwnLHQub25TaG93bil9cmV0dXJuJ3N0YXRpYychPT10LmJhY2tkcm9wJiZvLm9uKCdjbGljay5kaXNtaXNzLmJzLm1vZGFsJyxmdW5jdGlvbih0KXtvLmNoaWxkcmVuKCcubW9kYWwtYmFja2Ryb3AnKS5sZW5ndGgmJih0LmN1cnJlbnRUYXJnZXQ9by5jaGlsZHJlbignLm1vZGFsLWJhY2tkcm9wJykuZ2V0KDApKSx0LnRhcmdldD09PXQuY3VycmVudFRhcmdldCYmby50cmlnZ2VyKCdlc2NhcGUuY2xvc2UuYmInKX0pLG8ub24oJ2VzY2FwZS5jbG9zZS5iYicsZnVuY3Rpb24odCl7cy5vbkVzY2FwZSYmayh0LG8scy5vbkVzY2FwZSl9KSxvLm9uKCdjbGljaycsJy5tb2RhbC1mb290ZXIgYnV0dG9uOm5vdCguZGlzYWJsZWQpJyxmdW5jdGlvbih0KXt2YXIgZT1wKHRoaXMpLmRhdGEoJ2JiLWhhbmRsZXInKTtlIT09dSYmayh0LG8sc1tlXSl9KSxvLm9uKCdjbGljaycsJy5ib290Ym94LWNsb3NlLWJ1dHRvbicsZnVuY3Rpb24odCl7ayh0LG8scy5vbkVzY2FwZSl9KSxvLm9uKCdrZXl1cCcsZnVuY3Rpb24odCl7Mjc9PT10LndoaWNoJiZvLnRyaWdnZXIoJ2VzY2FwZS5jbG9zZS5iYicpfSkscCh0LmNvbnRhaW5lcikuYXBwZW5kKG8pLG8ubW9kYWwoe2JhY2tkcm9wOiEhdC5iYWNrZHJvcCYmJ3N0YXRpYycsa2V5Ym9hcmQ6ITEsc2hvdzohMX0pLHQuc2hvdyYmby5tb2RhbCgnc2hvdycpLG99LGQuYWxlcnQ9ZnVuY3Rpb24oKXt2YXIgdDtpZigodD1oKCdhbGVydCcsWydvayddLFsnbWVzc2FnZScsJ2NhbGxiYWNrJ10sYXJndW1lbnRzKSkuY2FsbGJhY2smJiFwLmlzRnVuY3Rpb24odC5jYWxsYmFjaykpdGhyb3cgbmV3IEVycm9yKCdhbGVydCByZXF1aXJlcyB0aGUgImNhbGxiYWNrIiBwcm9wZXJ0eSB0byBiZSBhIGZ1bmN0aW9uIHdoZW4gcHJvdmlkZWQnKTtyZXR1cm4gdC5idXR0b25zLm9rLmNhbGxiYWNrPXQub25Fc2NhcGU9ZnVuY3Rpb24oKXtyZXR1cm4hcC5pc0Z1bmN0aW9uKHQuY2FsbGJhY2spfHx0LmNhbGxiYWNrLmNhbGwodGhpcyl9LGQuZGlhbG9nKHQpfSxkLmNvbmZpcm09ZnVuY3Rpb24oKXt2YXIgdDtpZih0PWgoJ2NvbmZpcm0nLFsnY2FuY2VsJywnY29uZmlybSddLFsnbWVzc2FnZScsJ2NhbGxiYWNrJ10sYXJndW1lbnRzKSwhcC5pc0Z1bmN0aW9uKHQuY2FsbGJhY2spKXRocm93IG5ldyBFcnJvcignY29uZmlybSByZXF1aXJlcyBhIGNhbGxiYWNrJyk7cmV0dXJuIHQuYnV0dG9ucy5jYW5jZWwuY2FsbGJhY2s9dC5vbkVzY2FwZT1mdW5jdGlvbigpe3JldHVybiB0LmNhbGxiYWNrLmNhbGwodGhpcywhMSl9LHQuYnV0dG9ucy5jb25maXJtLmNhbGxiYWNrPWZ1bmN0aW9uKCl7cmV0dXJuIHQuY2FsbGJhY2suY2FsbCh0aGlzLCEwKX0sZC5kaWFsb2codCl9LGQucHJvbXB0PWZ1bmN0aW9uKCl7dmFyIHIsZSx0LG4sbyxhO2lmKHQ9cChmLmZvcm0pLChyPWgoJ3Byb21wdCcsWydjYW5jZWwnLCdjb25maXJtJ10sWyd0aXRsZScsJ2NhbGxiYWNrJ10sYXJndW1lbnRzKSkudmFsdWV8fChyLnZhbHVlPW0udmFsdWUpLHIuaW5wdXRUeXBlfHwoci5pbnB1dFR5cGU9bS5pbnB1dFR5cGUpLG89ci5zaG93PT09dT9tLnNob3c6ci5zaG93LHIuc2hvdz0hMSxyLmJ1dHRvbnMuY2FuY2VsLmNhbGxiYWNrPXIub25Fc2NhcGU9ZnVuY3Rpb24oKXtyZXR1cm4gci5jYWxsYmFjay5jYWxsKHRoaXMsbnVsbCl9LHIuYnV0dG9ucy5jb25maXJtLmNhbGxiYWNrPWZ1bmN0aW9uKCl7dmFyIHQ7aWYoJ2NoZWNrYm94Jz09PXIuaW5wdXRUeXBlKXQ9bi5maW5kKCdpbnB1dDpjaGVja2VkJykubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIHAodGhpcykudmFsKCl9KS5nZXQoKTtlbHNlIGlmKCdyYWRpbyc9PT1yLmlucHV0VHlwZSl0PW4uZmluZCgnaW5wdXQ6Y2hlY2tlZCcpLnZhbCgpO2Vsc2V7aWYoblswXS5jaGVja1ZhbGlkaXR5JiYhblswXS5jaGVja1ZhbGlkaXR5KCkpcmV0dXJuITE7dD0nc2VsZWN0Jz09PXIuaW5wdXRUeXBlJiYhMD09PXIubXVsdGlwbGU/bi5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gcCh0aGlzKS52YWwoKX0pLmdldCgpOm4udmFsKCl9cmV0dXJuIHIuY2FsbGJhY2suY2FsbCh0aGlzLHQpfSwhci50aXRsZSl0aHJvdyBuZXcgRXJyb3IoJ3Byb21wdCByZXF1aXJlcyBhIHRpdGxlJyk7aWYoIXAuaXNGdW5jdGlvbihyLmNhbGxiYWNrKSl0aHJvdyBuZXcgRXJyb3IoJ3Byb21wdCByZXF1aXJlcyBhIGNhbGxiYWNrJyk7aWYoIWYuaW5wdXRzW3IuaW5wdXRUeXBlXSl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcHJvbXB0IHR5cGUnKTtzd2l0Y2gobj1wKGYuaW5wdXRzW3IuaW5wdXRUeXBlXSksci5pbnB1dFR5cGUpe2Nhc2UndGV4dCc6Y2FzZSd0ZXh0YXJlYSc6Y2FzZSdlbWFpbCc6Y2FzZSdwYXNzd29yZCc6bi52YWwoci52YWx1ZSksci5wbGFjZWhvbGRlciYmbi5hdHRyKCdwbGFjZWhvbGRlcicsci5wbGFjZWhvbGRlciksci5wYXR0ZXJuJiZuLmF0dHIoJ3BhdHRlcm4nLHIucGF0dGVybiksci5tYXhsZW5ndGgmJm4uYXR0cignbWF4bGVuZ3RoJyxyLm1heGxlbmd0aCksci5yZXF1aXJlZCYmbi5wcm9wKHtyZXF1aXJlZDohMH0pLHIucm93cyYmIWlzTmFOKHBhcnNlSW50KHIucm93cykpJiYndGV4dGFyZWEnPT09ci5pbnB1dFR5cGUmJm4uYXR0cih7cm93czpyLnJvd3N9KTticmVhaztjYXNlJ2RhdGUnOmNhc2UndGltZSc6Y2FzZSdudW1iZXInOmNhc2UncmFuZ2UnOmlmKG4udmFsKHIudmFsdWUpLHIucGxhY2Vob2xkZXImJm4uYXR0cigncGxhY2Vob2xkZXInLHIucGxhY2Vob2xkZXIpLHIucGF0dGVybiYmbi5hdHRyKCdwYXR0ZXJuJyxyLnBhdHRlcm4pLHIucmVxdWlyZWQmJm4ucHJvcCh7cmVxdWlyZWQ6ITB9KSwnZGF0ZSchPT1yLmlucHV0VHlwZSYmci5zdGVwKXtpZighKCdhbnknPT09ci5zdGVwfHwhaXNOYU4oci5zdGVwKSYmMDxwYXJzZUZsb2F0KHIuc3RlcCkpKXRocm93IG5ldyBFcnJvcignInN0ZXAiIG11c3QgYmUgYSB2YWxpZCBwb3NpdGl2ZSBudW1iZXIgb3IgdGhlIHZhbHVlICJhbnkiLiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50L2lucHV0I2F0dHItc3RlcCBmb3IgbW9yZSBpbmZvcm1hdGlvbi4nKTtuLmF0dHIoJ3N0ZXAnLHIuc3RlcCl9IWZ1bmN0aW9uKHQsZSxvKXt2YXIgYT0hMSxyPSEwLG49ITA7aWYoJ2RhdGUnPT09dCllPT09dXx8KHI9TyhlKSk/bz09PXV8fChuPU8obykpfHxjb25zb2xlLndhcm4oJ0Jyb3dzZXJzIHdoaWNoIG5hdGl2ZWx5IHN1cHBvcnQgdGhlICJkYXRlIiBpbnB1dCB0eXBlIGV4cGVjdCBkYXRlIHZhbHVlcyB0byBiZSBvZiB0aGUgZm9ybSAiWVlZWS1NTS1ERCIgKHNlZSBJU08tODYwMSBodHRwczovL3d3dy5pc28ub3JnL2lzby04NjAxLWRhdGUtYW5kLXRpbWUtZm9ybWF0Lmh0bWwpLiBCb290Ym94IGRvZXMgbm90IGVuZm9yY2UgdGhpcyBydWxlLCBidXQgeW91ciBtYXggdmFsdWUgbWF5IG5vdCBiZSBlbmZvcmNlZCBieSB0aGlzIGJyb3dzZXIuJyk6Y29uc29sZS53YXJuKCdCcm93c2VycyB3aGljaCBuYXRpdmVseSBzdXBwb3J0IHRoZSAiZGF0ZSIgaW5wdXQgdHlwZSBleHBlY3QgZGF0ZSB2YWx1ZXMgdG8gYmUgb2YgdGhlIGZvcm0gIllZWVktTU0tREQiIChzZWUgSVNPLTg2MDEgaHR0cHM6Ly93d3cuaXNvLm9yZy9pc28tODYwMS1kYXRlLWFuZC10aW1lLWZvcm1hdC5odG1sKS4gQm9vdGJveCBkb2VzIG5vdCBlbmZvcmNlIHRoaXMgcnVsZSwgYnV0IHlvdXIgbWluIHZhbHVlIG1heSBub3QgYmUgZW5mb3JjZWQgYnkgdGhpcyBicm93c2VyLicpO2Vsc2UgaWYoJ3RpbWUnPT09dCl7aWYoZSE9PXUmJiEocj1FKGUpKSl0aHJvdyBuZXcgRXJyb3IoJyJtaW4iIGlzIG5vdCBhIHZhbGlkIHRpbWUuIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvMjAxMi9XRC1odG1sLW1hcmt1cC0yMDEyMDMxNS9kYXRhdHlwZXMuaHRtbCNmb3JtLmRhdGEudGltZSBmb3IgbW9yZSBpbmZvcm1hdGlvbi4nKTtpZihvIT09dSYmIShuPUUobykpKXRocm93IG5ldyBFcnJvcignIm1heCIgaXMgbm90IGEgdmFsaWQgdGltZS4gU2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDEyL1dELWh0bWwtbWFya3VwLTIwMTIwMzE1L2RhdGF0eXBlcy5odG1sI2Zvcm0uZGF0YS50aW1lIGZvciBtb3JlIGluZm9ybWF0aW9uLicpfWVsc2V7aWYoZSE9PXUmJmlzTmFOKGUpKXRocm93IHI9ITEsbmV3IEVycm9yKCcibWluIiBtdXN0IGJlIGEgdmFsaWQgbnVtYmVyLiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50L2lucHV0I2F0dHItbWluIGZvciBtb3JlIGluZm9ybWF0aW9uLicpO2lmKG8hPT11JiZpc05hTihvKSl0aHJvdyBuPSExLG5ldyBFcnJvcignIm1heCIgbXVzdCBiZSBhIHZhbGlkIG51bWJlci4gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUTUwvRWxlbWVudC9pbnB1dCNhdHRyLW1heCBmb3IgbW9yZSBpbmZvcm1hdGlvbi4nKX1pZihyJiZuKXtpZihvPD1lKXRocm93IG5ldyBFcnJvcignIm1heCIgbXVzdCBiZSBncmVhdGVyIHRoYW4gIm1pbiIuIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0VsZW1lbnQvaW5wdXQjYXR0ci1tYXggZm9yIG1vcmUgaW5mb3JtYXRpb24uJyk7YT0hMH1yZXR1cm4gYX0oci5pbnB1dFR5cGUsci5taW4sci5tYXgpfHwoci5taW4hPT11JiZuLmF0dHIoJ21pbicsci5taW4pLHIubWF4IT09dSYmbi5hdHRyKCdtYXgnLHIubWF4KSk7YnJlYWs7Y2FzZSdzZWxlY3QnOnZhciBpPXt9O2lmKGE9ci5pbnB1dE9wdGlvbnN8fFtdLCFwLmlzQXJyYXkoYSkpdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgcGFzcyBhbiBhcnJheSBvZiBpbnB1dCBvcHRpb25zJyk7aWYoIWEubGVuZ3RoKXRocm93IG5ldyBFcnJvcigncHJvbXB0IHdpdGggImlucHV0VHlwZSIgc2V0IHRvICJzZWxlY3QiIHJlcXVpcmVzIGF0IGxlYXN0IG9uZSBvcHRpb24nKTtyLnBsYWNlaG9sZGVyJiZuLmF0dHIoJ3BsYWNlaG9sZGVyJyxyLnBsYWNlaG9sZGVyKSxyLnJlcXVpcmVkJiZuLnByb3Aoe3JlcXVpcmVkOiEwfSksci5tdWx0aXBsZSYmbi5wcm9wKHttdWx0aXBsZTohMH0pLHYoYSxmdW5jdGlvbih0LGUpe3ZhciBvPW47aWYoZS52YWx1ZT09PXV8fGUudGV4dD09PXUpdGhyb3cgbmV3IEVycm9yKCdlYWNoIG9wdGlvbiBuZWVkcyBhICJ2YWx1ZSIgcHJvcGVydHkgYW5kIGEgInRleHQiIHByb3BlcnR5Jyk7ZS5ncm91cCYmKGlbZS5ncm91cF18fChpW2UuZ3JvdXBdPXAoJzxvcHRncm91cCAvPicpLmF0dHIoJ2xhYmVsJyxlLmdyb3VwKSksbz1pW2UuZ3JvdXBdKTt2YXIgYT1wKGYub3B0aW9uKTthLmF0dHIoJ3ZhbHVlJyxlLnZhbHVlKS50ZXh0KGUudGV4dCksby5hcHBlbmQoYSl9KSx2KGksZnVuY3Rpb24odCxlKXtuLmFwcGVuZChlKX0pLG4udmFsKHIudmFsdWUpO2JyZWFrO2Nhc2UnY2hlY2tib3gnOnZhciBsPXAuaXNBcnJheShyLnZhbHVlKT9yLnZhbHVlOltyLnZhbHVlXTtpZighKGE9ci5pbnB1dE9wdGlvbnN8fFtdKS5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCdwcm9tcHQgd2l0aCAiaW5wdXRUeXBlIiBzZXQgdG8gImNoZWNrYm94IiByZXF1aXJlcyBhdCBsZWFzdCBvbmUgb3B0aW9uJyk7bj1wKCc8ZGl2IGNsYXNzPSJib290Ym94LWNoZWNrYm94LWxpc3QiPjwvZGl2PicpLHYoYSxmdW5jdGlvbih0LG8pe2lmKG8udmFsdWU9PT11fHxvLnRleHQ9PT11KXRocm93IG5ldyBFcnJvcignZWFjaCBvcHRpb24gbmVlZHMgYSAidmFsdWUiIHByb3BlcnR5IGFuZCBhICJ0ZXh0IiBwcm9wZXJ0eScpO3ZhciBhPXAoZi5pbnB1dHNbci5pbnB1dFR5cGVdKTthLmZpbmQoJ2lucHV0JykuYXR0cigndmFsdWUnLG8udmFsdWUpLGEuZmluZCgnbGFiZWwnKS5hcHBlbmQoJ1xuJytvLnRleHQpLHYobCxmdW5jdGlvbih0LGUpe2U9PT1vLnZhbHVlJiZhLmZpbmQoJ2lucHV0JykucHJvcCgnY2hlY2tlZCcsITApfSksbi5hcHBlbmQoYSl9KTticmVhaztjYXNlJ3JhZGlvJzppZihyLnZhbHVlIT09dSYmcC5pc0FycmF5KHIudmFsdWUpKXRocm93IG5ldyBFcnJvcigncHJvbXB0IHdpdGggImlucHV0VHlwZSIgc2V0IHRvICJyYWRpbyIgcmVxdWlyZXMgYSBzaW5nbGUsIG5vbi1hcnJheSB2YWx1ZSBmb3IgInZhbHVlIicpO2lmKCEoYT1yLmlucHV0T3B0aW9uc3x8W10pLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoJ3Byb21wdCB3aXRoICJpbnB1dFR5cGUiIHNldCB0byAicmFkaW8iIHJlcXVpcmVzIGF0IGxlYXN0IG9uZSBvcHRpb24nKTtuPXAoJzxkaXYgY2xhc3M9ImJvb3Rib3gtcmFkaW9idXR0b24tbGlzdCI+PC9kaXY+Jyk7dmFyIHM9ITA7dihhLGZ1bmN0aW9uKHQsZSl7aWYoZS52YWx1ZT09PXV8fGUudGV4dD09PXUpdGhyb3cgbmV3IEVycm9yKCdlYWNoIG9wdGlvbiBuZWVkcyBhICJ2YWx1ZSIgcHJvcGVydHkgYW5kIGEgInRleHQiIHByb3BlcnR5Jyk7dmFyIG89cChmLmlucHV0c1tyLmlucHV0VHlwZV0pO28uZmluZCgnaW5wdXQnKS5hdHRyKCd2YWx1ZScsZS52YWx1ZSksby5maW5kKCdsYWJlbCcpLmFwcGVuZCgnXG4nK2UudGV4dCksci52YWx1ZSE9PXUmJmUudmFsdWU9PT1yLnZhbHVlJiYoby5maW5kKCdpbnB1dCcpLnByb3AoJ2NoZWNrZWQnLCEwKSxzPSExKSxuLmFwcGVuZChvKX0pLHMmJm4uZmluZCgnaW5wdXRbdHlwZT0icmFkaW8iXScpLmZpcnN0KCkucHJvcCgnY2hlY2tlZCcsITApfWlmKHQuYXBwZW5kKG4pLHQub24oJ3N1Ym1pdCcsZnVuY3Rpb24odCl7dC5wcmV2ZW50RGVmYXVsdCgpLHQuc3RvcFByb3BhZ2F0aW9uKCksZS5maW5kKCcuYm9vdGJveC1hY2NlcHQnKS50cmlnZ2VyKCdjbGljaycpfSksJychPT1wLnRyaW0oci5tZXNzYWdlKSl7dmFyIGM9cChmLnByb21wdE1lc3NhZ2UpLmh0bWwoci5tZXNzYWdlKTt0LnByZXBlbmQoYyksci5tZXNzYWdlPXR9ZWxzZSByLm1lc3NhZ2U9dDtyZXR1cm4oZT1kLmRpYWxvZyhyKSkub2ZmKCdzaG93bi5icy5tb2RhbCcsZyksZS5vbignc2hvd24uYnMubW9kYWwnLGZ1bmN0aW9uKCl7bi5mb2N1cygpfSksITA9PT1vJiZlLm1vZGFsKCdzaG93JyksZX0sZH0pOw0K","CacheKey":"Bn3m04h77DpCTlMmnR1cqNjNH_w"}